/*****************************************************************************
*  Copyright Statement:
*  --------------------
*  This software is protected by Copyright and the information contained
*  herein is confidential. The software may not be copied and the information
*  contained herein may not be used or disclosed except with the written
*  permission of MediaTek Inc. (C) 2005
*
*  BY OPENING THIS FILE, BUYER HEREBY UNEQUIVOCALLY ACKNOWLEDGES AND AGREES
*  THAT THE SOFTWARE/FIRMWARE AND ITS DOCUMENTATIONS ("MEDIATEK SOFTWARE")
*  RECEIVED FROM MEDIATEK AND/OR ITS REPRESENTATIVES ARE PROVIDED TO BUYER ON
*  AN "AS-IS" BASIS ONLY. MEDIATEK EXPRESSLY DISCLAIMS ANY AND ALL WARRANTIES,
*  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED WARRANTIES OF
*  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE OR NONINFRINGEMENT.
*  NEITHER DOES MEDIATEK PROVIDE ANY WARRANTY WHATSOEVER WITH RESPECT TO THE
*  SOFTWARE OF ANY THIRD PARTY WHICH MAY BE USED BY, INCORPORATED IN, OR
*  SUPPLIED WITH THE MEDIATEK SOFTWARE, AND BUYER AGREES TO LOOK ONLY TO SUCH
*  THIRD PARTY FOR ANY WARRANTY CLAIM RELATING THERETO. MEDIATEK SHALL ALSO
*  NOT BE RESPONSIBLE FOR ANY MEDIATEK SOFTWARE RELEASES MADE TO BUYER'S
*  SPECIFICATION OR TO CONFORM TO A PARTICULAR STANDARD OR OPEN FORUM.
*
*  BUYER'S SOLE AND EXCLUSIVE REMEDY AND MEDIATEK'S ENTIRE AND CUMULATIVE
*  LIABILITY WITH RESPECT TO THE MEDIATEK SOFTWARE RELEASED HEREUNDER WILL BE,
*  AT MEDIATEK'S OPTION, TO REVISE OR REPLACE THE MEDIATEK SOFTWARE AT ISSUE,
*  OR REFUND ANY SOFTWARE LICENSE FEES OR SERVICE CHARGE PAID BY BUYER TO
*  MEDIATEK FOR SUCH MEDIATEK SOFTWARE AT ISSUE. 
*
*  THE TRANSACTION CONTEMPLATED HEREUNDER SHALL BE CONSTRUED IN ACCORDANCE
*  WITH THE LAWS OF THE STATE OF CALIFORNIA, USA, EXCLUDING ITS CONFLICT OF
*  LAWS PRINCIPLES.  ANY DISPUTES, CONTROVERSIES OR CLAIMS ARISING THEREOF AND
*  RELATED THERETO SHALL BE SETTLED BY ARBITRATION IN SAN FRANCISCO, CA, UNDER
*  THE RULES OF THE INTERNATIONAL CHAMBER OF COMMERCE (ICC).
*
*****************************************************************************/

/*****************************************************************************
 *
 * Filename:
 * ---------
 *  PhbSrvGprot.h
 *
 * Project:
 * --------
 *  MAUI
 *
 * Description:
 * ------------
 *  This file contains external prototypes for phb service layer.
 *
 * Author:
 * -------
 * -------
 *
 *============================================================================
 *             HISTORY
 * Below this line, this part is controlled by PVCS VM. DO NOT MODIFY!!
 *------------------------------------------------------------------------------
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 *------------------------------------------------------------------------------
 * Upper this line, this part is controlled by PVCS VM. DO NOT MODIFY!!
 *============================================================================
 ****************************************************************************/
#ifndef PHBSRVGPROT_H
#define PHBSRVGPROT_H

#include "custom_phb_config.h"
#include "MMIDataType.h"
#ifdef __MMI_DIALER_SEARCH__
#include "CallLogSrvGprot.h"
#endif

#include "MMI_features.h"
#include "mmi_res_range_def.h"
#include "kal_general_types.h"
#include "customer_email_num.h"
#include "ps_public_enum.h"
#include "ps_public_struct.h"
#include "custom_calllog.h"
#include "l4c_common_enum.h"
#ifdef __VCARD_CLOUD_SUPPORT__
#include "CloudSrvGprot.h"
#endif

#ifdef __cplusplus
extern "C"
{
#endif

#if !defined(LOW_COST_SUPPORT) || defined(__OP01__) || defined(__OP02__)
#define __MMI_PHB_SLIM_EXTRA_DEFEATURE__
#else
#undef __MMI_PHB_SLIM_EXTRA_DEFEATURE__
#endif

#if !defined(LOW_COST_SUPPORT) || defined(__MMI_PHB_STARTUP_COPY_SIM__) || defined(__OP01__)|| defined(__OP02__)
#define __MMI_PHB_SLIM_SETTING_MESS_OPERATION__
#else
#undef __MMI_PHB_SLIM_SETTING_MESS_OPERATION__
#endif

#ifndef __ULC_AT__
#ifndef __MMI_PHB_ATCMD_SUPPORT__
#define __MMI_PHB_ATCMD_SUPPORT__
#endif 
#endif

#define SRV_PHB_SEARCH_LENGTH           ((MMI_PHB_NAME_LENGTH > MMI_PHB_NUMBER_LENGTH) ? MMI_PHB_NAME_LENGTH : MMI_PHB_NUMBER_LENGTH)/* max search length */

#ifndef SRV_FMGR_PATH_MAX_LEN
#define SRV_FMGR_PATH_MAX_LEN           (259)
#endif

/* PHB error result */
#define SRV_PHB_SIM_PARTIAL_ERROR       10        /* sim partial fail */
#define SRV_PHB_RES_ALL_ERROR           9         /* image & video write error */
#define SRV_PHB_IMAGE_RING_ERROR        7         /* image & ringtone write error */
#define SRV_PHB_RING_VIDEO_ERROR        6         /* ringtone & video write error */
#define SRV_PHB_IMAGE_VIDEO_ERROR       5         /* image & video write error */
#define SRV_PHB_RING_ERROR              4         /* ringtone write error */
#define SRV_PHB_IMAGE_ERROR             3         /* image write error */
#define SRV_PHB_VIDEO_ERROR             2         /* video write error */
#define SRV_PHB_NAME_MODIFIED           1         /* name have been truncated due to lengeth exceed SIM MAX name length */
#define SRV_PHB_NO_ERROR                0         /* Success */
#define SRV_PHB_ERROR                   -1        /* fail */
#define SRV_PHB_NOT_READY               -2        /* phonebook not ready */
#define SRV_PHB_NUM_NOT_READY           -3        /* phonebook number search not ready */
#define SRV_PHB_NOT_SUPPORT             -4        /* phonebook not support */
#define SRV_PHB_NOT_FOUND               -5        /* not found the contact */
#define SRV_PHB_DATAMGR_BUSY            -6        /* phonebook is busy, write operation fail due to other write operation is working */
#define SRV_PHB_STORAGE_FULL            -7        /* storage is full */
#define SRV_PHB_STORAGE_EMPTY           -8        /* storage is empty */
#define SRV_PHB_NO_SIM_CARD             -9       /* No SIM card */
#define SRV_PHB_ADN_FORBID              -10       /* SIM card contact can't access */
#define SRV_PHB_OUT_OF_INDEX            -11       /* invalid index */
#define SRV_PHB_NAME_NUM_EMPTY          -12       /* SIM card contact can't access */
#define SRV_PHB_NUMBER_TOO_LONG         -13       /* number too long */
#define SRV_PHB_BIRTHDAY_ERROR          -14       /* birthday error */
#define SRV_PHB_GROUP_NAME_EMPTY        -15       /* group name empty */
#define SRV_PHB_GROUP_NAME_DUP          -16       /* group name duplicate */
#define SRV_PHB_GROUP_FULL              -17       /* group full */
#define SRV_PHB_HALF_MARTCHED           -18       /* half matched */
#define SRV_PHB_SIM_ERROR               -19       /* SIM fail */
#define SRV_PHB_VCARD_INVALID           -20       /* vCard is invalid*/
#define SRV_PHB_TCARD_NOT_AVAILABLE     -21       /* memory card not available*/
#define SRV_PHB_CLOUD_NO_DATA           -22       /* SRV_CLD_NODATA*/
#define SRV_PHB_CLOUD_NO_MEMORY         -23       /* SRV_CLD_NO_MEMORY*/
#define SRV_PHB_CLOUD_FS_ERROR          -24       /* SRV_CLD_FS_ERROR*/
#define SRV_PHB_CLOUD_NETWORK_ERROR     -25       /* SRV_CLD_NWK_ERROR*/
#define SRV_PHB_CLOUD_LOGOUT            -26       /* SRV_CLD_LOGOUT*/
#define SRV_PHB_CLOUD_NO_NEED_SYNC      -27       /* SRV_CLD_NO_NEED_SYNC*/
#define SRV_PHB_CLOUD_NO_STORAGE        -28       /* SRV_CLD_NO_STORAGE*/
#define SRV_PHB_CLOUD_ACCOUNT_ERROR     -29       /* SRV_CLD_ACCT_ERROR*/
#define SRV_PHB_CLOUD_BUSY              -30       /* SRV_CLD_BUSY*/
#define SRV_PHB_CLOUD_UID_ERROR         -31       /* SRV_CLD_GET_UID_ERROR*/
#define SRV_PHB_CLOUD_ERROR             -32       /* SRV_CLD_ERROR */
#define SRV_PHB_CLOUD_DISK_FULL         -33       /* SRV_CLD_DISK_FULL*/
#define SRV_PHB_TCARD_ERROR             -34       /* memory card write error*/
#define SRV_PHB_GROUP_CANCEL_OP         -35       /* group cancel op */


/* PHB field type */
#define SRV_PHB_ENTRY_FIELD_NAME                0x00000001      /* phonebook name field */
#define SRV_PHB_ENTRY_FIELD_NICK                0x00000002      /* phonebook name field */
#define SRV_PHB_ENTRY_FIELD_NUMBER              0x00000004      /* phonebook mobile number field */
#define SRV_PHB_ENTRY_FIELD_OPT_NUM_1           0x00000008      /* phonebook home number field */
#define SRV_PHB_ENTRY_FIELD_OPT_NUM_2           0x00000010      /* phonebook office number field */
#define SRV_PHB_ENTRY_FIELD_OPT_NUM_3           0x00000020      /* phonebook fax number field */
#define SRV_PHB_ENTRY_FIELD_HOME                0x00000008      /* phonebook home number field */
#define SRV_PHB_ENTRY_FIELD_OFFICE              0x00000010      /* phonebook office number field */
#define SRV_PHB_ENTRY_FIELD_FAX                 0x00000020      /* phonebook fax number field */
#define SRV_PHB_ENTRY_FIELD_EMAIL1              0x00000040      /* phonebook email1 address field */
#define SRV_PHB_ENTRY_FIELD_EMAIL2              0x00000080      /* phonebook email2 address field */
#define SRV_PHB_ENTRY_FIELD_COMPANY             0x00000100      /* phonebook company name field */
#define SRV_PHB_ENTRY_FIELD_P0BOX               0x00000200      /* phonebook pobox field */
#define SRV_PHB_ENTRY_FIELD_EXTENSION           0x00000400      /* phonebook extension field */
#define SRV_PHB_ENTRY_FIELD_STREET              0x00000800      /* phonebook street field */
#define SRV_PHB_ENTRY_FIELD_CITY                0x00001000      /* phonebook city field */
#define SRV_PHB_ENTRY_FIELD_STATE               0x00002000      /* phonebook state field */
#define SRV_PHB_ENTRY_FIELD_POSTALCODE          0x00004000      /* phonebook postalcode field */
#define SRV_PHB_ENTRY_FIELD_COUNTRY             0x00008000      /* phonebook country field */
#define SRV_PHB_ENTRY_FIELD_VOIP                0x00010000      /* phonebook voip number field */
#define SRV_PHB_ENTRY_FIELD_IMPS                0x00020000      /* phonebook imps field */
#define SRV_PHB_ENTRY_FIELD_TITLE               0x00040000      /* phonebook title field */
#define SRV_PHB_ENTRY_FIELD_URL                 0x00080000      /* phonebook url field */
#define SRV_PHB_ENTRY_FIELD_NOTE                0x00100000      /* phonebook note field */
#define SRV_PHB_ENTRY_FIELD_GROUP               0x00200000      /* phonebook caller group field */
#define SRV_PHB_ENTRY_FIELD_BDAY                0x00400000      /* phonebook birthday field */
#define SRV_PHB_ENTRY_FIELD_RING                0x00800000      /* phonebook caller ringtione field */
#define SRV_PHB_ENTRY_FIELD_PIC                 0x01000000      /* phonebook caller video field */
#define SRV_PHB_ENTRY_FIELD_VIDEO               0x02000000      /* phonebook caller pic field */
#define SRV_PHB_ENTRY_FIELD_DEF                 0x04000000      /* phonebook default number field */
#define SRV_PHB_ENTRY_FIELD_ALL                 0xFFFFFFFF      /* phonebook ALL field */

#define SRV_PHB_ENTRY_FIELD_SIM                 (SRV_PHB_ENTRY_FIELD_NAME | SRV_PHB_ENTRY_FIELD_NUMBER)    /* phonebook SIM fields */
#define SRV_PHB_ENTRY_FIELD_OPTIONAL_NUM        (SRV_PHB_ENTRY_FIELD_OPT_NUM_1 | SRV_PHB_ENTRY_FIELD_OPT_NUM_2 | SRV_PHB_ENTRY_FIELD_OPT_NUM_3) /* phonebook optional number fields */
#define SRV_PHB_ENTRY_FIELD_OPTIONAL            (SRV_PHB_ENTRY_FIELD_OPTIONAL_NUM | SRV_PHB_ENTRY_FIELD_EMAIL | SRV_PHB_ENTRY_FIELD_COMPANY) /* phonebook optional fields */
#define SRV_PHB_ENTRY_FIELD_ADDRESS             (SRV_PHB_ENTRY_FIELD_P0BOX | SRV_PHB_ENTRY_FIELD_EXTENSION | SRV_PHB_ENTRY_FIELD_STREET | SRV_PHB_ENTRY_FIELD_CITY | SRV_PHB_ENTRY_FIELD_STATE | SRV_PHB_ENTRY_FIELD_POSTALCODE | SRV_PHB_ENTRY_FIELD_COUNTRY)
#define SRV_PHB_ENTRY_FIELD_INFO                (SRV_PHB_ENTRY_FIELD_ADDRESS | SRV_PHB_ENTRY_FIELD_TITLE | SRV_PHB_ENTRY_FIELD_URL | SRV_PHB_ENTRY_FIELD_NOTE)    /* phonebook info fields */
#define SRV_PHB_ENTRY_FIELD_RES                 (SRV_PHB_ENTRY_FIELD_RING | SRV_PHB_ENTRY_FIELD_PIC | SRV_PHB_ENTRY_FIELD_VIDEO)    /* phonebook res fields */

#define SRV_PHB_ENTRY_FIELD_GSM_NUM             (SRV_PHB_ENTRY_FIELD_NUMBER | SRV_PHB_ENTRY_FIELD_OPTIONAL_NUM)    /* phonebook gsm number fields */
#define SRV_PHB_ENTRY_FIELD_ALL_NUM             (SRV_PHB_ENTRY_FIELD_GSM_NUM | SRV_PHB_ENTRY_FIELD_VOIP)    /* phonebook all number fields */
#define SRV_PHB_ENTRY_FIELD_EMAIL               (SRV_PHB_ENTRY_FIELD_EMAIL1 | SRV_PHB_ENTRY_FIELD_EMAIL2)   /* phonebook all email fields */
#define SRV_PHB_ENTRY_FIELD_MMS                 (SRV_PHB_ENTRY_FIELD_GSM_NUM | SRV_PHB_ENTRY_FIELD_EMAIL)   /* phonebook gsm number & email fields */
#define SRV_PHB_ENTRY_FIELD_MMS_PHB             (SRV_PHB_ENTRY_FIELD_NUMBER | SRV_PHB_ENTRY_FIELD_EMAIL)    /* phonebook mobile number & email fields */

#define SRV_PHB_ENTRY_FIELD_VCARD               (SRV_PHB_ENTRY_FIELD_SIM | SRV_PHB_ENTRY_FIELD_OPTIONAL | SRV_PHB_ENTRY_FIELD_INFO | SRV_PHB_ENTRY_FIELD_GROUP | SRV_PHB_ENTRY_FIELD_BDAY | SRV_PHB_ENTRY_FIELD_PIC) /* vcard support fields */
#define SRV_PHB_ENTRY_FIELD_VENDOR              (SRV_PHB_ENTRY_FIELD_SIM | SRV_PHB_ENTRY_FIELD_OPTIONAL | SRV_PHB_ENTRY_FIELD_INFO | SRV_PHB_ENTRY_FIELD_GROUP | SRV_PHB_ENTRY_FIELD_BDAY) /* vendor support fields */

#define SRV_PHB_INVALID_INDEX                   0xFFFF

/* caller resource type */
#define  SRV_PHB_RES_TYPE_RING_ID               0x0001
#define  SRV_PHB_RES_TYPE_IMAGE_ID              0x0002
#define  SRV_PHB_RES_TYPE_VIDEO_ID              0x0004
#define  SRV_PHB_RES_TYPE_AUDIO_RING_FILE       0x0008
#define  SRV_PHB_RES_TYPE_VIDEO_RING_FILE       0x0010
#define  SRV_PHB_RES_TYPE_IMAGE_FILE            0x0020
#define  SRV_PHB_RES_TYPE_VIDEO_FILE            0x0040
#define  SRV_PHB_RES_TYPE_VIDEO_SOUND_ON        0x0080

#define  SRV_PHB_RES_TYPE_RING_FILE             (SRV_PHB_RES_TYPE_AUDIO_RING_FILE | SRV_PHB_RES_TYPE_VIDEO_RING_FILE)

#define  SRV_PHB_RES_TYPE_RING                  (SRV_PHB_RES_TYPE_RING_ID | SRV_PHB_RES_TYPE_RING_FILE)
#define  SRV_PHB_RES_TYPE_IMAGE                 (SRV_PHB_RES_TYPE_IMAGE_ID | SRV_PHB_RES_TYPE_IMAGE_FILE)
#define  SRV_PHB_RES_TYPE_VIDEO                 (SRV_PHB_RES_TYPE_VIDEO_ID | SRV_PHB_RES_TYPE_VIDEO_FILE | SRV_PHB_RES_TYPE_VIDEO_SOUND_ON)

#define  SRV_PHB_RES_TYPE_VISUAL                (SRV_PHB_RES_TYPE_IMAGE | SRV_PHB_RES_TYPE_VIDEO | SRV_PHB_RES_TYPE_VIDEO_RING_FILE)

#if defined(DEBUG_KAL) && defined(DEBUG_BUF2)
#define srv_phb_mem_malloc(size, type)          srv_phb_mem_malloc_ext(size, type, __FILE__, __LINE__)
#define srv_phb_mem_free(memblock)              srv_phb_mem_free_ext(memblock, __FILE__, __LINE__)
#else /* defined(DEBUG_KAL) && defined(DEBUG_BUF2) */ 
#define srv_phb_mem_malloc(size, type)          srv_phb_mem_malloc_ext(size, type, "", __LINE__)
#define srv_phb_mem_free(memblock)              srv_phb_mem_free_ext(memblock, "", __LINE__)
#endif /* defined(DEBUG_KAL) && defined(DEBUG_BUF2) */


/***************************************************************************** 
 * Typedef 
 *****************************************************************************/

/****************************************************/
/*                                                  */
/*               Enum                               */
/*                                                  */
/****************************************************/

typedef enum
{
    EVT_ID_PHB_ADD_CONTACT = SRV_PHB_BASE + 1,
    EVT_ID_PHB_UPD_CONTACT,
    EVT_ID_PHB_DEL_CONTACT,
    EVT_ID_PHB_READY,                           /* srv_phb_startup_evt_struct */
    EVT_ID_PHB_AT_NOTIFY,                       /* srv_phb_at_notify_evt_struct */
    EVT_ID_PHB_OWNER_NUMBER_CHANGED,            /* srv_phb_owner_number_changed_evt_struct */
    EVT_ID_PHB_OP_GROUP,
    EVT_ID_PHB_MULTI_OP_STATUS,
    EVT_ID_PHB_STORAGE_CHANGE,
    EVT_ID_PHB_NAME_SEQUENCE_CHANGE,
    EVT_ID_PHB_BACKUP_RESTORE_NCENTER,
    EVT_ID_PHB_FIELD_TYPE_CHNAGED_IND,
    EVT_ID_PHB_PRE_UPDATE_CONTACT,
    EVT_ID_PHB_MULTI_OP_DONE,
    #ifdef __SRV_PHB_TCARD_STORAGE_SUPPORT__
    EVT_ID_PHB_TCARD_READY,
    #endif
    EVT_ID_PHB_PBAPC_NOTIFY,
    EVT_ID_PBAP_NOTIFY,
#if defined(__MMI_WEARABLE_DEVICE__)
    EVT_ID_TIP_UPDATE_TIME,
    EVT_ID_TIP_CONNECT,
    EVT_ID_TIP_DISCONNECT,
    EVT_ID_GATT_UPDATE_TF,
#endif
    EVT_ID_PHB_MAX
} srv_phb_event_enum;


typedef enum
{
    SRV_PHB_NAME_DISPLAY_TYPE_NONE,
    SRV_PHB_NAME_DISPLAY_TYPE_1,                /* last name first name */
    SRV_PHB_NAME_DISPLAY_TYPE_2,                /* last name,first name */
    SRV_PHB_NAME_DISPLAY_TYPE_3,                /* first name last name */
    SRV_PHB_NAME_DISPLAY_TYPE_4,                /* first name,last name */
    SRV_PHB_NAME_DISPLAY_TYPE_TOTAL
} srv_phb_name_display_type_enum;


/* phonebook search type enmu */
typedef enum
{
    SRV_PHB_SEARCH_TYPE_NAME,                   /* search name */
    SRV_PHB_SEARCH_TYPE_NUM,                    /* search number */
    SRV_PHB_SEARCH_TYPE_TOTAL                   /* enum total */
} srv_phb_search_type_enum;


/* phonebook memory type enmu */
typedef enum
{
    SRV_PHB_MEMORY_TYPE_CTR,                    /* control buffer */
    SRV_PHB_MEMORY_TYPE_ADM,                    /* phb ADM buffer */
    SRV_PHB_MEMORY_TYPE_TOTAL                   /* enum total */
} srv_phb_memory_type_enum;


/* phonebook check storage type enmu */
typedef enum
{
    SRV_PHB_CHECK_STORAGE_EMPTY,
    SRV_PHB_CHECK_STORAGE_FULL,
    SRV_PHB_CHECK_STORAGE_FULL_OR_EMPTY,
    SRV_PHB_CHECK_STORAGE_TYPE_TOTAL
} srv_phb_check_storage_type_enum;


typedef enum
{
    SRV_PHB_AT_OP_TYPE_ADD,
    SRV_PHB_AT_OP_TYPE_EDIT,
    SRV_PHB_AT_OP_TYPE_DELETE,
    SRV_PHB_AT_OP_TYPE_DELETE_ALL,
    SRV_PHB_AT_OP_TYPE_TOTAL
} srv_phb_at_op_type_enum;


typedef enum
{
    SRV_PHB_GROUP_OP_TYPE_ADD,
    SRV_PHB_GROUP_OP_TYPE_UPD,
    SRV_PHB_GROUP_OP_TYPE_DEL,
    SRV_PHB_GROUP_OP_TYPE_ADD_MEMBER,
    SRV_PHB_GROUP_OP_TYPE_REMOVE_MEMBER,

    SRV_PHB_GROUP_OP_TYPE_TOTAL
} srv_phb_group_op_type_enum;

typedef enum
{
    SRV_PHB_NUMBER_OP_TYPE_DIAL = 0x0F,
    SRV_PHB_NUMBER_OP_TYPE_MESSAGE = 0xF0,
    SRV_PHB_NUMBER_OP_TYPE_ALL = 0xFF,
    SRV_PHB_NUMBER_OP_TYPE_TOTAL
} srv_phb_number_op_type_enum;


/****************************************************/
/*                                                  */
/*               Struct                             */
/*                                                  */
/****************************************************/


/* phonebook contact field data struct */
typedef struct
{
    U16* name;                                              /* WCS name field point */
    U16* l_name;                                            /* WCS last name field point */
    U16* n_name;                                            /* WCS nick name field point */
    U16* number;                                            /* WCS mobile number field point */
    mmi_phb_wcs_num_struct* opt_num[MMI_PHB_OPT_NUM_COUNT]; /* optional number field point array */
    U8* opt_order;
    
    /* to be remove begin */
    U16* home_number;                                       /* WCS home number field point */
    U16* office_number;                                     /* WCS office number field point */
    U16* fax_number;                                        /* WCS fax number field point */
    /* to be remove end */
    
    U16* company_name;                                      /* WCS company name field point */
    U16* email_address;                                     /* WCS eamil address field point */
    U16* email_address2;                                    /* WCS eamil address field point */
    U16 b_year;                                             /* birthday year field */
    U8 b_month;                                             /* birthday month field */
    U8 b_day;                                               /* birthday day field */
    U16* title;                                             /* WCS title field point */
    U16* url;                                               /* WCS url field point */
    U16* pobox;                                             /* WCS pobox field point */
    U16* extension;                                         /* WCS extension field point */
    U16* street;                                            /* WCS street field point */
    U16* city;                                              /* WCS city field point */
    U16* state;                                             /* WCS state field point */
    U16* postalcode;                                        /* WCS postal code field point */
    U16* country;                                           /* WCS country field point */
    U16* note;                                              /* WCS note field point */
    U32 group_mask;                                         /* group mask field */
    U16* ringtone_path;                                     /* WCS caller ringtone path point */
    U16* image_path;                                        /* WCS caller pic path point */
    U16* video_path;                                        /* WCS caller video path point */
    U16 ringtone_id;                                        /* caller ringtone id */
    U16 image_id;                                           /* caller pic id */
    U16 video_id;                                           /* caller video id */
    U16 res_type;                                           /* caller res type */
    U8 default_number;                                      /* default number field point */
    U16* imps;                                              /* WCS imps field point */
    U16* voip;                                              /* WCS voip field point */
} srv_phb_contact_data_struct;


/* phonebook contact info struct */
typedef struct
{
    U32 field_mask;                             /* contain field mask */
    srv_phb_contact_data_struct field_data;     /* contact's field data */
} srv_phb_contact_info_struct;


/* phonebook group_filter struct */
typedef struct
{
    U32 group_mask;                             /* group mask */
    MMI_BOOL is_equal;                          /* MMI_TRUE: filter all contacts in the group, else filter all contacts not in the group */
} srv_phb_group_filter_struct;


/* phonebook qsearch filter struct */
typedef struct
{
    U16* key_word;                              /* input key word */
    U16 key_len;
    U16 input_mode;                             /* input mode */
} srv_phb_qsearch_filter_struct;


/* phonebook qsearch filter struct */
typedef struct
{
    U16* key_word;                              /* input key word */
    U16 key_len;
} srv_phb_name_filter_struct;


/* phonebook filter struct */
typedef struct
{
    U8 storage;                                 /* storage filter */
    U32 field_filter;                           /* field filter */
    srv_phb_name_filter_struct* name_filter;    /* name filter */
    srv_phb_qsearch_filter_struct* qsearch_filter;  /* quick search filter */
    srv_phb_group_filter_struct* group_filter;  /* group filter */
} srv_phb_filter_struct;


/* phonebook contact position struct */
typedef struct
{
    U16 index;                                  /* index: 1 - MAX index */
    U8 storage;                                 /* storage: SIM, PHONE, SIM2 */
} srv_phb_contact_pos_struct;


/* PHB ready event struct */
typedef struct
{
    MMI_EVT_PARAM_HEADER
    MMI_BOOL phb_ready;                         /* PHB ready or not */
    MMI_BOOL sim_refresh;                       /* SAT SIM refresh or not */
    U8 storage;                                 /* PHB storage is available only if SAT SIM refresh is TRUE */
} srv_phb_startup_evt_struct;


/* AT notify event struct */
typedef struct
{
    MMI_EVT_PARAM_HEADER
    srv_phb_at_op_type_enum op_type;
} srv_phb_at_notify_evt_struct;


/* Owner number changed event struct */
typedef struct
{
    MMI_EVT_PARAM_HEADER
    U8 sim_interface;                           /* SIM1/SIM2 */
    U16 index;                                  /* LINE1(0)/LINE2(1) */
} srv_phb_owner_number_changed_evt_struct;


typedef struct
{
    MMI_EVT_PARAM_HEADER
    srv_phb_group_op_type_enum op_type;
    U8 group_id;                                /* group_id */
    mmi_phb_group_info_struct* group_info;      /* group info */
} srv_phb_group_op_evt_struct;


typedef struct
{
    MMI_EVT_PARAM_HEADER
    U16 old_storage_mask;                        /* old prefer storage mask */
    U16 new_storage_mask;                        /* new prefer storage mask */
} srv_phb_storage_change_evt_struct;


typedef struct
{
    MMI_EVT_PARAM_HEADER
    U8 old_name_sequence;                        /* old name show sequence */
    U8 new_name_sequence;                        /* new name show sequence */
} srv_phb_name_sequence_change_evt_struct;


typedef struct
{
    MMI_EVT_PARAM_HEADER
    U16 success_count;                           /* success count */
    U16 total_count;                             /* total count */
} srv_phb_backup_restore_evt_struct;


typedef struct
{
    MMI_EVT_PARAM_HEADER
    U16 finish_count;                           /* finish count */
    U16 fail_count;                             /* fail count */
    U16 total_count;                            /* total count */
} srv_phb_multi_op_status_evt_struct;

typedef struct
{
    MMI_EVT_PARAM_HEADER
    U16 finish_count;                           /* finish count */
    U16 fail_count;                             /* fail count */
    U16 total_count;                            /* total count */
    U8 type;                                    /*srv_phb_op_cb_type_enum*/
} srv_phb_multi_op_done_evt_struct;

/* field type changed */
typedef struct
{
    MMI_EVT_PARAM_HEADER

    U32 field_type;
    U32 field_sub_type;
    MMI_BOOL is_delete;
    MMI_BOOL result;
} srv_phb_field_type_changed_ind_struct;

#ifdef __SRV_PHB_TCARD_STORAGE_SUPPORT__
typedef struct
{
    MMI_EVT_PARAM_HEADER
        
    MMI_BOOL is_ready;
} srv_phb_tcard_ready_evt_struct;
#endif

/****************************************************/
/*                                                  */
/*          Struct for vendor                       */
/*                                                  */
/****************************************************/


/* phonebook contact info struct for SDK */
typedef struct
{
    srv_phb_contact_pos_struct pos;                         /* contact position */
    U16 name[MMI_PHB_NAME_LENGTH + 1];                      /* contact name field(UCS2) */
    U16 number[MMI_PHB_NUMBER_PLUS_LENGTH + 1];             /* contact mobile number field(UCS2) */
#ifdef __MMI_PHB_OPTIONAL_FIELD__
    U16 home_number[MMI_PHB_NUMBER_PLUS_LENGTH + 1];        /* contact home number field(UCS2) */
    U16 office_number[MMI_PHB_NUMBER_PLUS_LENGTH + 1];      /* contact office number field(UCS2) */
    U16 fax_number[MMI_PHB_NUMBER_PLUS_LENGTH + 1];         /* contact fax number field(UCS2) */
    mmi_phb_wcs_num_struct opt_num[3];
    U16 email_address[MMI_PHB_EMAIL_LENGTH + 1];            /* contact email field(UCS2) */
#ifdef __MMI_PHB_OPTIONAL_FIELDS_2ND_EMAIL__
    U16 email_address2[MMI_PHB_EMAIL_LENGTH + 1];           /* contact email2 field(UCS2) */
#endif /* __MMI_PHB_OPTIONAL_FIELDS_2ND_EMAIL__ */
    U16 company_name[MMI_PHB_COMPANY_LENGTH + 1];           /* contact company name field(UCS2) */
#endif /* __MMI_PHB_OPTIONAL_FIELD__ */
#if defined(__MMI_PHB_BIRTHDAY_FIELD__)
    U8 birth_day;                                           /* contact birthday-day field */
    U8 birth_mon;                                           /* contact birthday-month field */
    U16 birth_year;                                         /* contact birthday-year field */
#endif	/* __MMI_PHB_BIRTHDAY_FIELD__ */
#if defined(__MMI_PHB_INFO_FIELD__)
    U16 title[MMI_PHB_TITLE_LENGTH + 1];                    /* contact title field(UCS2) */
    U16 url[MMI_PHB_URL_LENGTH + 1];                        /* contact url field(UCS2) */
    U16 adr_pobox[MMI_PHB_ADDRESS_LENGTH + 1];              /* contact address-pobox field(UCS2) */
    U16 adr_extension[MMI_PHB_ADDRESS_LENGTH + 1];          /* contact address-extention field(UCS2) */
    U16 adr_street[MMI_PHB_ADDRESS_LENGTH + 1];             /* contact address-street field(UCS2) */
    U16 adr_city[MMI_PHB_ADDRESS_LENGTH + 1];               /* contact address-city field(UCS2) */
    U16 adr_state[MMI_PHB_ADDRESS_LENGTH + 1];              /* contact address-state field(UCS2) */
    U16 adr_postal_code[MMI_PHB_ADDRESS_LENGTH + 1];        /* contact address-state field(UCS2) */
    U16 adr_country[MMI_PHB_ADDRESS_LENGTH + 1];            /* contact address-postal code field(UCS2) */
    U16 note[MMI_PHB_NOTE_LENGTH + 1];                      /* contact note field(UCS2) */
#endif /* __MMI_PHB_INFO_FIELD__ */
    U32 group_mask;                                         /* contact group field(bitmask) */
} srv_phb_sdk_contact_struct;


/* add contact req struct for SDK */
typedef struct {
    phb_storage_enum storage;                   /* storage */
    srv_phb_sdk_contact_struct* contact_ptr;    /* contact info point */
} srv_phb_sdk_add_req_struct;


/* update contact req struct for SDK */
typedef struct
{
    srv_phb_contact_pos_struct pos;             /* contact position */
    srv_phb_sdk_contact_struct* contact_ptr;    /* contact info point */
} srv_phb_sdk_update_req_struct;


/* delete contact req struct for SDK */
typedef struct
{
   srv_phb_contact_pos_struct pos;              /* contact position */
} srv_phb_sdk_delete_req_struct;


/* get contact req struct for SDK */
typedef struct
{
    srv_phb_contact_pos_struct pos;             /* contact position */
    srv_phb_sdk_contact_struct* contact_ptr;    /* contact info point */
} srv_phb_sdk_get_req_struct;


/* search contact req struct for SDK */
typedef struct
{
    U16  pattern_ucs2[SRV_PHB_SEARCH_LENGTH];   /* search pattern(UCS2) */
    srv_phb_search_type_enum search_type;       /* search type */
    srv_phb_sdk_contact_struct* contact_ptr;    /* contact info point */
} srv_phb_sdk_search_req_struct;


/****************************************************/
/*                                                  */
/*          OP_LIB CB                               */
/*                                                  */
/****************************************************/

/*****************************************************************************
 * <GROUP CallBackFunctions>
 *
 * FUNCTION
 *  srv_phb_async_func_type
 * DESCRIPTION
 *  Definition of callback for async event interface
 * PARAMETERS
 *  user_data:          [IN]        User data
 * RETURNS
 *  void
 *****************************************************************************/
typedef void (*srv_phb_async_func_type) (void *user_data);


/*****************************************************************************
 * <Query CallBackFunctions>
 *
 * FUNCTION
 *  srv_phb_query_async_func_type
 * DESCRIPTION
 *  Definition of callback for query callback interface
 * PARAMETERS
 *  user_data:          [IN]        User data
 * RETURNS
 *  void
 *****************************************************************************/


typedef struct
{
    S32 result;
    void *user_data;
} srv_phb_query_async_cb_result_struct;


typedef void (*srv_phb_query_async_func_type) (srv_phb_query_async_cb_result_struct *ret);

typedef void * ( *srv_phb_query_mem_alloc_func_type)(U32 len, void *user_data);

typedef void ( *srv_phb_query_mem_free_func_type)(void *ptr, void *user_data);

/*****************************************************************************
 * <GROUP CallBackFunctions>
 *
 * FUNCTION
 *  srv_phb_op_callback_type
 * DESCRIPTION
 *  callback function type for phb op
 * PARAMETERS
 *  result            :    [IN]     result
 *  id                :    [IN]     contact's store_index
 *  user_data:        :    [IN]     user data
 * RETURNS
 *  void
 *****************************************************************************/
typedef void (*srv_phb_op_callback_type)(S32 result, mmi_phb_contact_id id, void* user_data);


/*****************************************************************************
 * <GROUP CallBackFunctions>
 *
 * FUNCTION
 *  srv_phb_op_all_callback_type
 * DESCRIPTION
 *  callback function type for copy/move/delete all
 * PARAMETERS
 *  finish_count        :   [IN]    finish count
 *  total_count         :   [IN]    total count
 *  user_data           :   [IN]    user data
 * RETURNS
 *  void
 *****************************************************************************/
typedef void (*srv_phb_op_all_callback_type)(U16 finish_count, U16 total_count, void* user_data);


/*****************************************************************************
 * <GROUP CallBackFunctions>
 *
 * FUNCTION
 *  srv_phb_op_several_callback_type
 * DESCRIPTION
 *  callback function type for phb multi op
 * PARAMETERS
 *  entry_array         :   [IN]    store index array
 *  finish_count        :   [IN]    finish count
 *  total_count         :   [IN]    total count
 *  user_data           :   [IN]    user data
 * RETURNS
 *  void
 *****************************************************************************/
typedef void (*srv_phb_op_several_callback_type)(U16* entry_array, U16 finish_count, U16 total_count, void* user_data);


/****************************************************/
/*                                                  */
/*          CB for vendor                           */
/*                                                  */
/****************************************************/


/*****************************************************************************
 * <GROUP CallBackFunctions>
 *
 * FUNCTION
 *  srv_phb_sdk_callback_type
 * DESCRIPTION
 *  callback function type for SDK operation
 * PARAMETERS
 *  result              :   [IN]    result
 *  contact_ptr         :   [IN]    contact info point
 * RETURNS
 *  void
 *****************************************************************************/
typedef void (*srv_phb_sdk_callback_type)(S32 result, srv_phb_sdk_contact_struct* contact_ptr);


/***************************************************************************** 
 * Global Function 
 *****************************************************************************/


/****************************************************/
/*                                                  */
/*          API for vendor                          */
/*                                                  */
/****************************************************/


/*****************************************************************************
 * FUNCTION
 *  srv_phb_sdk_is_phb_ready
 * DESCRIPTION
 *  check phonebook is ready
 * PARAMETERS
 *  void
 * RETURNS
 *  MMI_BOOL
 * RETURN VALUES
 *  MMI_TRUE            :           phonebook ready
 *  MMI_FALSE           :           phonebook not ready
 *****************************************************************************/
extern MMI_BOOL srv_phb_sdk_is_phb_ready(void);


/*****************************************************************************
 * FUNCTION
 *  mmi_phb_sdk_add_contact
 * DESCRIPTION
 *  add contact API for SDK
 * PARAMETERS
 *  req_info            :   [IN]    add contact req_info
 *  cb                  :   [IN]    callback function
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_sdk_add_contact(srv_phb_sdk_add_req_struct* req_info, srv_phb_sdk_callback_type cb);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_sdk_update_contact
 * DESCRIPTION
 *  update contact API for SDK
 * PARAMETERS
 *  req_info            :   [IN]    update contact req_info
 *  cb                  :   [IN]    callback function
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_sdk_update_contact(srv_phb_sdk_update_req_struct* req_info, srv_phb_sdk_callback_type cb);


/*****************************************************************************
 * FUNCTION
 *  mmi_phb_sdk_delete_contact
 * DESCRIPTION
 *  delete contact API for SDK
 * PARAMETERS
 *  req_info            :   [IN]    delete contact req_info
 *  cb                  :   [IN]    callback function
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_sdk_delete_contact(srv_phb_sdk_delete_req_struct* req_info, srv_phb_sdk_callback_type cb);


/*****************************************************************************
 * FUNCTION
 *  mmi_phb_sdk_get_contact 
 * DESCRIPTION
 *  get contact API for SDK
 * PARAMETERS
 *  req_info            :   [IN]    get contact req_info
 * RETURNS
 *  result
 *****************************************************************************/
extern S32 srv_phb_sdk_get_contact(srv_phb_sdk_get_req_struct* req_info);


/*****************************************************************************
 * FUNCTION
 *  mmi_phb_sdk_search_contact 
 * DESCRIPTION
 *  search contact API for SDK
 * PARAMETERS
 *  req_info            :   [IN]    search contact req_info
 * RETURNS
 *  result
 *****************************************************************************/
extern S32 srv_phb_sdk_search_contact(srv_phb_sdk_search_req_struct* req_info);


/*****************************************************************************
 * FUNCTION
 *  mmi_phb_sdk_get_total_contacts   
 * DESCRIPTION
 *  get total contacts of phonebook
 * PARAMETERS
 *  storage             :   [IN]    storage
 * RETURNS
 *  S32
 * RETURN VALUES
 *  < 0                 :           error result
 *  >0                  :           total contacts count
 *****************************************************************************/
extern S32 srv_phb_sdk_get_total_contacts(phb_storage_enum storage);


/*****************************************************************************
 * FUNCTION
 *  mmi_phb_sdk_get_used_contacts   
 * DESCRIPTION
 *  store data to phonebook
 * PARAMETERS
 *  pos_array           :   [OUT]   used contact position array ordered by name, no need set it as NULL
 *  storage             :   [IN]    storage
 * RETURNS
 *  S32
 * RETURN VALUES
 *  < 0                 :           error result
 *  >0                  :           used contacts count
 *****************************************************************************/
extern S32 srv_phb_sdk_get_used_contacts(srv_phb_contact_pos_struct* pos_array, phb_storage_enum storage);


/****************************************************/
/*                                                  */
/*      Internal API, for PB AP only                */
/*                                                  */
/****************************************************/

/*****************************************************************************
 * FUNCTION
 *  srv_phb_mem_malloc_ext
 * DESCRIPTION
 *  memory malloc function
 * PARAMETERS
 *  size                :   [IN]    buffer size to malloc
 *  type                :   [IN]    memory type
 *  file                :   [IN]    file
 *  line                :   [IN]    line
 * RETURNS
 *  void*
 * RETURN VALUES
 *  NULL                :           malloc fail
 *  other               :           buffer point
 *****************************************************************************/
extern void* srv_phb_mem_malloc_ext(S32 size, srv_phb_memory_type_enum type, const char* file, int line);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_mem_free_ext
 * DESCRIPTION
 *  memory free function
 * PARAMETERS
 *  memblock            :   [IN]    buffer point
 *  file                :   [IN]    file
 *  line                :   [IN]    line
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_mem_free_ext(void* memblock, const char* file, int line);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_oplib_build_contact_list
 * DESCRIPTION
 *  build contact store_index array by filter
 * PARAMETERS
 *  filter              :   [IN]    build list filter
 *  entry_array         :   [OUT]   output store_index array
 *  max_count           :   [IN]    max count of store_index array
 * RETURNS
 *  S32
 * RETURN VALUES
 *  >=0                 :           matched contact's count
 *  <0                  :           refer phb error result
 *****************************************************************************/
extern S32 srv_phb_oplib_build_contact_list(srv_phb_filter_struct* filter, U16* entry_array, U32 max_count);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_oplib_build_alpha_jump_table
 * DESCRIPTION
 *  build alpha jump table
 * PARAMETERS
 *  entry_array         :   [IN]    list contact's store_index array
 *  entry_count         :   [IN]    list contact's count
 * RETURNS
 *  void
 *****************************************************************************/
extern S32 srv_phb_oplib_build_alpha_jump_table(U16* entry_array, U16 entry_count);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_oplib_get_alpha_index
 * DESCRIPTION
 *  get alpha jump index
 * PARAMETERS
 *  input_char          :   [IN]    input char
 * RETURNS
 *  U16
 * RETURN VALUES
 *  index               :           jump index
 *****************************************************************************/
extern U16 srv_phb_oplib_get_alpha_index(U16 input_char);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_oplib_search
 * DESCRIPTION
 *  search a contact by name or number
 * PARAMETERS
 *  pattern_ucs2        :   [IN]    search patern
 *  search_type         :   [IN]    search type, refer srv_phb_search_type_enum
 * RETURNS
 *  S32
 * RETURN VALUES
 *  >=0                 :           matched contact's store_index
 *  <0                  :           refer phb error result
 *****************************************************************************/
extern S32 srv_phb_oplib_search(U16* pattern_ucs2, srv_phb_search_type_enum search_type);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_oplib_get_contact_info
 * DESCRIPTION
 *  get contact's info by store_index
 * PARAMETERS
 *  store_index         :   [IN]    contact's store_index
 *  contact_info        :   [OUT]   contact's info
 * RETURNS
 *  S32
 * RETURN VALUES
 *  SRV_PHB_NO_ERROR    :           get contact info success
 *  Others              :           refer phb error result
 *****************************************************************************/
extern S32 srv_phb_oplib_get_contact_info(U16 store_index, srv_phb_contact_info_struct* contact_info);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_oplib_add_contact
 * DESCRIPTION
 *  add a phonebook contact
 * PARAMETERS
 *  storage             :   [IN]    storage to add, refer phb_storage_enum
 *  record_index        :   [IN]    record index to add, start at 1
 *  contact_info        :   [IN]    contact's info
 *  cb                  :   [IN]    call back function
 *  user_data           :   [IN]    user data
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_oplib_add_contact(U8 storage, U16 record_index, srv_phb_contact_info_struct* contact_info, srv_phb_op_callback_type cb, void* user_data);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_oplib_update_contact
 * DESCRIPTION
 *  edit a phonebook contact
 * PARAMETERS
 *  store_index         :   [IN]    contact's store_index
 *  contact_info        :   [IN]    contact's info
 *  cb                  :   [IN]    call back function
 *  user_data           :   [IN]    user data
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_oplib_update_contact(U16 store_index, srv_phb_contact_info_struct* contact_info, srv_phb_op_callback_type cb, void* user_data);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_oplib_delete_contact
 * DESCRIPTION
 *  delete a phonebook contact
 * PARAMETERS
 *  store_index         :   [IN]    contact's store_index
 *  cb                  :   [IN]    call back function
 *  user_data           :   [IN]    user data
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_oplib_delete_contact(U16 store_index, srv_phb_op_callback_type cb, void* user_data);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_oplib_copy_contact
 * DESCRIPTION
 *  copy a phonebook contact
 * PARAMETERS
 *  dst_storage         :   [IN]    dest storage
 *  store_index         :   [IN]    source contact's store_index
 *  cb                  :   [IN]    call back function
 *  user_data           :   [IN]    user data
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_oplib_copy_contact(U8 dst_storage, U16 store_index, srv_phb_op_callback_type cb, void* user_data);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_oplib_move_contact
 * DESCRIPTION
 *  move a phonebook contact
 * PARAMETERS
 *  dst_storage         :   [IN]    dest storage
 *  store_index         :   [IN]    source contact's store_index
 *  cb                  :   [IN]    call back function
 *  user_data           :   [IN]    user data
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_oplib_move_contact(U8 dst_storage, U16 store_index, srv_phb_op_callback_type cb, void* user_data);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_oplib_delete_all_contact
 * DESCRIPTION
 *  delete all contacst of a storage
 * PARAMETERS
 *  storage             :   [IN]    storage
 *  cb                  :   [IN]    call back function
 *  user_data           :   [IN]    user data
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_oplib_delete_all_contact(U8 storage, srv_phb_op_all_callback_type cb, void* user_data);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_oplib_build_contact_list
 * DESCRIPTION
 *  build contact store_index array by filter
 * PARAMETERS
 *  filter              :   [IN]    build list filter
 *  entry_array         :   [OUT]   output store_index array
 * RETURNS
 *  S32
 * RETURN VALUES
 *  >=0                 :           matched contact's count
 *  <0                  :           refer phb error result
 *****************************************************************************/
extern void srv_phb_oplib_cancel_multi_op(void);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_oplib_copy_all_contact
 * DESCRIPTION
 *  copy all contacst of a storage
 * PARAMETERS
 *  src_storage         :   [IN]    source storage
 *  dst_storage         :   [IN]    dest storage
 *  cb                  :   [IN]    call back function
 *  user_data           :   [IN]    user data
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_oplib_copy_all_contact(U8 src_storage, U8 dst_storage, srv_phb_op_all_callback_type cb, void* user_data);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_oplib_move_all_contact
 * DESCRIPTION
 *  move all contacst of a storage
 * PARAMETERS
 *  src_storage         :   [IN]    source storage
 *  dst_storage         :   [IN]    dest storage
 *  cb                  :   [IN]    call back function
 *  user_data           :   [IN]    user data
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_oplib_move_all_contact(U8 src_storage, U8 dst_storage, srv_phb_op_all_callback_type cb, void* user_data);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_oplib_delete_several_contact
 * DESCRIPTION
 *  delete several contacts to a storage
 * PARAMETERS
 *  entry_array         :   [IN]    source store_index array
 *  entry_count         :   [IN]    source store_index count
 *  cb                  :   [IN]    call back function
 *  user_data           :   [IN]    user data
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_oplib_delete_several_contact(U16* entry_array, U16 entry_count, srv_phb_op_several_callback_type cb, void* user_data);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_oplib_copy_several_contact
 * DESCRIPTION
 *  copy several contacts to a storage
 * PARAMETERS
 *  entry_array         :   [IN]    source store_index array
 *  entry_count         :   [IN]    source store_index count
 *  dst_storage         :   [IN]    dest storage
 *  cb                  :   [IN]    call back function
 *  user_data           :   [IN]    user data
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_oplib_copy_several_contact(U16* entry_array, U16 entry_count, U8 dst_storage, srv_phb_op_several_callback_type cb, void* user_data);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_oplib_move_several_contact
 * DESCRIPTION
 *  move several contacts to a storage
 * PARAMETERS
 *  entry_array         :   [IN]    source store_index array
 *  entry_count         :   [IN]    source store_index count
 *  dst_storage         :   [IN]    dest storage
 *  cb                  :   [IN]    call back function
 *  user_data           :   [IN]    user data
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_oplib_move_several_contact(U16* entry_array, U16 entry_count, U8 dst_storage, srv_phb_op_several_callback_type cb, void* user_data);

typedef void (*srv_phb_group_callback_type)(S32 result, void* user_data);

/* group info interface struct */
typedef struct
{
    U16 group_name[MMI_PHB_GROUP_NAME_LENGTH + 1];
    U16 res_type;
    U16 image_id;
    U16 image_path[SRV_FMGR_PATH_MAX_LEN + 1];
    U16 ringtone_id;
    U16 ringtone_path[SRV_FMGR_PATH_MAX_LEN + 1];
    #ifdef __MMI_PHB_CALLER_VIDEO__
    U16 video_id;
    U16 video_path[SRV_FMGR_PATH_MAX_LEN + 1];
    #endif
    phb_storage_enum storage;
    srv_phb_group_callback_type cb;
    void *user_data;
} srv_phb_group_info_struct;

/*****************************************************************************
 * FUNCTION
 *  srv_phb_datamgr_get_group_list
 * DESCRIPTION
 *  get group id list ordered by group name
 * PARAMETERS
 *  group_array         :   [OUT]   group id array
 *  group_name          :   [IN]    group name
 * RETURNS
 *  U8
 * RETURN VALUES
 *  count               :           group count
 ****************************************************************************/
extern U8 srv_phb_datamgr_get_group_list(U8* group_array, U16* group_name);

#if defined(__MMI_VIDEO_TELEPHONY__)
/*****************************************************************************
 * FUNCTION
 *  srv_phb_set_vt_call
 * DESCRIPTION
 *  
 * PARAMETERS
 * 
 * RETURNS
 *  
 *****************************************************************************/
extern void srv_phb_set_vt_call(mmi_phb_contact_id id, MMI_BOOL is_vt);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_is_vt_call
 * DESCRIPTION
 *  
 * PARAMETERS
 * 
 * RETURNS
 *  
 *****************************************************************************/
extern MMI_BOOL srv_phb_is_vt_call(mmi_phb_contact_id id);
#endif /* defined(__MMI_VIDEO_TELEPHONY__) */


#define IN_PHBSTARTUPSRV_C

/*****************************************************************************
 * FUNCTION
 *  srv_phb_startup_is_phb_ready
 * DESCRIPTION
 *  This function is used to query if phonebook is ready or not.
 * PARAMETERS
 *  void
 * RETURN VALUES
 *  MMI_TRUE:           PHB ready
 *  MMI_FALSE:          PHB not ready
 *****************************************************************************/
MMI_BOOL srv_phb_startup_is_phb_ready(void);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_startup_is_phb_support
 * DESCRIPTION
 *  This function is used to query if phonebook is support or not.
 * PARAMETERS
 *  sim_interface:      [IN]        SIM1/SIM2
 *  phb_type:           [IN]        PHB_ECC/PHB_FDN/PHB_BDN/PHB_MSISDN/PHB_SDN/PHB_PHONEBOOK
 * RETURN VALUES
 *  MMI_TRUE:           PHB support
 *  MMI_FALSE:          PHB not support
 *****************************************************************************/
MMI_BOOL srv_phb_startup_is_phb_support(U8 sim_interface, U8 phb_type);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_startup_get_alpha_length
 * DESCRIPTION
 *  This function is used to get phonebook alpha length.
 * PARAMETERS
 *  sim_interface:      [IN]        SIM1/SIM2
 *  phb_type:           [IN]        PHB_FDN/PHB_BDN/PHB_MSISDN/PHB_PHONEBOOK
 * RETURNS
 *  PHB alpha length
 *****************************************************************************/
U8 srv_phb_startup_get_alpha_length(U8 sim_interface, U8 phb_type);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_startup_get_fdn_total
 * DESCRIPTION
 *  This function is used to get FDN total records.
 * PARAMETERS
 *  sim_interface:      [IN]        SIM1/SIM2
 * RETURNS
 *  FDN total No.
 *****************************************************************************/
U16 srv_phb_startup_get_fdn_total(U8 sim_interface);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_startup_get_bdn_total
 * DESCRIPTION
 *  This function is used to get BDN total records.
 * PARAMETERS
 *  sim_interface:      [IN]        SIM1/SIM2
 * RETURNS
 *  BDN total No.
 *****************************************************************************/
U16 srv_phb_startup_get_bdn_total(U8 sim_interface);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_startup_get_msisdn_total
 * DESCRIPTION
 *  This function is used to get MSISDN total records.
 * PARAMETERS
 *  sim_interface:      [IN]        SIM1/SIM2
 * RETURNS
 *  MSISDN total No.
 *****************************************************************************/
U16 srv_phb_startup_get_msisdn_total(U8 sim_interface);

/*****************************************************************************
 * FUNCTION
 *  srv_phb_startup_sat_hdlr
 * DESCRIPTION
 *  This function is used to process Phonebook scenario when SIM refresh happens.
 * PARAMETERS
 *  sim_interface:      [IN]        SIM1/SIM2
 * RETURNS
 *  void
 *****************************************************************************/
void srv_phb_startup_sat_hdlr(U8 sim_interface);

#ifdef __SRV_PHB_TCARD_STORAGE_SUPPORT__
/*****************************************************************************
 * FUNCTION
 *  srv_phb_tcard_is_ready
 * DESCRIPTION
 *  is tcard ready or not
 * PARAMETERS
 *  void        
 * RETURNS
 *  void
 *****************************************************************************/
MMI_BOOL srv_phb_tcard_is_ready(void);
#endif

#define IN_PHBXMGNTSRV_C

/* phb extra# MAX entires count */
#define SRV_PHB_XMGNT_SIM_ENTRIES               20

/* phb extra# MAX owner number entires count */
#define SRV_PHB_XMGNT_OWNER_NUMBERS             4

/* phb extra# MAX sos entires count */
#define SRV_PHB_XMGNT_SOS_ENTRIES               5

#ifdef __MMI_DIALER_SEARCH__

/* ds home number index */
#define MMI_PHB_DS_HOMENUMBER                   0

/* ds office number index */
#define MMI_PHB_DS_OFFICENUMBER                 1

/* ds fax number index */
#define MMI_PHB_DS_FAXNUMBER                    2

#endif /* __MMI_DIALER_SEARCH__ */

/* phb extra# result enum */
typedef enum
{
    SRV_PHB_XMGNT_RESULT_OK,                    /* Successful */
    SRV_PHB_XMGNT_RESULT_FAIL,                  /* Failed */
    SRV_PHB_XMGNT_RESULT_EF_FULL                /* EFext# full */
} srv_phb_xmgnt_result_enum;

/* phb extra# handle */
typedef void*   SRV_PHB_XMGNT_HANDLE;

/* phb extra# name struct */
typedef struct
{
    U8 name_length;                             /* Name Length */
    U8 name_dcs;                                /* Name Data Coding Scheme */
    U16 name[MMI_PHB_NAME_LENGTH + 1];          /* UCS2 name field */
} srv_phb_xmgnt_name_struct;

/* phb extra# number struct */
typedef struct
{
    U8 type;                                    /* Number type */
    U8 length;                                  /* Number length */
    U16 number[MMI_PHB_NUMBER_PLUS_LENGTH + 1]; /* UCS2 number field */
} srv_phb_xmgnt_number_struct;

/* phb extra# entry struct */
typedef struct
{
    U8 storage;                                 /* Phb storage */
    U8 type;                                    /* Phb type */
    U16 index;                                  /* Phb entry index */
    U16 record_index;                           /* Phb record index */
    srv_phb_xmgnt_number_struct tel;            /* extra# number field */
    srv_phb_xmgnt_name_struct alpha_id;         /* extra# name field */
} srv_phb_xmgnt_entry_struct;


/*****************************************************************************
 * <GROUP CallBackFunctions>
 *
 * FUNCTION
 *  srv_phb_xmgnt_callback_type
 * DESCRIPTION
 *  Definition of callback for extra# management (get sim list)
 * PARAMETERS
 *  result:             [IN]        result code
 * RETURNS
 *  void
 *****************************************************************************/
typedef void (*srv_phb_xmgnt_callback_type) (U16 result);


/*****************************************************************************
 * <GROUP CallBackFunctions>
 *
 * FUNCTION
 *  srv_phb_xmgnt_callback_type_ex
 * DESCRIPTION
 *  Definition of callback for extra# management (get sim entry)
 * PARAMETERS
 *  result:             [IN]        result code
 *  sim_entry:          [IN]        extra# entry
 * RETURNS
 *  void
 *****************************************************************************/
typedef void (*srv_phb_xmgnt_callback_type_ex) (U16 result, l4c_phb_entry_struct *sim_entry);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_xmgnt_get_list_count
 * DESCRIPTION
 *  This function is used to get extra# list count.
 * PARAMETERS
 *  handle:             [IN]        extra# handle
 * RETURNS
 *  extra# list count
 *****************************************************************************/
extern U16 srv_phb_xmgnt_get_list_count(SRV_PHB_XMGNT_HANDLE handle);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_xmgnt_get_entry_index
 * DESCRIPTION
 *  This function is used to get entry index by hilight index.
 * PARAMETERS
 *  handle:             [IN]        extra# handle
 *  index:              [IN]        hilight index
 * RETURNS
 *  entry index
 *****************************************************************************/
extern U16 srv_phb_xmgnt_get_entry_index(SRV_PHB_XMGNT_HANDLE handle, U16 index);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_xmgnt_get_entry_name
 * DESCRIPTION
 *  This function is used to get extra# name by hilight index.
 * PARAMETERS
 *  handle:             [IN]        extra# handle
 *  index:              [IN]        hilight index
 * RETURNS
 *  extra# name
 *****************************************************************************/
extern U16 *srv_phb_xmgnt_get_entry_name(SRV_PHB_XMGNT_HANDLE handle, U16 index);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_xmgnt_get_entry_number
 * DESCRIPTION
 *  This function is used to get extra# number by hilight index.
 * PARAMETERS
 *  handle:             [IN]        extra# handle
 *  index:              [IN]        hilight index
 * RETURNS
 *  extra# number
 *****************************************************************************/
extern U16 *srv_phb_xmgnt_get_entry_number(SRV_PHB_XMGNT_HANDLE handle, U16 index);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_xmgnt_get_entry_number_length
 * DESCRIPTION
 *  This function is used to get extra# number length by hilight index.
 * PARAMETERS
 *  handle:             [IN]        extra# handle
 *  index:              [IN]        hilight index
 * RETURNS
 *  extra# number length
 *****************************************************************************/
extern U8 srv_phb_xmgnt_get_entry_number_length(SRV_PHB_XMGNT_HANDLE handle, U16 index);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_xmgnt_get_list
 * DESCRIPTION
 *  This function is used to get extra# list.
 * PARAMETERS
 *  sim_interface:      [IN]        SIM1/SIM2
 *  phb_type:           [IN]        PHB_ECC/PHB_FDN/PHB_BDN/PHB_MSISDN/PHB_SDN
 *  list_cb:            [IN]        Get extra# list callback
 * RETURNS
 *  extra# handle
 *****************************************************************************/
extern SRV_PHB_XMGNT_HANDLE srv_phb_xmgnt_get_list(
                                U8 sim_interface,
                                U8 phb_type,
                                srv_phb_xmgnt_callback_type list_cb);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_xmgnt_get_entry
 * DESCRIPTION
 *  This function is used to get extra# entry by entry index.
 * PARAMETERS
 *  sim_interface:      [IN]        SIM1/SIM2
 *  phb_type:           [IN]        PHB_ECC/PHB_FDN/PHB_BDN/PHB_MSISDN/PHB_SDN
 *  record_index:       [IN]        PHB record index
 *  entry_cb:           [IN]        Get extra# entry callback
 * RETURN VALUES
 *  MMI_TRUE:           This request is accepted.
 *  MMI_FALSE:          This request is rejected.
 *****************************************************************************/
extern MMI_BOOL srv_phb_xmgnt_get_entry(
                    U8 sim_interface,
                    U8 phb_type,
                    U16 record_index,
                    srv_phb_xmgnt_callback_type_ex entry_cb);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_xmgnt_set_entry
 * DESCRIPTION
 *  This function is used to add/edit extra# entry.
 * PARAMETERS
 *  sim_interface:      [IN]        SIM1/SIM2
 *  phb_type:           [IN]        PHB_ECC/PHB_FDN/PHB_BDN/PHB_MSISDN/PHB_SDN
 *  index:              [IN]        PHB entry index
 *  record_index:       [IN]        PHB record index
 *  name:               [IN]        extra# name
 *  number:             [IN]        extra# number
 *  set_cb:             [IN]        Add/Edit extra# entry callback
 * RETURN VALUES
 *  MMI_TRUE:           This request is accepted.
 *  MMI_FALSE:          This request is rejected.
 *****************************************************************************/
extern MMI_BOOL srv_phb_xmgnt_set_entry(
                    U8 sim_interface,
                    U8 phb_type,
                    U16 index,
                    U16 record_index,
                    U16 *name,
                    U16 *number,
                    srv_phb_xmgnt_callback_type set_cb);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_xmgnt_delete_entry
 * DESCRIPTION
 *  This function is used to delete extra# entry.
 * PARAMETERS
 *  sim_interface:      [IN]        SIM1/SIM2
 *  phb_type:           [IN]        PHB_ECC/PHB_FDN/PHB_BDN/PHB_MSISDN/PHB_SDN
 *  index:              [IN]        PHB entry index
 *  record_index:       [IN]        PHB record index
 *  del_cb:             [IN]        Delete extra# entry callback
 * RETURN VALUES
 *  MMI_TRUE:           This request is accepted.
 *  MMI_FALSE:          This request is rejected.
 *****************************************************************************/
extern MMI_BOOL srv_phb_xmgnt_delete_entry(
                    U8 sim_interface,
                    U8 phb_type,
                    U16 index,
                    U16 record_index,
                    srv_phb_xmgnt_callback_type del_cb);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_xmgnt_query_dial_mode
 * DESCRIPTION
 *  This function is used to query FDN/BDN dial mode.
 * PARAMETERS
 *  sim_interface:      [IN]        SIM1/SIM2
 *  phb_type:           [IN]        PHB_FDN/PHB_BDN
 * RETURNS
 *  FDN/BDN dial mode (0: off, 1: on, 0xFF: query failed)
 *****************************************************************************/
extern U8 srv_phb_xmgnt_query_dial_mode(U8 sim_interface, U8 phb_type);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_xmgnt_toggle_dial_mode
 * DESCRIPTION
 *  This function is used to toggle FDN/BDN dial mode.
 * PARAMETERS
 *  sim_interface:      [IN]        SIM1/SIM2
 *  phb_type:           [IN]        PHB_FDN/PHB_BDN
 *  toggle_cb:          [IN]        Toggle FDN/BDN dial mode callback
 * RETURN VALUES
 *  MMI_TRUE:           This request is accepted.
 *  MMI_FALSE:          This request is rejected.
 *****************************************************************************/
extern MMI_BOOL srv_phb_xmgnt_toggle_dial_mode(
                    U8 sim_interface,
                    U8 phb_type,
                    srv_phb_xmgnt_callback_type toggle_cb);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_xmgnt_search_fdn_by_number
 * DESCRIPTION
 *  This function is used to search FDN name (SIM1 or SIM2) by number.
 * PARAMETERS
 *  sim_interface:      [IN]        SIM1/SIM2
 *  number:             [IN]        Number to dial
 *  name:               [OUT]       Name to match the number
 * RETURNS
 *  PHB entry index
 *****************************************************************************/
extern U16 srv_phb_xmgnt_search_fdn_by_number(U8 sim_interface, U16 *number, U16 *name);

/*****************************************************************************
 * FUNCTION
 *  srv_phb_xmgnt_approve_fdn
 * DESCRIPTION
 *  This is phb_approve function of PHB fdn
 * PARAMETERS
 *  tel_number                   [IN]  BCD number to approve 
 *  num_length                  [IN]  BCD
 *  sim_id                         [IN]   sim id please refer to mmi_sim_enum
 * RETURNS
 *  MMI_BOOL
 *****************************************************************************/
extern MMI_BOOL srv_phb_xmgnt_approve_fdn(
                    kal_uint8 *tel_number,
                    kal_uint8 num_length,
                    kal_uint8 sim_id,
                    l4c_operation_type_enum l4c_op,
                    kal_uint16 *cause);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_owner_number_parse_msisdn_info
 * DESCRIPTION
 *  This function is used to parse MSISDN information.
 * PARAMETERS
 *  sim_interface:      [IN]        SIM1/SIM2
 *  no_msisdn:          [IN]        No. of MSISDN
 *  msisdn:             [IN]        MSISDN data
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_owner_number_parse_msisdn_info(U8 sim_interface, U8 no_msisdn, l4csmu_addr_struct *msisdn);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_owner_number_set_name_number
 * DESCRIPTION
 *  This function is used to set MSISDN name & number by index.
 * PARAMETERS
 *  sim_interface:      [IN]        SIM1/SIM2
 *  index:              [IN]        LINE1(0)/LINE2(1)
 *  name:               [IN]        MSISDN name
 *  number:             [IN]        MSISDN number
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_owner_number_set_name_number(U8 sim_interface, U16 index, U16 *name, U16 *number);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_owner_number_get_name
 * DESCRIPTION
 *  This function is used to get MSISDN name by index.
 * PARAMETERS
 *  sim_interface:      [IN]        SIM1/SIM2
 *  index:              [IN]        LINE1(0)/LINE2(1)
 * RETURNS
 *  MSISDN name
 *****************************************************************************/
extern U16 *srv_phb_owner_number_get_name(U8 sim_interface, U16 index);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_owner_number_get_number
 * DESCRIPTION
 *  This function is used to get MSISDN number by index.
 * PARAMETERS
 *  sim_interface:      [IN]        SIM1/SIM2
 *  index:              [IN]        LINE1(0)/LINE2(1)
 * RETURNS
 *  MSISDN number
 *****************************************************************************/
extern U16 *srv_phb_owner_number_get_number(U8 sim_interface, U16 index);


#define IN_PHBSRV_C

/* PHB storage status enum */
typedef enum
{
    SRV_PHB_STORAGE_STATUS_EMPTY,               /* storage is empty */
    SRV_PHB_STORAGE_STATUS_FULL,                /* storage is full */
    SRV_PHB_STORAGE_STATUS_OTHERS               /* others status */
} srv_phb_storage_status_enum;


/* SyncML action type enmu */
typedef enum
{
    SRV_PHB_VCARD_READ,                         /* read action */
    SRV_PHB_VCARD_ADD,                          /* write action */
    SRV_PHB_VCARD_UPDATE,                       /* update action */
    SRV_PHB_VCARD_DELETE                        /* delete action */
} srv_phb_sync_vcard_enum;


/* SyncML error result enmu */
typedef enum
{
    SRV_PHB_SYNC_SUCCESS,                       /* sync success */
    SRV_PHB_SYNC_ERROR,                         /* sync fail */
    SRV_PHB_SYNC_NOT_SUPPORT,                   /* not support */
    SRV_PHB_SYNC_INVALID_PARAM,                 /* invalid parameter */
    SRV_PHB_SYNC_NOT_READY,                     /* phonebook not ready */
    SRV_PHB_SYNC_STORAGE_FULL,                  /* storage full */
    SRV_PHB_SYNC_NOT_FOUND                      /* not found */
} srv_phb_sync_error_enum;


/* cm number struct */
typedef struct
{
    U16 *number;                                /* number to search(UCS2) */
    MMI_BOOL is_mo_call;                        /* is mo call */
    MMI_BOOL is_voip_call;                      /* is voip call */
    U8 sim_interface;                           /* SIM interface */
    U8 call_type;                               /* refer ecc_call_type_enum */
    void *user_data;                            /* user data */
} srv_phb_cm_number_struct;


/* caller info struct */
typedef struct
{
    U16 name[MMI_PHB_NAME_LENGTH + 1];          /* caller name(UCS2) */
    SRV_PHB_ID phb_id;
    mmi_phb_num_type_enum number_type;          /* number type */
    U16 ringtone_id;                            /* caller ringtone id */
    U16 image_id;                               /* caller image id */
    U16 video_id;                               /* caller video id */
    U16 res_type;
} srv_phb_caller_info_struct;


/* caller res id struct */
typedef struct
{
    U32  call_type;                              /* call type */
    U16 image_id;                               /* image id */
    U16 video_id;                               /* video id */
    U16 ringtone_id;
    U16 res_type;
} srv_phb_caller_res_id_struct;


/* caller res info struct */
typedef struct
{
    U16 pic_id;                                 /* image id */
    U16 pic_path[SRV_FMGR_PATH_MAX_LEN + 1];    /* image path */
#ifdef __MMI_PHB_CALLER_VIDEO__
    U16 video_id;                               /* video id */
    U16 video_path[SRV_FMGR_PATH_MAX_LEN + 1];  /* video path */
#endif
    U16 ringtone_id;
    U16 ringtone_path[SRV_FMGR_PATH_MAX_LEN + 1];
    U16 res_type;                               /* res type */
} srv_phb_caller_res_info_struct;


#ifdef __MMI_DIALER_SEARCH__

/* ds find entry phonebook record struct */
typedef struct
{
    U16 store_index;                            /* phb store index */
    union
    {
        U8 first;
        U8 num_index;
    } u;                                        /* if name match, first match location; if number match, number type */
    U8 count;                                   /* if name match, the count = 1; if number match, show count of number type */
    U8 mask[(MMI_PHB_NAME_LENGTH + 7) / 8];     /* match location of every name match, for underline */
} srv_phb_ds_phb_entry_struct;


typedef struct
{
    srv_phb_ds_phb_entry_struct entry[MMI_PHB_ENTRIES];
    SRV_CLOG_ID calllog_id[SRV_CLOG_LOG_MAX_NUM];
    U16 key_len;
    U16 name_count;                             /* the count of phb name matched */
    U16 number_count;                           /* the count of phb number matched */
    U16 callog_count;
} srv_phb_ds_list_cntx_struct;


typedef struct
{
    WCHAR* key_word;                            /* input key word */
    U8 * key_int;
    U8 * key_bcd;
    U16 key_len;
} srv_phb_ds_input_struct;

#endif /* __MMI_DIALER_SEARCH__ */


/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_storage
 * DESCRIPTION
 *  This function is used to get PHB storage by store index. If store index is not in a valid range,
 *  it will return 0xFF.
 * PARAMETERS
 *  id:        [IN]        Store index
 * RETURN VALUES
 *  PHB_STORAGE_NVRAM:      Phone storage
 *  PHB_STORAGE_SIM:        SIM storage
 *  PHB_STORAGE_SIM2:       SIM2 storage
 *****************************************************************************/
extern U8 srv_phb_get_storage(mmi_phb_contact_id id);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_check_store_index_in_storage
 * DESCRIPTION
 *  This function is used to check if store index is in the range of the specified storage.
 * PARAMETERS
 *  store_index:        [IN]        Store index
 *  storage:            [IN]        PHB storage
 * RETURN VALUES
 *  MMI_TRUE:           In range
 *  MMI_FALSE:          Out of range
 *****************************************************************************/
extern MMI_BOOL srv_phb_check_store_index_in_storage(U16 store_index, U8 storage);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_check_storage_status
 * DESCRIPTION
 *  This function is used to check the status of the specified storage.
 * PARAMETERS
 *  storage:            [IN]        PHB storage
 * RETURN VALUES
 *  SRV_PHB_STORAGE_STATUS_EMPTY:   Storage is empty
 *  SRV_PHB_STORAGE_STATUS_FULL:    Storage is full
 *  SRV_PHB_STORAGE_STATUS_OTHERS:  Others status
 *****************************************************************************/
extern U8 srv_phb_check_storage_status(U8 storage);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_check_storage_accessible
 * DESCRIPTION
 *  This function is used to check if the specified storage is accessible.
 * PARAMETERS
 *  storage:            [IN]        PHB storage
 * RETURN VALUES
 *  MMI_TRUE:           Storage is accessible
 *  MMI_FALSE:          Don't allow to access it
 *****************************************************************************/
extern MMI_BOOL srv_phb_check_storage_accessible(U8 storage);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_total_contact
 * DESCRIPTION
 *  This function is used to get PHB total records by PHB storage.
 * PARAMETERS
 *  storage:            [IN]        PHB storage
 * RETURNS
 *  PHB total No.
 *****************************************************************************/
extern U16 srv_phb_get_total_contact(U8 storage);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_used_contact
 * DESCRIPTION
 *  This function is used to get PHB used records by PHB storage.
 * PARAMETERS
 *  storage:            [IN]        PHB storage
 * RETURNS
 *  PHB used No.
 *****************************************************************************/
extern U16 srv_phb_get_used_contact(U8 storage);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_store_index_to_sort_index
 * DESCRIPTION
 *  This function is used to convert store index to sort index.
 * PARAMETERS
 *  storage:            [IN]        PHB storage
 *  store_index:        [IN]        Store index
 * RETURNS
 *  Sort index
 *****************************************************************************/
extern U16 srv_phb_store_index_to_sort_index(U8 storage, U16 store_index);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_sort_index_to_store_index
 * DESCRIPTION
 *  This function is used to convert sort index to store index.
 * PARAMETERS
 *  storage:            [IN]        PHB storage
 *  sort_index:         [IN]        Sort index
 * RETURNS
 *  Store index
 *****************************************************************************/
mmi_phb_contact_id srv_phb_sort_index_to_store_index(U8 storage, U16 sort_index);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_store_index_to_record_index
 * DESCRIPTION
 *  This function is used to convert store index to record index.
 * PARAMETERS
 *  id:        [IN]        Store index
 *  storage:            [OUT]       PHB storage
 *  record_index:       [OUT]       Record index
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_store_index_to_record_index(mmi_phb_contact_id id, U8 *storage, U16 *record_index);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_record_index_to_store_index
 * DESCRIPTION
 *  This function is used to convert record index to store index.
 * PARAMETERS
 *  storage:            [IN]        PHB storage
 *  id:       [IN]        Record index
 *  store_index:        [OUT]       Store index
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_record_index_to_store_index(U8 storage, U16 record_index, mmi_phb_contact_id *id);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_check_entry_exist
 * DESCRIPTION
 *  This function is used to check if PHB entry exists in PHB conatcts or not.
 * PARAMETERS
 *  id:        [IN]        Store index
 * RETURN VALUES
 *  MMI_TRUE:           Entry exist
 *  MMI_FALSE:          Doesn't exist
 *****************************************************************************/
extern MMI_BOOL srv_phb_check_entry_exist(mmi_phb_contact_id id);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_check_number_exist
 * DESCRIPTION
 *  This function is used to check if the given number exists in PHB list or not.
 * PARAMETERS
 *  number:             [IN]        Number to check
 * RETURN VALUES
 *  MMI_TRUE:           Number exist
 *  MMI_FALSE:          Doesn't exist
 *****************************************************************************/
extern MMI_BOOL srv_phb_check_number_exist(U16 *number);


#ifdef __SYNCML_SUPPORT__

/*****************************************************************************
 * FUNCTION
 *  srv_phb_sync_get_index_array
 * DESCRIPTION
 *  This function is used to get PHB store index array.
 * PARAMETERS
 *  index_array:            [IN/OUT]    Store index array
 *  max_index_count:        [IN]        Index array size
 * RETURNS
 *  No. of contacts in Phone storage
 *****************************************************************************/
extern U16 srv_phb_sync_get_index_array(U16 *index_array, U16 max_index_count);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_sync_vcard
 * DESCRIPTION
 *  This function is used to sync data from/to PHB to/from SyncML server.
 * PARAMETERS
 *  action:                 [IN]        SyncML action type
 *  file_path:              [IN]        vCard file path
 *  store_index:            [IN]        Store index
 *  charset:                [IN]        Default charset to parse vCard
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_sync_vcard(U8 action, U16 *file_path, U16 store_index, U8 charset);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_sync_get_record_size
 * DESCRIPTION
 *  This function is used to get PHB record size which SyncML can support.
 * PARAMETERS
 *  void
 * RETURNS
 *  PHB record size
 *****************************************************************************/
extern U16 srv_phb_sync_get_record_size(void);

#endif /* __SYNCML_SUPPORT__ */


#if defined(__MMI_IMPS__) && defined(IMPS_WV13_ENHANCEMENT)
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif /* defined(__MMI_IMPS__) && defined(IMPS_WV13_ENHANCEMENT) */


#if defined(__MMI_VCARD__)

/*****************************************************************************
 * FUNCTION
 *  srv_phb_pbap_build_vcard
 * DESCRIPTION
 *  This function is used to build vCard for PBAP.
 * PARAMETERS
 *  file_path:          [IN]        vCard file path
 *  store_index:        [IN]        Store index
 *  is_append:          [IN]        write file from tail or not
 *  vcard_format:       [IN]        vcard version
 * RETURNS
 *  S32                             write result
 *****************************************************************************/
extern S32 srv_phb_build_vcard(U16 *file_path, U16 store_index, MMI_BOOL is_append, U8 vcard_format);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_pbap_build_vcard
 * DESCRIPTION
 *  This function is used to build vCard for PBAP.
 * PARAMETERS
 *  file_path:          [IN]        vCard file path
 *  store_index:        [IN]        Store index
 *  is_append:          [IN]        write file from tail or not
 *  vcard_format:       [IN]        vcard version
 * RETURNS
 *  S32                             write result
 *****************************************************************************/
extern S32 srv_contact_build_vcard(U16 *file_path, U16 store_index, MMI_BOOL is_append, U8 vcard_format);

#endif /* defined(__MMI_VCARD__) */


/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_name_by_number
 * DESCRIPTION
 *  This function is used to get PHB name by the given number. It will call SSE API to search
 *  the number.
 *  If the search ok, but name is empty, or if the search fails, we will fill in name[out] with '\0'.
 * PARAMETERS
 *  number:             [IN]        Number to search
 *  name:               [OUT]       Name to store the search result
 *  len:                [IN]        Name length
 * RETURN VALUES
 *  MMI_TRUE:           Number found
 *  MMI_FALSE:          Number not found
 *****************************************************************************/
extern MMI_BOOL srv_phb_get_name_by_number(U16 *number, U16 *name, U16 len);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_store_index_by_number
 * DESCRIPTION
 *  This function is used to get store index by the given number. It will call SSE API to search
 *  the number. Then you can use store index to get PHB name.
 * PARAMETERS
 *  number:             [IN]        Number to search
 *  store_index:        [OUT]       Store index to store the search result
 * RETURN VALUES
 *  MMI_TRUE:           Number found
 *  MMI_FALSE:          Number not found
 *****************************************************************************/
extern MMI_BOOL srv_phb_get_store_index_by_number(U16 *number, U16 *store_index);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_set_invalid_number_id
 * DESCRIPTION
 *  This function is used to set number id as invalid value
 * PARAMETERS
 *  phb_id:             [IN]        phb number id to set
 * RETURNS
 *  Number id
 *****************************************************************************/
extern void srv_phb_set_invalid_number_id(SRV_PHB_ID* phb_id);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_check_number_id
 * DESCRIPTION
 *  This function is used to check a number's id is valid
 * PARAMETERS
 *  phb_id:             [IN]        phb number id to check
 * RETURNS
 *  MMI_TRUE:           valid
 *  MMI_FALSE:          invalid
 *****************************************************************************/
extern MMI_BOOL srv_phb_check_number_id(SRV_PHB_ID phb_id);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_create_number_id
 * DESCRIPTION
 *  This function is used to create a number's id
 * PARAMETERS
 *  storage_type:       [IN]        PHB_FDN or PHB_PHONEBOOK, refer phb_type_enum
 *  store_index:        [IN]        contact store_index
 *  number_index:       [IN]        SRV_PHB_ENTRY_FIELD_NUMBER or SRV_PHB_ENTRY_FIELD_OPT_NUM_1 or
 *                                  SRV_PHB_ENTRY_FIELD_OPT_NUM_2 SRV_PHB_ENTRY_FIELD_OPT_NUM_3
 * RETURNS
 *  Number id
 *****************************************************************************/
extern SRV_PHB_ID srv_phb_create_number_id(U8 storage_type, U16 store_index, U8 number_index);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_name_by_number_id
 * DESCRIPTION
 *  This function is used to get contact's store_index by number id
 * PARAMETERS
 *  number_id:          [IN]        number id
 * RETURNS
 *  store_index
 *****************************************************************************/
extern U16 srv_phb_get_store_index_by_number_id(SRV_PHB_ID number_id);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_name_by_number_id
 * DESCRIPTION
 *  This function is used to get contact's name by number id
 * PARAMETERS
 *  name:               [OUT]       name data
 *  number_id:          [IN]        number id
 *  max_len:            [IN]        max Name length
 * RETURN VALUES
 *  MMI_TRUE:           Got name
 *  MMI_FALSE:          Didn't get it
 *****************************************************************************/
extern MMI_BOOL srv_phb_get_name_by_number_id(U16 *name, SRV_PHB_ID number_id, U16 max_len);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_number_by_number_id
 * DESCRIPTION
 *  This function is used to get contact's number by number id
 * PARAMETERS
 *  number:             [OUT]       number data
 *  number_id:          [IN]        number id
 *  max_len:            [IN]        max number length
 * RETURN VALUES
 *  MMI_TRUE:           Got number
 *  MMI_FALSE:          Didn't get it
 *****************************************************************************/
extern MMI_BOOL srv_phb_get_number_by_number_id(U16 *number, SRV_PHB_ID number_id, U16 max_len);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_create_cm_user_data_ex
 * DESCRIPTION
 *  This function is used to create cm user data before making call.
 * PARAMETERS
 *  name:               [IN]        Caller name
 *  number:             [IN]        Caller number
 * RETURNS
 *  App user data
 *****************************************************************************/
extern void *srv_phb_create_cm_user_data_ex(U16 *name, U16 *number);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_create_cm_user_data
 * DESCRIPTION
 *  This function is used to create cm user data before making call.
 *  App must set name or store index to this data so that PHB will search the right name.
 *  App must keep this pointer until call disconnected.
 * PARAMETERS
 *  name:               [IN]        Caller name
 *  number_index:       [IN]        Caller number index
 *  store_index:        [IN]        Caller store index
 * RETURNS
 *  App user data
 *****************************************************************************/
extern void *srv_phb_create_cm_user_data(U16 *name, U32 number_index, U16 store_index);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_create_cm_user_data_by_sub_id
 * DESCRIPTION
 *  This function is used to create cm user data before making call.
 *  App must set name or store index to this data so that PHB will search the right name.
 *  App must keep this pointer until call disconnected.
 * PARAMETERS
 *  name:               [IN]        Caller name
 *  number_sub_id:      [IN]        Caller number index
 *  store_index:        [IN]        Caller store index
 * RETURNS
 *  App user data
 *****************************************************************************/
extern void *srv_phb_create_cm_user_data_by_sub_id(U16 *name, U32 number_sub_id, U16 store_index);

/*****************************************************************************
 * FUNCTION
 *  srv_phb_create_cm_user_data_by_id
 * DESCRIPTION
 *  This function is used to create cm user data before making call.
 *  App must set phb id to this data so that PHB will search the right name.
 *  App must keep this pointer until call disconnected.
 * PARAMETERS
 *  phb_id:             [IN]        phb id
 * RETURNS
 *  App user data
 *****************************************************************************/
extern void *srv_phb_create_cm_user_data_by_id(SRV_PHB_ID phb_id);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_hold_cm_user_data
 * DESCRIPTION
 *  This function is used to hold on cm user data.
 * PARAMETERS
 *  user_data:          [IN]        App user data
 * RETURN VALUES
 *  MMI_TRUE:           Hold on
 *  MMI_FALSE:          Fails
 *****************************************************************************/
extern MMI_BOOL srv_phb_hold_cm_user_data(void *user_data);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_destory_cm_user_data
 * DESCRIPTION
 *  This function is used to destroy cm user data after call disconnected.
 * PARAMETERS
 *  user_data:          [IN]        App user data
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_destory_cm_user_data(void *user_data);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_caller_info_by_number
 * DESCRIPTION
 *  This function is used to get caller info by number. As general, it is called by CM
 *  to show in-call screen with PHB name.
 * PARAMETERS
 *  cm_param:           [IN]        Number input by CM
 *  phb_info:           [OUT]       Caller info output by PHB
 * RETURN VALUES
 *  MMI_TRUE:           Number found
 *  MMI_FALSE:          Number not found
 *****************************************************************************/
extern MMI_BOOL srv_phb_get_caller_info_by_number(
                    srv_phb_cm_number_struct *cm_param,
                    srv_phb_caller_info_struct *phb_info);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_caller_res_info_by_id
 * DESCRIPTION
 *  This function is used to get caller res info by id. As general, it is called by CM
 *  to show in-call screen with image or video from PHB.
 * PARAMETERS
 *  res_id:             [IN]        Caller res id input by CM
 *  res_info:           [OUT]       Caller res info output by PHB
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_get_caller_res_info_by_id(
                srv_phb_caller_res_id_struct *res_id,
                srv_phb_caller_res_info_struct *res_info);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_field
 * DESCRIPTION
 *  This function is used to get PHB field by store index.
 * PARAMETERS
 *  store_index:        [IN]        Store index
 *  field:              [OUT]       PHB field
 * RETURN VALUES
 *  MMI_TRUE:           Got field
 *  MMI_FALSE:          Didn't get it
 *****************************************************************************/
extern MMI_BOOL srv_phb_get_field(U16 store_index, U32 *field);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_name
 * DESCRIPTION
 *  This function is used to get PHB name by store index.
 * PARAMETERS
 *  store_index:        [IN]        Store index
 *  name:               [OUT]       PHB name
 *  len:                [IN]        Name length
 * RETURN VALUES
 *  MMI_TRUE:           Got name
 *  MMI_FALSE:          Didn't get it
 *****************************************************************************/
extern MMI_BOOL srv_phb_get_name(U16 store_index, U16 *name, U16 len);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_number
 * DESCRIPTION
 *  This function is used to get PHB mobile number by store index.
 * PARAMETERS
 *  store_index:        [IN]        Store index
 *  number:             [OUT]       PHB mobile number
 *  len:                [IN]        Mobile number length
 * RETURN VALUES
 *  MMI_TRUE:           Got number
 *  MMI_FALSE:          Didn't get it
 *****************************************************************************/
extern MMI_BOOL srv_phb_get_number(U16 store_index, U16 *number, U16 len);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_number_ex
 * DESCRIPTION
 *  This function is used to get PHB mobile number by store index.
 * PARAMETERS
 *  store_index:        [IN]        Store index
 *  number:             [OUT]       PHB mobile number
 *  len:                [IN]        Mobile number length
 * RETURN VALUES
 *  MMI_TRUE:           Got number
 *  MMI_FALSE:          Didn't get it
 *****************************************************************************/
MMI_BOOL srv_phb_get_number_ex(U16 store_index, U8 num_index, WCHAR *number, U8* type, U16 len);


#if defined(__MMI_PHB_BIRTHDAY_FIELD__)

/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_birthday
 * DESCRIPTION
 *  This function is used to get PHB birthday by store index.
 * PARAMETERS
 *  store_index:        [IN]        Store index
 *  year:               [OUT]       Birthday year
 *  month:              [OUT]       Birthday month
 *  day:                [OUT]       Birthday day 
 * RETURN VALUES
 *  MMI_TRUE:           Got birthday
 *  MMI_FALSE:          Didn't get it
 *****************************************************************************/
extern MMI_BOOL srv_phb_get_birthday(U16 store_index, U16 *year, U8 *month, U8 *day);

#endif /* defined(__MMI_PHB_BIRTHDAY_FIELD__) */


#ifdef __MMI_PHB_OPTIONAL_FIELD__

/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_optional_number
 * DESCRIPTION
 *  This function is used to get PHB home number by store index.
 * PARAMETERS
 *  store_index:        [IN]        Store index
 *  field_flag:         [IN]        option number field flag
 *  number:             [OUT]       number data
 *  type:               [OUT]       number type
 *  len:                [IN]        max number length
 * RETURN VALUES
 *  MMI_TRUE:           Got home number
 *  MMI_FALSE:          Didn't get it
 *****************************************************************************/
extern MMI_BOOL srv_phb_get_optional_number(U16 store_index, U32 field_flag, WCHAR* number, mmi_phb_num_type_enum *type, U16 len);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_optional_number_order
 * DESCRIPTION
 *  This function is used to get number order by store index.
 * PARAMETERS
 *  store_index:        [IN]        Store index
 *  number_order:       [OUT]       Number order
 * RETURN VALUES
 *  MMI_TRUE:           Got home number
 *  MMI_FALSE:          Didn't get it
 *****************************************************************************/
extern MMI_BOOL srv_phb_get_optional_number_order(U16 store_index, U8* number_order);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_email_address
 * DESCRIPTION
 *  This function is used to get PHB email address by store index.
 * PARAMETERS
 *  store_index:        [IN]        Store index
 *  email:              [OUT]       PHB email address
 *  len:                [IN]        Email address length
 * RETURN VALUES
 *  MMI_TRUE:           Got email address
 *  MMI_FALSE:          Didn't get it
 *****************************************************************************/
extern MMI_BOOL srv_phb_get_email_address(U16 store_index, U16 *email, U16 len);


#ifdef __MMI_PHB_OPTIONAL_FIELDS_2ND_EMAIL__

/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_email_address2
 * DESCRIPTION
 *  This function is used to get PHB email address2 by store index.
 * PARAMETERS
 *  store_index:        [IN]        Store index
 *  email:              [OUT]       PHB email address2
 *  len:                [IN]        Email address2 length
 * RETURN VALUES
 *  MMI_TRUE:           Got email address2
 *  MMI_FALSE:          Didn't get it
 *****************************************************************************/
extern MMI_BOOL srv_phb_get_email_address2(U16 store_index, U16 *email, U16 len);

#endif /* __MMI_PHB_OPTIONAL_FIELDS_2ND_EMAIL__ */

#endif /* __MMI_PHB_OPTIONAL_FIELD__ */


#if defined(__MMI_PHB_INFO_FIELD__)

/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_url
 * DESCRIPTION
 *  This function is used to get URL number by store index.
 * PARAMETERS
 *  store_index:        [IN]        Store index
 *  url:                [OUT]       PHB URL number
 *  len:                [IN]        URL number length
 * RETURN VALUES
 *  MMI_TRUE:           Got URL number
 *  MMI_FALSE:          Didn't get it
 *****************************************************************************/
extern MMI_BOOL srv_phb_get_url(U16 store_index, U16 *url, U16 len);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_address
 * DESCRIPTION
 *  This function is used to get PHB address.
 * PARAMETERS
 *  store_index:        [IN]        Store index
 *  pobox:              [OUT]       PHB pobox
 *  extension:          [OUT]       PHB extension
 *  street:             [OUT]       PHB street
 *  city:               [OUT]       PHB city
 *  state:              [OUT]       PHB state
 *  postalcode:         [OUT]       PHB postalcode
 *  country:            [OUT]       PHB country
 * RETURN VALUES
 *  MMI_TRUE:           Success
 *  MMI_FALSE:          Didn't get it
 *****************************************************************************/
extern MMI_BOOL srv_phb_get_address(
                    U16 store_index,
                    U16 *pobox,
                    U16 *extension,
                    U16 *street,
                    U16 *city,
                    U16 *state,
                    U16 *postalcode,
                    U16 *country);

#endif /* defined(__MMI_PHB_INFO_FIELD__) */


/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_image
 * DESCRIPTION
 *  This function is used to get PHB image id & path by store index.
 * PARAMETERS
 *  store_index:        [IN]        Store index
 *  image_id:           [OUT]       PHB image id
 *  image_path:         [OUT]       PHB image path
 *  res_type:           [OUT]       PHB image resource type
 * RETURN VALUES
 *  MMI_TRUE:           Got image id
 *  MMI_FALSE:          Didn't get it
 *****************************************************************************/
extern MMI_BOOL srv_phb_get_image(U16 store_index, U16* image_id, U16 *image_path, U16* res_type);


#if defined(__MMI_PHB_CALLER_VIDEO__)

/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_video
 * DESCRIPTION
 *  This function is used to get PHB video id & path by store index.
 * PARAMETERS
 *  store_index:        [IN]        Store index
 *  video_id:           [OUT]       PHB video id
 *  video_path:         [OUT]       PHB video path
 *  res_type:           [OUT]       PHB video resource type
 * RETURN VALUES
 *  MMI_TRUE:           Got video id
 *  MMI_FALSE:          Didn't get it
 *****************************************************************************/
extern MMI_BOOL srv_phb_get_video(U16 store_index, U16 *video_id, U16* video_path, U16* res_type);
#endif /* defined(__MMI_PHB_CALLER_VIDEO__) */


#ifdef __MMI_PHB_DEFAULT_NUMBER__

/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_default_number_id
 * DESCRIPTION
 *  This function is used to get PHB default number id by store index.
 * PARAMETERS
 *  store_index:        [IN]        Store index
 *  id:                 [OUT]       PHB default number id
 * RETURN VALUES
 *  MMI_TRUE:           Got default number id
 *  MMI_FALSE:          Didn't get it
 *****************************************************************************/
extern MMI_BOOL srv_phb_get_default_number_id(U16 store_index, U8 *id);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_default_number
 * DESCRIPTION
 *  This function is used to get PHB default number by store index.
 * PARAMETERS
 *  store_index:        [IN]        Store index
 *  number:             [OUT]       PHB default number
 *  type:               [OUT]       Number type
 *  len:                [IN]        Default number length
 * RETURN VALUES
 *  MMI_TRUE:           Got default number
 *  MMI_FALSE:          Didn't get it
 *****************************************************************************/
extern MMI_BOOL srv_phb_get_default_number(U16 store_index, WCHAR *number, mmi_phb_num_type_enum *type, U16 len);

#endif /* __MMI_PHB_DEFAULT_NUMBER__ */


#if defined(__MMI_IMPS__)
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif /* defined(__MMI_IMPS__) */


#if defined(__MMI_VOIP__)

/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_voip_number
 * DESCRIPTION
 *  This function is used to get VOIP number by store index.
 * PARAMETERS
 *  store_index:        [IN]        Store index
 *  voip:               [OUT]       PHB VOIP number
 *  len:                [IN]        VOIP number length
 * RETURN VALUES
 *  MMI_TRUE:           Got VOIP number
 *  MMI_FALSE:          Didn't get it
 *****************************************************************************/
extern MMI_BOOL srv_phb_get_voip_number(U16 store_index, U16 *voip, U16 len);

#endif /* defined(__MMI_VOIP__) */


#ifdef __MMI_PHB_CALLER_GROUP__
/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_group_name
 * DESCRIPTION
 *  This function is used to get group name by group index.
 * PARAMETERS
 *  group_id:           [IN]        group index
 *  group_name:         [OUT]       group name
 *  len:                [IN]        group name length
 * RETURN VALUES
 *  MMI_TRUE:           Got group name
 *  MMI_FALSE:          Didn't get it
 *****************************************************************************/
extern MMI_BOOL srv_phb_get_group_name(U8 group_id, U16 *group_name, U16 len);
#endif /* __MMI_PHB_CALLER_GROUP__ */


/*****************************************************************************
 * FUNCTION
 *  srv_phb_truncate_name
 * DESCRIPTION
 *  This function is used to truncate PHB name by storage.
 * PARAMETERS
 *  name:               [IN/OUT]    Name to truncate
 *  storage:            [IN]        PHB storage
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_truncate_name(U16 *name, U8 storage);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_truncate_name_ex
 * DESCRIPTION
 *  This function is used to truncate PHB name by storage.
 * PARAMETERS
 *  name:               [IN/OUT]    Name to truncate
 *  sim_interface:      [IN]        SIM1/SIM2
 *  phb_type:           [IN]        PHB_ECC/PHB_FDN/PHB_BDN/PHB_MSISDN/PHB_SDN/PHB_PHONEBOOK
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_truncate_name_ex(U16 *name, U8 sim_interface, U8 phb_type);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_truncate_number
 * DESCRIPTION
 *  This function is used to truncate PHB number.
 * PARAMETERS
 *  number:             [IN/OUT]    Number to truncate
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_truncate_number(U16 *number);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_compare_number
 * DESCRIPTION
 *  This function is used to compare two PHB numbers.
 * PARAMETERS
 *  number1:            [IN]        First number
 *  number2:            [IN]        Second number
 * RETURN VALUES
 *  MMI_TRUE:           Equal
 *  MMI_FALSE:          Not equal
 *****************************************************************************/
extern MMI_BOOL srv_phb_compare_number(U16 *number1, U16 *number2);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_read_compare_length
 * DESCRIPTION
 *  This function is used to read compare length from NVRAM.
 * PARAMETERS
 *  void
 * RETURNS
 *  U8
 *****************************************************************************/
extern U8 srv_phb_read_compare_length(void);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_convert_number_to_int
 * DESCRIPTION
 *  Converts the last n characters of a phone number to interger.
 * PARAMETERS
 *  number:             [IN]        Input number
 * RETURNS
 *  interger of input number
 *****************************************************************************/
extern U32 srv_phb_convert_number_to_int(U16 *number);


#ifndef __MTK_TARGET__
#define SRV_PHB_INVALID_INT64_NUMBER        0x4000000000000000I64
#else
#define SRV_PHB_INVALID_INT64_NUMBER        0x4000000000000000LL
#endif


/*****************************************************************************
 * FUNCTION
 *  srv_phb_convert_number_to_int64
 * DESCRIPTION
 *  Converts the last n characters of a phone number to interger 64.
 * PARAMETERS
 *  number:             [IN]        Input number
 * RETURNS
 *  interger of input number
 *****************************************************************************/
extern __int64 srv_phb_convert_number_to_int64(U16 *number);


#define IN_PHBUTILSRV_C
/*****************************************************************************
 * FUNCTION
 *  srv_phb_towupper
 * DESCRIPTION
 *  This function is used to convert lowercase letter to uppercase letter.
 * PARAMETERS
 *  wc:                 [IN]        Wide character
 * RETURNS
 *  Wild character
 *****************************************************************************/
extern U16 srv_phb_towupper(U16 wc);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_compare_wchar
 * DESCRIPTION
 *  This function is used to compare two wild characters.
 * PARAMETERS
 *  char1:              [IN]        First character
 *  char2:              [IN]        Second character
 * RETURNS
 *  >0:                 First is greater than second
 *  =0:                 First is identical to second
 *  <0:                 First is less than second
 *****************************************************************************/
extern S32 srv_phb_compare_wchar(U16 char1, U16 char2);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_compare_ucs2_string
 * DESCRIPTION
 *  This function is used to compare two ucs2 strings.
 * PARAMETERS
 *  string1:            [IN]        First string
 *  string2:            [IN]        Second string
 * RETURNS
 *  >0:                 First is greater than second
 *  =0:                 First is identical to second
 *  <0:                 First is less than second
 *****************************************************************************/
extern S32 srv_phb_compare_ucs2_string(U16 *string1, U16 *string2);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_compare_pinyin_string
 * DESCRIPTION
 *  This function is used to compare two pinyin strings.
 * PARAMETERS
 *  string1:            [IN]        First string
 *  string2:            [IN]        Second string
 * RETURNS
 *  >0:                 First is greater than second
 *  =0:                 First is identical to second
 *  <0:                 First is less than second
 *****************************************************************************/
extern S32 srv_phb_compare_pinyin_string(U16 *string1, U16 *string2);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_gsm_extended_count
 * DESCRIPTION
 *  This function is used to calculate GSM extended characters' count.
 * PARAMETERS
 *  buffer:             [IN]        Input buffer
 *  max_buffer_len:     [IN]        Max length of buffer
 * RETURNS
 *  GSM extended characters' count
 *****************************************************************************/
extern U32 srv_phb_gsm_extended_count(U16 *buffer, U32 max_buffer_len);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_check_ucs2_character
 * DESCRIPTION
 *  This function is used to check if UCS2 character (such as Chinese) exists or not.
 * PARAMETERS
 *  buffer:             [IN]        Input buffer
 * RETURN VALUES
 *  MMI_TRUE:           Include a UCS2 character
 *  MMI_FALSE:          Didn't include it
 *****************************************************************************/
extern MMI_BOOL srv_phb_check_ucs2_character(U16 *buffer);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_check_international_number
 * DESCRIPTION
 *  This function is used to check if it is an international number or not.
 * PARAMETERS
 *  type:               [IN]        TON
 * RETURNS
 *  MMI_TRUE:           International number
 *  MMI_FALSE:          Others number
 *****************************************************************************/
extern MMI_BOOL srv_phb_check_international_number(U8 type);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_check_valid_number
 * DESCRIPTION
 *  This function is used to check if it is a valid number or not.
 * PARAMETERS
 *  number:             [IN]        Number to check
 * RETURN VALUES
 *  MMI_TRUE:           Valid number
 *  MMI_FALSE:          Invalid number
 *****************************************************************************/
extern MMI_BOOL srv_phb_check_valid_number(U16 *number);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_check_valid_number_ex
 * DESCRIPTION
 *  This function is used to check if it is a valid number or not.
 * PARAMETERS
 *  number:             [IN]        Number to check
 *  is_sim:             [IN]        Number comes from SIM or not
 * RETURN VALUES
 *  MMI_TRUE:           Valid number
 *  MMI_FALSE:          Invalid number
 *****************************************************************************/
extern MMI_BOOL srv_phb_check_valid_number_ex(U16 *number, MMI_BOOL is_sim);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_check_valid_url
 * DESCRIPTION
 *  This function is used to check if it is a valid URL or not.
 * PARAMETERS
 *  url:                [IN]        URL to check
 * RETURN VALUES
 *  MMI_TRUE:           Valid URL
 *  MMI_FALSE:          Invalid URL
 *****************************************************************************/
extern MMI_BOOL srv_phb_check_valid_url(U16 *url);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_convert_to_bcd
 * DESCRIPTION
 *  This function is used to convert ASCII string to BCD.
 * PARAMETERS
 *  dest:               [OUT]       BCD encoding string
 *  source:             [IN]        ASCII encoding string
 *  max_dest_len:       [IN]        Max length of dest buffer
 * RETURNS
 *  No. of bytes converted
 *****************************************************************************/
extern U32 srv_phb_convert_to_bcd(U8 *dest, U8 *source, U32 max_dest_len);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_convert_to_digit
 * DESCRIPTION
 *  This function is used to convert BCD string to ASCII. (0x0D will be converted to '?')
 * PARAMETERS
 *  dest:               [OUT]       ASCII encoding string
 *  source:             [IN]        BCD encoding string
 *  max_dest_len:       [IN]        Max length of dest buffer
 * RETURNS
 *  No. of bytes converted
 *****************************************************************************/
extern U32 srv_phb_convert_to_digit(U8 *dest, U8 *source, U32 max_dest_len);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_convert_to_digit_ex
 * DESCRIPTION
 *  This function is used to convert BCD string to ASCII. (0x0D will be converted to '?'
 *  if is_sim MMI_TRUE, otherwise it will be 'w')
 *  It will be removed when MMI callog revise.
 * PARAMETERS
 *  dest:               [OUT]       ASCII encoding string
 *  source:             [IN]        BCD encoding string
 *  max_dest_len:       [IN]        Max length of dest buffer
 *  is_sim:             [IN]        Number comes from SIM or not
 * RETURNS
 *  No. of bytes converted
 *****************************************************************************/
extern U32 srv_phb_convert_to_digit_ex(U8 *dest, U8 *source, U32 max_dest_len, MMI_BOOL is_sim);


#if defined(__PHB_0x81_SUPPORT__)

/*****************************************************************************
 * FUNCTION
 *  srv_phb_convert_to_0x81
 * DESCRIPTION
 *  This function is used to convert UCS2 string (such as PHB name) to 0x81 encoding.
 *  We will copy the convert result to input buffer when is_convert is assigned as MMI_TRUE.
 * PARAMETERS
 *  name:               [IN/OUT]    PHB name
 *  is_convert:         [IN]        Copy the convert result or not
 * RETURNS
 *  No. of bytes converted
 *****************************************************************************/
extern U32 srv_phb_convert_to_0x81(U16 *name, MMI_BOOL is_convert);

#endif /* defined(__PHB_0x81_SUPPORT__) */


/*****************************************************************************
 * FUNCTION
 *  srv_phb_convert_to_name
 * DESCRIPTION
 *  This function is used to compine PHB first and last name.
 * PARAMETERS
 *  name:               [OUT]       PHB name
 *  f_name:             [IN]        First name
 *  l_name:             [IN]        Last name
 *  max_name_len:       [IN]        Max length of PHB name
 * RETURNS
 *  No. of characters converted
 *****************************************************************************/
extern void srv_phb_convert_to_name(U16 *name, U16 *f_name, U16 *l_name, U32 max_name_len);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_convert_to_spelling
 * DESCRIPTION
 *  This function is used to convert to spelling. (ex. Chinese '' can be converted to 'Y', 'i').
 * PARAMETERS
 *  input_mode:         [IN]        Input method mode
 *  input_char:         [IN]        Input character
 *  output_char:        [OUT]       Output characters
 *  out_len:            [IN]        Output buffer length
 * RETURNS
 *  No. of characters converted
 *****************************************************************************/
extern U16 srv_phb_convert_to_spelling(U16 input_mode, U16 input_char, U16 *output_char, U16 out_len);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_convert_to_pinyin
 * DESCRIPTION
 *  This function is used to convert to pinyin. (ex. Chinese '' can be converted to 'Y', 'i', 'G', 'e').
 * PARAMETERS
 *  input_string:       [IN]        Input strings
 *  output_string:      [OUT]       Output strings
 *  out_len:            [IN]        Output buffer length
 * RETURNS
 *  No. of characters converted
 *****************************************************************************/
extern U16 srv_phb_convert_to_pinyin(U16 *input_string, U16 *output_string, U16 out_len);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_convert_to_initial
 * DESCRIPTION
 *  This function is used to convert to initial. (ex. Chinese '' can be converted to 'Y', 'G').
 * PARAMETERS
 *  input_string:       [IN]        Input strings
 *  output_string:      [OUT]       Output strings
 *  out_len:            [IN]        Output buffer length
 * RETURNS
 *  No. of characters converted
 *****************************************************************************/
extern void srv_phb_convert_to_initial(U16 *input_string, U16 *output_string, U16 out_len);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_remove_invalid_name
 * DESCRIPTION
 *  This function is used to remove invalid characters.
 * PARAMETERS
 *  name:               [IN/OUT]    PHB name
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_remove_invalid_name(U16 *name);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_remove_invalid_number_ex
 * DESCRIPTION
 *  This function is used to remove invalid characters.
 * PARAMETERS
 *  number:             [IN/OUT]    PHB number
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_remove_invalid_number_ex(U16 *number);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_remove_invalid_number
 * DESCRIPTION
 *  This function is used to remove invalid characters.
 * PARAMETERS
 *  number:             [IN/OUT]    PHB number
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_remove_invalid_number(U16 *number);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_number_asc_to_wcs
 * DESCRIPTION
 *  This function is used to convert PHB number from ascii to wcs.
 * PARAMETERS
 *  dest:               [OUT]       Desitination number
 *  src:                [IN]        Source number
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_number_asc_to_wcs(mmi_phb_wcs_num_struct* dest, mmi_phb_asc_num_struct* src);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_number_wcs_to_asc
 * DESCRIPTION
 *  This function is used to convert PHB number from wcs to ascii.
 * PARAMETERS
 *  dest:               [OUT]       Desitination number
 *  src:                [IN]        Source number
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_number_wcs_to_asc(mmi_phb_asc_num_struct* dest, mmi_phb_wcs_num_struct* src);


#ifdef __MMI_DIALER_SEARCH__
#if defined(__MMI_PHB_OPTIONAL_FIELD__) && defined(__MMI_PHB_DS_SEARCH_OP_NUMBER__)
/*****************************************************************************
 * FUNCTION
 *  srv_phb_ds_compare_halfbyte
 * DESCRIPTION
 *  compare two strings according to ds compare algorithm
 * PARAMETERS
 *  a:                  [IN]        one ds number
 *  b:                  [IN]        another ds number
 *  length:             [IN]        compare length
 * RETURNS
 *  s32                 0 for equal and another value for non-equal
 *****************************************************************************/
extern S32 srv_phb_ds_compare_halfbyte(void *a, void *b, U32 length);

#endif /* defined(__MMI_PHB_OPTIONAL_FIELD__) && defined(__MMI_PHB_DS_SEARCH_OP_NUMBER__) */


/*****************************************************************************
 * FUNCTION
 *  srv_phb_ds_search_entry
 * DESCRIPTION
 *  search phonebook & call log entry by key word
 * PARAMETERS
 *  key_word:           [IN]        key word
 *  output:             [OUT]       search result
 * RETURNS
 *  S32
 *****************************************************************************/
extern S32 srv_phb_ds_search_entry(WCHAR* key_word, srv_phb_ds_list_cntx_struct* output);
#endif /* __MMI_DIALER_SEARCH__ */

#include "PhbSrvIprot.h"


#define PHB_NEW_FTO_SRV

#define MMI_PHB_INVALID_CONTACT_ID      0xFFFF
#define MMI_PHB_INVALID_GROUP_ID        0xFF
#define MMI_PHB_SUB_ID_NEW              0xFFFF

#define SRV_PHB_QUERY_PATTERN_LEN       ((MMI_PHB_NAME_LENGTH > MMI_PHB_NUMBER_PLUS_LENGTH) ? MMI_PHB_NAME_LENGTH : MMI_PHB_NUMBER_PLUS_LENGTH)

/***************************************************************************** 
 * Typedef 
 *****************************************************************************/
typedef void* srv_phb_handle;
typedef void* srv_phb_query_handle;


typedef void* srv_phb_field_filter;
typedef void* srv_phb_contact_filter;
typedef void* srv_phb_contact;
typedef U32 srv_phb_iterator;

#define SRV_PHB_STORAGE_MASK_PHONE       (1 << PHB_STORAGE_NVRAM)
#define SRV_PHB_STORAGE_MASK_SIM         (1 << PHB_STORAGE_SIM)
#define SRV_PHB_STORAGE_MASK_SIM2        (1 << PHB_STORAGE_SIM2)
#define SRV_PHB_STORAGE_MASK_SIM3        (1 << PHB_STORAGE_SIM3)
#define SRV_PHB_STORAGE_MASK_SIM4        (1 << PHB_STORAGE_SIM4)

#ifdef __SRV_PHB_TCARD_STORAGE_SUPPORT__
#define SRV_PHB_STORAGE_MASK_TCARD       (1 << PHB_STORAGE_TCARD)
#else
#define SRV_PHB_STORAGE_MASK_TCARD       0
#endif

#define SRV_PHB_STORAGE_MASK_ALL         (SRV_PHB_STORAGE_MASK_SIM | SRV_PHB_STORAGE_MASK_SIM2 | SRV_PHB_STORAGE_MASK_SIM3 | SRV_PHB_STORAGE_MASK_SIM4 | SRV_PHB_STORAGE_MASK_PHONE | SRV_PHB_STORAGE_MASK_TCARD)

/****************************************************/
/*                                                  */
/*               enum                               */
/*                                                  */
/****************************************************/


/****************************************************/
/*                                                  */
/*               async op                           */
/*                                                  */
/****************************************************/
typedef enum
{
    SRV_PHB_OP_CB_TYPE_ADD,
    SRV_PHB_OP_CB_TYPE_UPD,
    SRV_PHB_OP_CB_TYPE_DEL,
    SRV_PHB_OP_CB_TYPE_COPY,
    SRV_PHB_OP_CB_TYPE_MOVE,
    SRV_PHB_OP_CB_TYPE_COPY_ALL,
    SRV_PHB_OP_CB_TYPE_MOVE_ALL,
    SRV_PHB_OP_CB_TYPE_DELETE_ALL,
    SRV_PHB_OP_CB_TYPE_MULTI_COPY,
    SRV_PHB_OP_CB_TYPE_MULTI_MOVE,
    SRV_PHB_OP_CB_TYPE_MULTI_DELETE,
    SRV_PHB_OP_CB_TYPE_UPDATE_STATUS,
    SRV_PHB_OP_CB_TYPE_BACKUP,
    SRV_PHB_OP_CB_TYPE_RESTORE,
    SRV_PHB_OP_CB_TYPE_SYNC,
    SRV_PHB_OP_CB_TYPE_TOTAL
} srv_phb_op_cb_type_enum;


typedef enum
{
    SRV_PHB_UPDATE_MODE_REPLACE,  /* remove all old data */
    SRV_PHB_UPDATE_MODE_IMPORT,   /* import from sync or AT, use save index to update  */
    SRV_PHB_UPDATE_MODE_TOTAL
} srv_phb_update_mode_enum;


/****************************************************/
/*                                                  */
/*              Phb contact filter                  */
/*                                                  */
/****************************************************/
typedef enum
{
    SRV_PHB_QUERY_TYPE_PARTIAL,
    SRV_PHB_QUERY_TYPE_FULL,
#ifdef __MMI_DIALER_SEARCH__
    SRV_PHB_QUERY_TYPE_DS,
#endif
    SRV_PHB_QUERY_TYPE_TOTAL
} srv_phb_query_type_enum;

/****************************************************/
/*                                                  */
/*              Phb backup restore mode         */
/*                                                  */
/****************************************************/
typedef enum
{
    SRV_PHB_BACKUP_RESTORE_MODE_T_CARD,
    SRV_PHB_BACKUP_RESTORE_MODE_CLOUD,
    SRV_PHB_BACKUP_RESTORE_MODE_TOTAL
} srv_phb_backup_restore_mode_enum;



/****************************************************/
/*                                                  */
/*               Struct                             */
/*                                                  */
/****************************************************/


/****************************************************/
/*                                                  */
/*              contact                             */
/*                                                  */
/****************************************************/


/* srv phb caller res struct */
typedef struct
{
    MMI_BOOL flag;                                              /* only use for caller video, MMI_TRUE mean video sound on*/
    U16 res_id;                                                 /* res id field, judge it only when path is empty string */
    WCHAR res_path[SRV_FMGR_PATH_MAX_LEN + 1];                  /* res path field */
} srv_phb_res_struct;


/* srv phb group struct */
typedef struct
{
    U8 group_id[MMI_PHB_GROUP_COUNT];                      /* group id array */
    U16 group_count;                                       /* group count */
} srv_phb_group_struct;


/* srv phb birthday struct */
typedef mmi_phb_bday_struct srv_phb_bday_struct;


/* srv phb number struct */
typedef struct
{
    mmi_phb_sub_id sub_id;                                 /* number id field, set as MMI_PHB_SUB_ID_NEW, 
                                                           srv will assign a id after add/update it */
    U8 index;                                              /* store index */
    U8 type;                                               /* number type field, refer: mmi_phb_num_type_enum */
    U8 last_used_sim;                                      /*preferred sim, high 4 bits for sms, low 4 bits for call */
    WCHAR number[MMI_PHB_NUMBER_PLUS_LENGTH + 1];          /* number data field */
    WCHAR label[MMI_PHB_FIELD_LABEL_LENGTH + 1];           /* number label field */
    MMI_BOOL is_default;                                   /* is default number flag */
} srv_phb_number_struct;


/* srv phb email struct */
typedef struct
{
    mmi_phb_sub_id sub_id;                          /* email id field, same as number id */
    U8 index;                                       /* store index */
    U8 type;                                        /* email type field, refer: mmi_phb_email_type_enum */
    WCHAR email[MMI_PHB_EMAIL_LENGTH + 1];          /* email data field */
    WCHAR label[MMI_PHB_FIELD_LABEL_LENGTH + 1];    /* email label field */
} srv_phb_email_struct;


/* srv phb address struct */
typedef struct
{
    mmi_phb_sub_id sub_id;                         /* address id field, same as number id */
    U8 index;                                      /* store index */
    U8 type;                                       /* address type field */
    mmi_phb_address_struct address;                /* address data field */
} srv_phb_address_struct;


/* srv phb url struct */
typedef struct
{
    mmi_phb_sub_id sub_id;                         /* url id field, same as number id */
    U8 index;                                      /* store index */
    U8 type;                                       /* url type field */
    WCHAR url[MMI_PHB_URL_LENGTH + 1];             /* url data field */
} srv_phb_url_struct;


/* srv phb note struct */
typedef struct
{
    mmi_phb_sub_id sub_id;                         /* note id field, same as number id */
    U8 index;                                      /* store index */
    U8 type;                                       /* note type field */
    WCHAR note[MMI_PHB_NOTE_LENGTH + 1];           /* note data field */
} srv_phb_note_struct;



/****************************************************/
/*                                                  */
/*               async op                           */
/*                                                  */
/****************************************************/

/* srv phb op event struct */
typedef struct
{
    MMI_EVT_PARAM_HEADER
    U16 store_index;                            /* contact store_index */
    mmi_phb_contact_id id;                      /* contact id */
    U32 update_field;                           /* updated field */
    srv_phb_contact contact;                    /* updated field info */
} srv_phb_op_evt_struct;

/* srv phb async op cb parameter common struct */
typedef struct
{
    srv_phb_op_cb_type_enum type;       /* op type */
    srv_phb_handle handle;              /* op handle */
    void* user_data;                    /* user data */
} srv_phb_async_op_cb_struct;


/*****************************************************************************
 * <GROUP CallBackFunctions>
 *
 * FUNCTION
 *  srv_phb_async_op_callback_type
 * DESCRIPTION
 *  async op common call back type
 * PARAMETERS
 *  info:             [IN]        cb info
 * RETURNS
 *  void
 *****************************************************************************/
typedef void (*srv_phb_async_op_callback_type)(srv_phb_async_op_cb_struct* info);


/* srv phb add req struct */
typedef struct
{
    U16 record_index;                       /* set the new contact id(base on the storage, 1st),
                                            let's srv find empty id set as MMI_PHB_INVALID_CONTACT_ID */
    srv_phb_update_mode_enum mode;      /* update mode */
    phb_storage_enum storage;               /* storage to add contact */
    srv_phb_contact contact;                /* contact data to add */
    srv_phb_async_op_callback_type cb;      /* cb */
    void* user_data;                        /* user data */
} srv_phb_add_req_struct;

/* srv phb add cb parameter struct */
typedef struct
{
    srv_phb_op_cb_type_enum type;           /* op type */
    srv_phb_handle handle;                  /* op handle */
    void* user_data;                        /* user data */
    S32 result;                             /* result */
    mmi_phb_contact_id id;                  /* contact id */
} srv_phb_add_cb_struct;


/* srv phb update req struct */
typedef struct
{
    mmi_phb_contact_id id;              /* contact id */
    srv_phb_update_mode_enum mode;      /* update mode */
    U32 update_field;                   /* update field mask */
    srv_phb_contact contact;            /* contact data to updata */
    srv_phb_async_op_callback_type cb;  /* cb */
    void* user_data;                    /* user data */
} srv_phb_update_req_struct;

/* srv phb update cb parameter struct */
typedef srv_phb_add_cb_struct srv_phb_update_cb_struct;


/* srv phb delete req struct */
typedef struct
{
    mmi_phb_contact_id id;                  /* contact id */
    srv_phb_async_op_callback_type cb;      /* cb */
    void* user_data;                        /* user data */
} srv_phb_delete_req_struct;

/* srv phb delete cb parameter struct */
typedef srv_phb_add_cb_struct srv_phb_delete_cb_struct;


/* srv phb copy req struct */
typedef struct
{
    mmi_phb_contact_id id;
    phb_storage_enum dest_storage;
    srv_phb_async_op_callback_type cb;
    void* user_data;
} srv_phb_copy_req_struct;

/* srv phb copy cb parameter struct */
typedef srv_phb_add_cb_struct srv_phb_copy_cb_struct;


/* srv phb move req struct */
typedef srv_phb_copy_req_struct srv_phb_move_req_struct;

/* srv phb move cb parameter struct */
typedef srv_phb_add_cb_struct srv_phb_move_cb_struct;

/* srv phb copy all req struct */
typedef struct
{
    phb_storage_enum src_storage;       /* src storage */
    phb_storage_enum dest_storage;      /* dest storage */
    srv_phb_async_op_callback_type cb;  /* cb */
    void* user_data;                    /* user data */
} srv_phb_copy_all_req_struct;

/* srv phb copy all cb parameter struct */
typedef struct
{
    srv_phb_op_cb_type_enum type;  /* op type */
    srv_phb_handle handle;         /* op handle */
    void* user_data;               /* user data */
    U16 finish_count;              /* finished count */
    U16 total_count;               /* total count */
    U16 fail_count;                /* failed count*/
    S32 result;                    /* result of operation*/
} srv_phb_copy_all_cb_struct;


/* srv phb move all req struct */
typedef srv_phb_copy_all_req_struct srv_phb_move_all_req_struct;

/* srv phb move all cb parameter struct */
typedef srv_phb_copy_all_cb_struct srv_phb_move_all_cb_struct;

/* srv phb delete all req struct */
typedef struct
{
    phb_storage_enum storage;
    srv_phb_async_op_callback_type cb;
    void* user_data;
} srv_phb_delete_all_req_struct;

/* srv phb delete all cb parameter struct */
typedef srv_phb_copy_all_cb_struct srv_phb_delete_all_cb_struct;


/* srv phb multi copy req struct */
typedef struct
{
    U16 contact_count;                  /* total count */
    mmi_phb_contact_id* id_array;       /* contact id array */
    phb_storage_enum dest_storage;      /* dest storage */
    srv_phb_async_op_callback_type cb;  /* cb */
    void* user_data;                    /* user data */
} srv_phb_multi_copy_req_struct;


/* srv phb multi copy cb parameter struct */
typedef struct
{
    srv_phb_op_cb_type_enum type;   /* op type */
    srv_phb_handle handle;          /* op handle */
    void* user_data;                /* user data */
    U16 finish_count;               /* finished count */
    U16 total_count;                /* total count */
    U16 fail_count;                 /* failed count*/
    S32 result;                     /* operation result*/
    mmi_phb_contact_id* id_array;   /* failed contact id array */
} srv_phb_multi_copy_cb_struct;


/* srv phb multi move req struct */
typedef srv_phb_multi_copy_req_struct srv_phb_multi_move_req_struct;

/* srv phb multi move cb parameter struct */
typedef srv_phb_multi_copy_cb_struct srv_phb_multi_move_cb_struct;


/* srv phb multi delete req struct */
typedef struct
{
    U16 contact_count;
    mmi_phb_contact_id* id_array;
    srv_phb_async_op_callback_type cb;
    void* user_data;
} srv_phb_multi_delete_req_struct;


/* srv phb multi delete cb parameter struct */
typedef srv_phb_multi_copy_cb_struct srv_phb_multi_delete_cb_struct;


/* srv phb backup req struct */
typedef struct
{
    srv_phb_async_op_callback_type cb;      /* cb */
    void* user_data;                        /* user data */
    WCHAR path[SRV_FMGR_PATH_MAX_LEN + 1];  /* path */
    phb_storage_enum storage;               /* storage */
    #ifdef __VCARD_CLOUD_SUPPORT__
    srv_phb_backup_restore_mode_enum mode;  /* backup mode */
    U32 provider;                           /* provider id need by cloud*/
    U8 account;                             /* account id need by cloud*/
    srv_cloud_mem_alloc malloc_func;
    srv_cloud_mem_free free_func;
    #endif
} srv_phb_backup_req_struct;

typedef srv_phb_copy_all_cb_struct srv_phb_backup_cb_struct;


/* srv phb restore req struct */
typedef struct
{
    srv_phb_async_op_callback_type cb;      /* cb */
    void* user_data;                        /* user data */
    WCHAR path[SRV_FMGR_PATH_MAX_LEN + 1];  /* path */
    #ifdef __VCARD_CLOUD_SUPPORT__
    srv_phb_backup_restore_mode_enum mode;  /* restore mode */
    U32 provider;                           /* provider id need by cloud*/
    U8 account;                             /* account id need by cloud*/
    srv_cloud_mem_alloc malloc_func;
    srv_cloud_mem_free free_func;
    #endif
} srv_phb_restore_req_struct;

typedef srv_phb_copy_all_cb_struct srv_phb_restore_cb_struct;


/* srv phb backup update cb parameter struct */
typedef struct
{
    srv_phb_op_cb_type_enum type;     /* cb type*/
    srv_phb_handle handle;            /* op handle */
    void* user_data;                  /* user data */
    S32 result;                       /* finished count */
    S32 error_code;                   /* error code */
    U16 event_id;                     /* cancel or continue event id */
} srv_phb_backup_update_cb_struct;


/* srv phb backup update cb parameter struct */
typedef struct
{
    srv_phb_op_cb_type_enum type;     /* cb type*/
    srv_phb_handle handle;            /* op handle */
    void* user_data;                  /* user data */
    S32 result;                       /* success or fail */
    S32 error_code;                   /* error code */
    U16 event_id;                     /* cancel or continue event id */
    U16 percentage;                   /* record process process 0 ~ 100 */
} srv_phb_restore_update_cb_struct;


/* srv phb multi op status update cb parameter struct */
typedef struct
{
    srv_phb_op_cb_type_enum type;     /* cb type*/
    srv_phb_handle handle;            /* op handle */
    void* user_data;                  /* user data */
    U16 finish_count;                 /* finished count */
    U16 fail_count;                   /* failed count */
    U16 total_count;                  /* total count */
} srv_phb_multi_op_status_cb_struct;

/*set preferred sim request struct*/
typedef struct
{
    U16 *number;
    mmi_phb_contact_id id;
    mmi_sim_enum sim_id;
    srv_phb_number_op_type_enum op_type;
    srv_phb_async_op_callback_type cb;      /* cb */
    void* user_data;                        /* user data */
} srv_phb_set_preferred_sim_req;


/****************************************************/
/*                                                  */
/*               query                              */
/*                                                  */
/****************************************************/

/* srv phb query req struct */
typedef struct
{
    MMI_BOOL alpha_table;     /* MMI_TRUE: build alpha table */
    MMI_BOOL item_order;      /* MMI_TRUE: match item ordered first by match field, second by name */
    U32 align_field;          /* output item align field; name or number or number & email */
    srv_phb_contact_filter filter;  /* contact filter */
} srv_phb_query_req_struct;


/* srv phb query match info struct */
typedef struct
{
    mmi_phb_contact_field_id_enum matched_field;                             /* matched field type*/
    MMI_BOOL is_sequence;                         /* is_sequence flag */
    U8 sequence_start;                            /* use it when is_sequence is MMI_TRUE */
    U8 sequence_len;                              /* use it when is_sequence is MMI_TRUE */
    U8 mask[(SRV_PHB_QUERY_PATTERN_LEN + 7) / 8]; /* use it when is_sequence is MMI_FALSE */
} srv_phb_query_match_info_struct;


/* srv phb aphla info struct */
typedef struct
{
    U16 start_index;            /* start index*/
    U16 count;                  /* total count*/
} srv_phb_alpha_info_struct;

/***************************************************************************** 
 * Global Function
 *****************************************************************************/

    
/****************************************************/
/*                                                  */
/*              contact                             */
/*                                                  */
/****************************************************/


/*****************************************************************************
 * FUNCTION
 *  srv_phb_create_contact
 * DESCRIPTION
 *  create a contact container
 * PARAMETERS
 *  contact            : [IN]   src contact, if it's NULL return a empry contact, otherwise copy the src contact
 * RETURNS
 *  void
*****************************************************************************/
extern srv_phb_contact srv_phb_create_contact(srv_phb_contact contact);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_free_contact
 * DESCRIPTION
 *  free a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 * RETURNS
 *  void
*****************************************************************************/
extern void srv_phb_free_contact(srv_phb_contact contact);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_reset_contact
 * DESCRIPTION
 *  reset all contact values of a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 * RETURNS
 *  void
*****************************************************************************/
extern void srv_phb_reset_contact(srv_phb_contact contact, U32 field);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_fname
 * DESCRIPTION
 *  get first name from a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 * RETURNS
 *  WCHAR*
*****************************************************************************/
extern WCHAR* srv_phb_contact_get_fname(srv_phb_contact contact);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_set_fname
 * DESCRIPTION
 *  set first name to a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 *  fname              : [IN]  first name data
 * RETURNS
 *  WCHAR*
*****************************************************************************/
extern WCHAR* srv_phb_contact_set_fname(srv_phb_contact contact, const WCHAR* fname);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_lname
 * DESCRIPTION
 *  get last name from a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 * RETURNS
 *  WCHAR*
*****************************************************************************/
extern WCHAR* srv_phb_contact_get_lname(srv_phb_contact contact);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_set_lname
 * DESCRIPTION
 *  set last name to a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 *  lname              : [IN]  last name data
 * RETURNS
 *  WCHAR*
*****************************************************************************/
extern WCHAR* srv_phb_contact_set_lname(srv_phb_contact contact, const WCHAR* lname);


/*****************************************************************************
* FUNCTION
*  srv_phb_contact_set_name
* DESCRIPTION
*  set name to a contact handle
* PARAMETERS
*  contact            : [IN]  contact container
*  name              : [IN]  name data
* RETURNS
*  void
*****************************************************************************/
WCHAR* srv_phb_contact_set_name(srv_phb_contact contact, const WCHAR* name);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_lname
 * DESCRIPTION
 *  get full name from a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 * RETURNS
 *  WCHAR*
*****************************************************************************/
extern WCHAR* srv_phb_contact_get_name(srv_phb_contact contact);


/*****************************************************************************
* FUNCTION
*  srv_phb_contact_get_nick
* DESCRIPTION
*  get nick name from a contact handle
* PARAMETERS
*  void
* RETURNS
*  void
*****************************************************************************/
extern WCHAR* srv_phb_contact_get_nick(srv_phb_contact contact);


/*****************************************************************************
* FUNCTION
*  srv_phb_contact_set_nick
* DESCRIPTION
*  set nick name to a contact handle
* PARAMETERS
*  void
* RETURNS
*  void
*****************************************************************************/
extern WCHAR* srv_phb_contact_set_nick(srv_phb_contact contact, const WCHAR* nick);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_company
 * DESCRIPTION
 *  get company filed from contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 * RETURNS
 *  WCHAR*
*****************************************************************************/
extern WCHAR* srv_phb_contact_get_company(srv_phb_contact contact);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_set_company
 * DESCRIPTION
 *  set company data to a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 *  company            : [IN]  company data
 * RETURNS
 *  WCHAR*
*****************************************************************************/
extern WCHAR* srv_phb_contact_set_company(srv_phb_contact contact, const WCHAR* company);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_title
 * DESCRIPTION
 *  get title data from a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 * RETURNS
 *  WCHAR*
*****************************************************************************/
extern WCHAR* srv_phb_contact_get_title(srv_phb_contact contact);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_set_title
 * DESCRIPTION
 *  set title data to a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 *  title              : [IN]  title data
 * RETURNS
 *  WCHAR*
*****************************************************************************/
extern WCHAR* srv_phb_contact_set_title(srv_phb_contact contact, const WCHAR* title);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_bday
 * DESCRIPTION
 *  get bday data from a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 * RETURNS
 *  srv_phb_bday_struct*
*****************************************************************************/
extern srv_phb_bday_struct* srv_phb_contact_get_bday(srv_phb_contact contact);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_set_bday
 * DESCRIPTION
 *  set bday data to a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 *  bday               : [IN]  bday data
 * RETURNS
 *  srv_phb_bday_struct*
*****************************************************************************/
extern srv_phb_bday_struct* srv_phb_contact_set_bday(srv_phb_contact contact, const srv_phb_bday_struct* bday);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_group
 * DESCRIPTION
 *  get group data from a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 * RETURNS
 *  srv_phb_group_struct*
*****************************************************************************/
extern srv_phb_group_struct* srv_phb_contact_get_group(srv_phb_contact contact);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_set_group
 * DESCRIPTION
 *  set group data to a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 *  group              : [IN]  group info
 * RETURNS
 *  srv_phb_group_struct*
*****************************************************************************/
extern srv_phb_group_struct* srv_phb_contact_set_group(srv_phb_contact contact, const srv_phb_group_struct* group);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_set_group_ex
 * DESCRIPTION
 *  set group data to a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 *  group_id           : [IN]  group id
 * RETURNS
 *  srv_phb_group_struct*
*****************************************************************************/
extern srv_phb_group_struct* srv_phb_contact_set_group_ex(srv_phb_contact contact, U8 group_id);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_ringtone
 * DESCRIPTION
 *  get ringtone data from a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 * RETURNS
 *  srv_phb_res_struct*
*****************************************************************************/
extern srv_phb_res_struct* srv_phb_contact_get_ringtone(srv_phb_contact contact);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_set_ringtone
 * DESCRIPTION
 *  set ringtone data to a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 *  ringtone           : [IN]  ringtone info
 * RETURNS
 *  srv_phb_res_struct*
*****************************************************************************/
extern srv_phb_res_struct* srv_phb_contact_set_ringtone(srv_phb_contact contact, const srv_phb_res_struct* ringtone);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_set_ringtone_ex
 * DESCRIPTION
 *  set ringtone data to a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 *  id                 : [IN]  ringtone id
 *  path               : [IN]  ringtone path
 * RETURNS
 *  srv_phb_res_struct*
*****************************************************************************/
extern srv_phb_res_struct* srv_phb_contact_set_ringtone_ex(srv_phb_contact contact, U16 id, const WCHAR* path);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_image
 * DESCRIPTION
 *  get image data from a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 * RETURNS
 *  srv_phb_res_struct*
*****************************************************************************/
extern srv_phb_res_struct* srv_phb_contact_get_image(srv_phb_contact contact);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_set_image
 * DESCRIPTION
 *  set image data to a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 *  image              : [IN]  image info
 * RETURNS
 *  srv_phb_res_struct*
*****************************************************************************/
extern srv_phb_res_struct* srv_phb_contact_set_image(srv_phb_contact contact, const srv_phb_res_struct* image);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_set_image_ex
 * DESCRIPTION
 *  set image data to a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 *  id                 : [IN]  image id
 *  path               : [IN]  image path
 * RETURNS
 *  srv_phb_res_struct*
*****************************************************************************/
extern srv_phb_res_struct* srv_phb_contact_set_image_ex(srv_phb_contact contact, U16 id, const WCHAR* path);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_video
 * DESCRIPTION
 *  get video data from a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 * RETURNS
 *  srv_phb_res_struct*
*****************************************************************************/
extern srv_phb_res_struct* srv_phb_contact_get_video(srv_phb_contact contact);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_set_video
 * DESCRIPTION
 *  set video data to a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 *  video              : [IN]  video info
 * RETURNS
 *  srv_phb_res_struct*
*****************************************************************************/
extern srv_phb_res_struct* srv_phb_contact_set_video(srv_phb_contact contact, const srv_phb_res_struct* video);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_set_video_ex
 * DESCRIPTION
 *  set video data to a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 *  id                 : [IN]  video id
 *  path               : [IN]  video path
 *  video_sound        : [IN]  video sound on or off
 * RETURNS
 *  srv_phb_res_struct*
*****************************************************************************/
extern srv_phb_res_struct* srv_phb_contact_set_video_ex(srv_phb_contact contact, U16 id, const WCHAR* path, MMI_BOOL video_sound);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_imps
 * DESCRIPTION
 *  get imps data from a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 * RETURNS
 *  void
*****************************************************************************/
extern WCHAR* srv_phb_contact_get_imps(srv_phb_contact contact);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_set_imps
 * DESCRIPTION
 *  set imps data to a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 *  imps               : [IN]  wcs imps data
 * RETURNS
 *  WCHAR*
*****************************************************************************/
extern WCHAR* srv_phb_contact_set_imps(srv_phb_contact contact, const WCHAR* imps);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_set_imps
 * DESCRIPTION
 *  set imps data to a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 *  imps               : [IN]  asc imps data
 * RETURNS
 *  WCHAR*
*****************************************************************************/
extern WCHAR* srv_phb_contact_set_asc_imps(srv_phb_contact contact, const CHAR* imps);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_voip
 * DESCRIPTION
 *  get voip data from a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 * RETURNS
 *  WCHAR*
*****************************************************************************/
extern WCHAR* srv_phb_contact_get_voip(srv_phb_contact contact);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_set_voip
 * DESCRIPTION
 *  set voip data to a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 *  voip               : [IN]  wcs voip data
 * RETURNS
 *  WCHAR*
*****************************************************************************/
extern WCHAR* srv_phb_contact_set_voip(srv_phb_contact contact, const WCHAR* voip);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_set_asc_voip
 * DESCRIPTION
 *  set voip data to a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 *  voip               : [IN]  asc voip data
 * RETURNS
 *  WCHAR*
*****************************************************************************/
extern WCHAR* srv_phb_contact_set_asc_voip(srv_phb_contact contact, const CHAR* voip);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_msn
 * DESCRIPTION
 *  get msn data from a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 * RETURNS
 *  WCHAR*
*****************************************************************************/
extern WCHAR* srv_phb_contact_get_msn(srv_phb_contact contact);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_set_msn
 * DESCRIPTION
 *  set msn data to a contact container
 * PARAMETERS
 *  contact            : [IN]  contact container
 *  msn                : [IN]  wcs msn data
 * RETURNS
 *  WCHAR*
*****************************************************************************/
extern WCHAR* srv_phb_contact_set_msn(srv_phb_contact contact, const WCHAR* msn);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_set_asc_msn
 * DESCRIPTION
 *  set msn data to a contact container
 * PARAMETERS
 *  contact                    : [IN]  contact container
 *  msn                        : [IN]  asc msn data
 * RETURNS
 *  WCHAR*
*****************************************************************************/
extern WCHAR* srv_phb_contact_set_asc_msn(srv_phb_contact contact, const CHAR* msn);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_add_number
 * DESCRIPTION
 *  add a number to contact container
 * PARAMETERS
 *  contact                    : [IN]  contact container
 *  number                     : [IN]  number info
 * RETURNS
 *  srv_phb_number_struct
*****************************************************************************/
extern srv_phb_number_struct* srv_phb_contact_add_number(srv_phb_contact contact, const srv_phb_number_struct* number);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_add_number
 * DESCRIPTION
 *  add a number to contact container
 * PARAMETERS
 *  contact                    : [IN]  contact container
 *  id                         : [IN]  number sub id, new number set as MMI_PHB_SUB_ID_NEW
 *  save_index                 : [IN]  number save index, only for AT, otherwise set as 0
 *  type                       : [IN]  number type, refer mmi_phb_num_type_enum
 *  number                     : [IN]  asc number data
 *  label                      : [IN]  number field label
 *  is_default                 : [IN]  is default number flag
 * RETURNS
 *  srv_phb_number_struct
*****************************************************************************/
extern srv_phb_number_struct* srv_phb_contact_add_asc_number(
                                srv_phb_contact contact,
                                mmi_phb_sub_id id,
                                U8 save_index,
                                U8 type,
                                const CHAR* number,
                                const WCHAR* label,
                                MMI_BOOL is_default);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_add_number_ex
 * DESCRIPTION
 *  add a number to contact container
 * PARAMETERS
 *  contact                    : [IN]  contact container
 *  id                         : [IN]  number sub id, new number set as MMI_PHB_SUB_ID_NEW
 *  save_index                 : [IN]  number save index, only for AT, otherwise set as 0
 *  type                       : [IN]  number type, refer mmi_phb_num_type_enum
 *  last_used_sim          : [IN] preferred sim for gemini+
 *  number                     : [IN]  asc number data
 *  label                      : [IN]  number field label
 *  is_default                 : [IN]  is default number flag
 * RETURNS
 *  srv_phb_number_struct
*****************************************************************************/
extern srv_phb_number_struct* srv_phb_contact_add_asc_number_ex(
                                srv_phb_contact contact,
                                mmi_phb_sub_id id,
                                U8 save_index,
                                U8 type,
                                U8 last_used_sim,
                                const CHAR* number,
                                const WCHAR* label,
                                MMI_BOOL is_default);



/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_add_number
 * DESCRIPTION
 *  add a number to contact container
 * PARAMETERS
 *  contact                    : [IN]  contact container
 *  id                         : [IN]  number sub id, new number set as MMI_PHB_SUB_ID_NEW
 *  save_index                 : [IN]  number save index, only for AT, otherwise set as 0
 *  type                       : [IN]  number type, refer mmi_phb_num_type_enum
 *  number                     : [IN]  wcs number data
 *  label                      : [IN]  number field label
 *  is_default                 : [IN]  is default number flag
 * RETURNS
 *  srv_phb_number_struct*
*****************************************************************************/
extern srv_phb_number_struct* srv_phb_contact_add_number_ex(
                                srv_phb_contact contact,
                                mmi_phb_sub_id id,
                                U8 save_index,
                                U8 type,
                                const WCHAR* number,
                                const WCHAR* label,
                                MMI_BOOL is_default);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_number_count
 * DESCRIPTION
 *  get number count of a contact container
 * PARAMETERS
 *  contact    : [IN]  contact container
 * RETURNS
 *  U16
*****************************************************************************/
extern U16 srv_phb_contact_get_number_count(srv_phb_contact contact);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_number_iterator
 * DESCRIPTION
 *  get number iterator from a contact container
 * PARAMETERS
 *  contact    : [IN]  contact container
 * RETURNS
 *  srv_phb_iterator
*****************************************************************************/
extern srv_phb_iterator srv_phb_contact_get_number_iterator(srv_phb_contact contact);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_number_next
 * DESCRIPTION
 *  get next number data from a contact container by number iterator
 * PARAMETERS
 *  iterator    : [IN]  number iterator
 * RETURNS
 *  srv_phb_number_struct*
*****************************************************************************/
extern srv_phb_number_struct* srv_phb_contact_get_number_next(srv_phb_iterator* iterator);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_number_by_sub_id
 * DESCRIPTION
 *  get number data from a contact container by number sub id
 * PARAMETERS
 *  contact    : [IN]  contact container
 *  id         : [IN]  number sub id
 * RETURNS
 *  srv_phb_number_struct*
*****************************************************************************/
extern srv_phb_number_struct* srv_phb_contact_get_number_by_sub_id(srv_phb_contact contact, mmi_phb_sub_id id);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_number_by_save_index
 * DESCRIPTION
 *  get number data from a contact container by number save index
 * PARAMETERS
 *  contact    : [IN]  contact container
 *  save_index : [IN]  number save index
 * RETURNS
 *  srv_phb_number_struct*
*****************************************************************************/
extern srv_phb_number_struct* srv_phb_contact_get_number_by_save_index(srv_phb_contact contact, U8 save_index);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_first_number
 * DESCRIPTION
 *  add the first number of a contact container
 * PARAMETERS
 *  contact    : [IN]  contact container
 * RETURNS
 *  srv_phb_number_struct*
*****************************************************************************/
extern srv_phb_number_struct* srv_phb_contact_get_first_number(srv_phb_contact contact);

/*****************************************************************************
* FUNCTION
*  srv_phb_contact_find_number
* DESCRIPTION
* 
* PARAMETERS
*  contact    : [IN]  contact infor
*  number    : [IN]  number
*  index       : [OUT] number index in contact
* RETURNS
*  MMI_TRUE  : number exist
*  MMI_FALSE : not found
*****************************************************************************/
extern MMI_BOOL srv_phb_contact_find_number(srv_phb_contact contact, U16 *number, U32 *index);



/*****************************************************************************
* FUNCTION
*  srv_phb_contact_remove_number
* DESCRIPTION
*  remove a number from contact container by sub id
* PARAMETERS
*  contact    : [IN]  contact container
*  sub_id     : [IN]  number id
* RETURNS
*  MMI_BOOL
*****************************************************************************/
extern MMI_BOOL srv_phb_contact_remove_number(srv_phb_contact contact, srv_phb_number_struct* number);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_add_email
 * DESCRIPTION
 *  add a email to a contact container
 * PARAMETERS
 *  contact    : [IN]  contact container
 *  email      : [IN]  email info
 * RETURNS
 *  srv_phb_email_struct*
*****************************************************************************/
extern srv_phb_email_struct* srv_phb_contact_add_email(srv_phb_contact contact, const srv_phb_email_struct* email);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_add_asc_email
 * DESCRIPTION
 *  add a email to a contact container
 * PARAMETERS
 *  contact    : [IN]  contact container
 *  id         : [IN]  email sub id
 *  save_index : [IN]  email save index
 *  type       : [IN]  email type
 *  email      : [IN]  asc email data
 * RETURNS
 *  srv_phb_email_struct*
*****************************************************************************/
extern srv_phb_email_struct* srv_phb_contact_add_asc_email(srv_phb_contact contact, mmi_phb_sub_id id, U8 save_index, U8 type, const CHAR* email, const WCHAR* label);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_add_email_ex
 * DESCRIPTION
 *  add a email to a contact container
 * PARAMETERS
 *  contact    : [IN]  contact container
 *  id         : [IN]  email sub id
 *  save_index : [IN]  email save index
 *  type       : [IN]  email type
 *  email      : [IN]  wcs email data
 * RETURNS
 *  srv_phb_email_struct*
*****************************************************************************/
extern srv_phb_email_struct* srv_phb_contact_add_email_ex(srv_phb_contact contact, mmi_phb_sub_id id, U8 save_index, U8 type, const WCHAR* email, const WCHAR* label);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_email_count
 * DESCRIPTION
 *  get email count of a contact container
 * PARAMETERS
 *  contact    : [IN]  contact container
 * RETURNS
 *  U16
*****************************************************************************/
extern U16 srv_phb_contact_get_email_count(srv_phb_contact contact);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_email_iterator
 * DESCRIPTION
 *  get email iterator from a contact container
 * PARAMETERS
 *  contact    : [IN]  contact container
 * RETURNS
 *  srv_phb_iterator
*****************************************************************************/
extern srv_phb_iterator srv_phb_contact_get_email_iterator(srv_phb_contact contact);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_email_next
 * DESCRIPTION
 *  get next email data from a contact container by email iterator
 * PARAMETERS
 *  iterator    : [IN]  email iterator
 * RETURNS
 *  srv_phb_email_struct*
*****************************************************************************/
extern srv_phb_email_struct* srv_phb_contact_get_email_next(srv_phb_iterator* iterator);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_email_by_sub_id
 * DESCRIPTION
 *  get email data from a contact container by email sub id
 * PARAMETERS
 *  contact    : [IN]  contact container
 *  id         : [IN]  email sub id
 * RETURNS
 *  srv_phb_email_struct*
*****************************************************************************/
extern srv_phb_email_struct* srv_phb_contact_get_email_by_sub_id(srv_phb_contact contact, mmi_phb_sub_id id);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_email_by_save_index
 * DESCRIPTION
 *  get email data from a contact container by email save index
 * PARAMETERS
 *  contact    : [IN]  contact container
 *  save_index : [IN]  email save index
 * RETURNS
 *  srv_phb_email_struct*
*****************************************************************************/
extern srv_phb_email_struct* srv_phb_contact_get_email_by_save_index(srv_phb_contact contact, U8 save_index);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_first_email
 * DESCRIPTION
 *  add the first email of a contact container
 * PARAMETERS
 *  contact    : [IN]  contact container
 * RETURNS
 *  srv_phb_email_struct*
*****************************************************************************/
extern srv_phb_email_struct* srv_phb_contact_get_first_email(srv_phb_contact contact);


/*****************************************************************************
* FUNCTION
*  srv_phb_contact_remove_email
* DESCRIPTION
* 
* PARAMETERS
*  void
* RETURNS
*  void
*****************************************************************************/
extern MMI_BOOL srv_phb_contact_remove_email(srv_phb_contact contact, srv_phb_email_struct* email);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_add_address
 * DESCRIPTION
 *  add a address to a contact container
 * PARAMETERS
 *  contact    : [IN]  contact container
 *  address    : [IN]  address info
 * RETURNS
 *  srv_phb_address_struct*
*****************************************************************************/
extern srv_phb_address_struct* srv_phb_contact_add_address(srv_phb_contact contact, const srv_phb_address_struct* address);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_add_address_ex
 * DESCRIPTION
 *  add a address to a contact container
 * PARAMETERS
 *  contact    : [IN]  contact container
 *  id         : [IN]  address sub id
 *  type       : [IN]  address type
 *  address    : [IN]  address data
 * RETURNS
 *  srv_phb_address_struct*
*****************************************************************************/
extern srv_phb_address_struct* srv_phb_contact_add_address_ex(srv_phb_contact contact, mmi_phb_sub_id id, U8 type, const mmi_phb_address_struct* address);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_address_count
 * DESCRIPTION
 *  get address count of a contact container
 * PARAMETERS
 *  contact    : [IN]  contact container
 * RETURNS
 *  U16
*****************************************************************************/
extern U16 srv_phb_contact_get_address_count(srv_phb_contact contact);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_address_iterator
 * DESCRIPTION
 *  get address iterator from a contact container
 * PARAMETERS
 *  contact    : [IN]  contact container
 * RETURNS
 *  srv_phb_iterator
*****************************************************************************/
extern srv_phb_iterator srv_phb_contact_get_address_iterator(srv_phb_contact contact);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_address_next
 * DESCRIPTION
 *  get next address data from a contact container by address iterator
 * PARAMETERS
 *  iterator    : [IN]  address iterator
 * RETURNS
 *  srv_phb_address_struct*
*****************************************************************************/
extern srv_phb_address_struct* srv_phb_contact_get_address_next(srv_phb_iterator* iterator);


/*****************************************************************************
* FUNCTION
 *  srv_phb_contact_get_address_by_sub_id
 * DESCRIPTION
 *  get address data from a contact container by sub id
 * PARAMETERS
 *  contact    : [IN]  contact container
 *  id         : [IN]  address sub id
 * RETURNS
 *  srv_phb_address_struct*
*****************************************************************************/
extern srv_phb_address_struct* srv_phb_contact_get_address_by_sub_id(srv_phb_contact contact, mmi_phb_sub_id id);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_add_url
 * DESCRIPTION
 *  add a url to a contact container
 * PARAMETERS
 *  contact    : [IN]  contact container
 *  url        : [IN]  url info
 * RETURNS
 *  srv_phb_url_struct*
*****************************************************************************/
extern srv_phb_url_struct* srv_phb_contact_add_url(srv_phb_contact contact, const srv_phb_url_struct* url);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_add_url_ex
 * DESCRIPTION
 *  add a url to a contact container
 * PARAMETERS
 *  contact    : [IN]  contact container
 *  id         : [IN]  url sub id
 *  type       : [IN]  url type
 *  url        : [IN]  wcs url data
 * RETURNS
 *  srv_phb_url_struct*
*****************************************************************************/
extern srv_phb_url_struct* srv_phb_contact_add_url_ex(srv_phb_contact contact, mmi_phb_sub_id id, U8 type, const WCHAR* url);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_add_asc_url
 * DESCRIPTION
 *  add a url to a contact container
 * PARAMETERS
 *  contact    : [IN]  contact container
 *  id         : [IN]  url sub id
 *  type       : [IN]  url type
 *  url        : [IN]  asc url data
 * RETURNS
 *  srv_phb_url_struct*
*****************************************************************************/
extern srv_phb_url_struct* srv_phb_contact_add_asc_url(srv_phb_contact contact, mmi_phb_sub_id id, U8 type, const CHAR* url);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_url_count
 * DESCRIPTION
 *  get url count of a contact container
 * PARAMETERS
 *  contact    : [IN]  contact container
 * RETURNS
 *  U16
*****************************************************************************/
extern U16 srv_phb_contact_get_url_count(srv_phb_contact contact);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_url_iterator
 * DESCRIPTION
 *  get url iterator from a contact container
 * PARAMETERS
 *  contact    : [IN]  contact container
 * RETURNS
 *  srv_phb_iterator
*****************************************************************************/
extern srv_phb_iterator srv_phb_contact_get_url_iterator(srv_phb_contact contact);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_url_next
 * DESCRIPTION
 *  get next url data from a contact container by url iterator
 * PARAMETERS
 *  iterator    : [IN]  url iterator
 * RETURNS
 *  srv_phb_url_struct*
*****************************************************************************/
extern srv_phb_url_struct* srv_phb_contact_get_url_next(srv_phb_iterator* iterator);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_url_by_sub_id
 * DESCRIPTION
 *  get url data from a contact container by sub id
 * PARAMETERS
 *  contact    : [IN]  contact container
 *  id         : [IN]  url sub id
 * RETURNS
 *  srv_phb_url_struct*
*****************************************************************************/
extern srv_phb_url_struct* srv_phb_contact_get_url_by_sub_id(srv_phb_contact contact, mmi_phb_sub_id id);


/*****************************************************************************
* FUNCTION
*  srv_phb_contact_add_note
* DESCRIPTION
*  add a note to a contact container
* PARAMETERS
*  contact    : [IN]  contact container
*  note       : [IN]  note to add
* RETURNS
*  srv_phb_note_struct*
*****************************************************************************/
extern srv_phb_note_struct* srv_phb_contact_add_note(srv_phb_contact contact, const srv_phb_note_struct* note);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_add_note_ex
 * DESCRIPTION
 *  add a note to a contact container
 * PARAMETERS
 *  contact    : [IN]  contact container
 *  id         : [IN]  note sub id
 *  type       : [IN]  note type
 *  note       : [IN]  note data
 * RETURNS
 *  srv_phb_note_struct*
*****************************************************************************/
extern srv_phb_note_struct* srv_phb_contact_add_note_ex(srv_phb_contact contact, mmi_phb_sub_id id, U8 type, const WCHAR* note);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_note_count
 * DESCRIPTION
 *  get note count of a contact container
 * PARAMETERS
 *  contact    : [IN]  contact container
 * RETURNS
 *  U16
*****************************************************************************/
extern U16 srv_phb_contact_get_note_count(srv_phb_contact contact);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_note_iterator
 * DESCRIPTION
 *  get note iterator from a contact container
 * PARAMETERS
 *  contact    : [IN]  contact container
 * RETURNS
 *  srv_phb_iterator
*****************************************************************************/
extern srv_phb_iterator srv_phb_contact_get_note_iterator(srv_phb_contact contact);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_note_next
 * DESCRIPTION
 *  get next note data from a contact container by note iterator
 * PARAMETERS
 *  iterator    : [IN]  note iterator
 * RETURNS
 *  srv_phb_note_struct*
*****************************************************************************/
extern srv_phb_note_struct* srv_phb_contact_get_note_next(srv_phb_iterator* iterator);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_get_note_by_sub_id
 * DESCRIPTION
 *  get note data from a contact container by sub id
 * PARAMETERS
 *  contact    : [IN]  contact container
 *  id         : [IN]  note sub id
 * RETURNS
 *  srv_phb_note_struct*
*****************************************************************************/
extern srv_phb_note_struct* srv_phb_contact_get_note_by_sub_id(srv_phb_contact contact, mmi_phb_sub_id id);


#if 0
/* under construction !*/
/* under construction !*/
#endif


/****************************************************/
/*                                                  */
/*               async op                           */
/*                                                  */
/****************************************************/

/*****************************************************************************
 * FUNCTION
 *  srv_phb_stop_async_op
 * DESCRIPTION
 *  stop a async op
 * PARAMETERS
 *  handle    : [IN]  op handle
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_stop_async_op(srv_phb_handle handle);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_free_handle
 * DESCRIPTION
 *  free op handle. Notice: AP need free each handle once and only once
 * PARAMETERS
 *  handle    : [IN]  op handle
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_free_handle(srv_phb_handle handle);


/* add op */
/*****************************************************************************
 * FUNCTION
 *  srv_phb_add_contact
 * DESCRIPTION
 *  add a contact
 * PARAMETERS
 *  req    : [IN]  add req
 * RETURNS
 *  srv_phb_handle
 *****************************************************************************/
extern srv_phb_handle srv_phb_add_contact(srv_phb_add_req_struct* req);


/* update op */
/*****************************************************************************
 * FUNCTION
 *  srv_phb_update_contact
 * DESCRIPTION
 *  update a contact
 * PARAMETERS
 *  req    : [IN]  update req
 * RETURNS
 *  srv_phb_handle
 *****************************************************************************/
extern srv_phb_handle srv_phb_update_contact(srv_phb_update_req_struct* req);


/* delete op */
/*****************************************************************************
 * FUNCTION
 *  srv_phb_delete_contact
 * DESCRIPTION
 *  delete a contact
 * PARAMETERS
 *  req    : [IN]  delete req
 * RETURNS
 *  srv_phb_handle
 *****************************************************************************/
extern srv_phb_handle srv_phb_delete_contact(srv_phb_delete_req_struct* req);


/* copy op */

/*****************************************************************************
 * FUNCTION
 *  srv_phb_copy_contact
 * DESCRIPTION
 *  copy a contact
 * PARAMETERS
 *  req    : [IN]  copy req
 * RETURNS
 *  srv_phb_handle
 *****************************************************************************/
extern srv_phb_handle srv_phb_copy_contact(srv_phb_copy_req_struct* req);


/* move op */

/*****************************************************************************
 * FUNCTION
 *  srv_phb_move_contact
 * DESCRIPTION
 *  move a contact
 * PARAMETERS
 *  req    : [IN]  move req
 * RETURNS
 *  srv_phb_handle
 *****************************************************************************/
extern srv_phb_handle srv_phb_move_contact(srv_phb_move_req_struct* req);


/* copy all op */


/*****************************************************************************
 * FUNCTION
 *  srv_phb_copy_all_contact
 * DESCRIPTION
 *  copy contacts by storage
 * PARAMETERS
 *  req    : [IN]  copy all req
 * RETURNS
 *  srv_phb_handle
 *****************************************************************************/
extern srv_phb_handle srv_phb_copy_all_contact(srv_phb_copy_all_req_struct* req);


/* move all op */

/*****************************************************************************
 * FUNCTION
 *  srv_phb_move_all_contact
 * DESCRIPTION
 *  move contacts by storage
 * PARAMETERS
 *  req    : [IN]  move all req
 * RETURNS
 *  srv_phb_handle
 *****************************************************************************/
extern srv_phb_handle srv_phb_move_all_contact(srv_phb_move_all_req_struct* req);


/* delete all op */

/*****************************************************************************
 * FUNCTION
 *  srv_phb_delete_all_contact
 * DESCRIPTION
 *  delete contacts by storage
 * PARAMETERS
 *  req    : [IN]  delete all req
 * RETURNS
 *  srv_phb_handle
 *****************************************************************************/
srv_phb_handle srv_phb_delete_all_contact(srv_phb_delete_all_req_struct* req);


/* multi copy op */

/*****************************************************************************
 * FUNCTION
 *  srv_phb_multi_copy_contact
 * DESCRIPTION
 *  copy several contact
 * PARAMETERS
 *  req    : [IN]  multi copy req
 * RETURNS
 *  srv_phb_handle
 *****************************************************************************/
extern srv_phb_handle srv_phb_multi_copy_contact(srv_phb_multi_copy_req_struct* req);


/* multi move op */

/*****************************************************************************
 * FUNCTION
 *  srv_phb_multi_move_contact
 * DESCRIPTION
 *  move several contact
 * PARAMETERS
 *  req    : [IN]  multi move req
 * RETURNS
 *  srv_phb_handle
 *****************************************************************************/
extern srv_phb_handle srv_phb_multi_move_contact(srv_phb_multi_move_req_struct* req);


/* multi delete op */

/*****************************************************************************
 * FUNCTION
 *  srv_phb_multi_delete_contact
 * DESCRIPTION
 *  delete several contact
 * PARAMETERS
 *  req    : [IN]  multi delete req
 * RETURNS
 *  srv_phb_handle
 *****************************************************************************/
extern srv_phb_handle srv_phb_multi_delete_contact(srv_phb_multi_delete_req_struct* req);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_backup_contact
 * DESCRIPTION
 *  
 * PARAMETERS
 *  
 * RETURNS
 *  
 *****************************************************************************/
extern srv_phb_handle srv_phb_backup_contact(srv_phb_backup_req_struct* req);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_restore_contact
 * DESCRIPTION
 *  
 * PARAMETERS
 *  
 * RETURNS
 *  
 *****************************************************************************/
extern srv_phb_handle srv_phb_restore_contact(srv_phb_restore_req_struct* req);


/****************************************************/
/*                                                  */
/*              Phb filter                          */
/*                                                  */
/****************************************************/

/*****************************************************************************
 * FUNCTION
 *  srv_phb_create_field_filter
 * DESCRIPTION
 *  create a empty field filter
 * PARAMETERS
 *  void
 * RETURNS
 *  srv_phb_field_filter
 *****************************************************************************/
extern srv_phb_field_filter srv_phb_create_field_filter(void);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_create_field_filter_ext
 * DESCRIPTION
 *  create a field filter with field type filter
 * PARAMETERS
 *  field_type:         [IN]        field mask, such as MMI_PHB_CONTACT_FIELD_NAME
 * RETURNS
 *  srv_phb_field_filter
 *****************************************************************************/
extern srv_phb_field_filter srv_phb_create_field_filter_ext(U32 field_type);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_create_field_filter_ext2
 * DESCRIPTION
 *  create a field filter with number type filter
 * PARAMETERS
 *  number_type:        [IN]        number type refer: mmi_phb_num_type_enum
 * RETURNS
 *  srv_phb_field_filter 
 *****************************************************************************/
extern srv_phb_field_filter srv_phb_create_field_filter_ext2(U32 field_type, U8 number_type);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_free_field_filter
 * DESCRIPTION
 *  free a field filter
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_free_field_filter(srv_phb_field_filter filter);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_filed_filter_set_field
 * DESCRIPTION
 *  set field type filter to a field filter
 * PARAMETERS
 *  filter:             [IN]        field filter
 *  field_type:         [IN]        field mask, such as MMI_PHB_CONTACT_FIELD_NAME
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_filed_filter_set_field(srv_phb_field_filter filter, U32 field_type);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_set_number_type_filter
 * DESCRIPTION
 *  set number type filter to a field filter
 * PARAMETERS
 *  filter:             [IN]        field filter
 *  number_type:        [IN]        number type refer: mmi_phb_num_type_enum
 * RETURNS
 *  void 
 *****************************************************************************/
extern void srv_phb_filed_filter_set_number_type(srv_phb_field_filter filter, U8 number_type);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_filed_filter_set_default_number
 * DESCRIPTION
 *  set default number filter to a field filter
 * PARAMETERS
 *  filter:             [IN]        field filter
 *  only_default:       [IN]        MMI_TRUE: only get default number
 * RETURNS
 *  void 
 *****************************************************************************/
extern void srv_phb_filed_filter_set_default_number(srv_phb_field_filter filter, MMI_BOOL only_default);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_read_contact
 * DESCRIPTION
 *  create empty contact filter
 * PARAMETERS
 *  id:             [IN]        contact id
 *  filter:         [IN]        field filter
 *  contact:        [IN]        if set will reuse the contact to get contact info, otherwise will use a new contact to get info
 * RETURNS
 *  srv_phb_contact
 *****************************************************************************/
extern srv_phb_contact srv_phb_read_contact(mmi_phb_contact_id id, srv_phb_field_filter filter, srv_phb_contact contact);


/****************************************************/
/*                                                  */
/*              Phb contact filter                  */
/*                                                  */
/****************************************************/
#define SRV_PHB_QUERY_MAX_TIME                  (50) // query step

/*****************************************************************************
 * FUNCTION
 *  srv_phb_create_contact_filter
 * DESCRIPTION
 *  create empty contact filter
 * PARAMETERS
 *  void
 * RETURNS
 *  srv_phb_contact_filter
 *****************************************************************************/
extern srv_phb_contact_filter srv_phb_create_contact_filter(void);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_create_contact_filter
 * DESCRIPTION
 *  create contact filter with storage mask
 * PARAMETERS
 *  storage_mask : [IN] refer SRV_PHB_STORAGE_MASK_SIM, SRV_PHB_STORAGE_MASK_PHONE, SRV_PHB_STORAGE_MASK_SIM2, SRV_PHB_STORAGE_MASK_ALL
 * RETURNS
 *  srv_phb_contact_filter
 *****************************************************************************/
extern srv_phb_contact_filter srv_phb_create_contact_filter_by_storage(U8 storage_mask);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_create_contact_filter_by_filed
 * DESCRIPTION
 *  create a contact filter with field filter
 * PARAMETERS
 *  field_type:             [IN]        fields mask, such as MMI_PHB_CONTACT_FIELD_NAME
 * RETURNS
 *  srv_phb_contact_filter 
 *****************************************************************************/
extern srv_phb_contact_filter srv_phb_create_contact_filter_by_filed(U32 field_type);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_create_contact_filter
 * DESCRIPTION
 *  free a contact filter
 * PARAMETERS
 *  filter:                 [IN]        contact filter
 * RETURNS
 *  void  
 *****************************************************************************/
extern void srv_phb_free_contact_filter(srv_phb_contact_filter filter);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_free_query_entry
 * DESCRIPTION
 *  
 * PARAMETERS
 *  
 * RETURNS
 *  
 *****************************************************************************/
extern void srv_phb_free_query_entry(srv_phb_contact_filter filter, srv_phb_query_handle handle);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_filter_set_storage
 * DESCRIPTION
 *  set storage filter to a contact filter
 * PARAMETERS
 *  filter:                 [IN]        contact filter
 *  storage_mask:           [IN]        storage mask, such as SRV_PHB_STORAGE_MASK_SIM
 * RETURNS
 *  void 
 *****************************************************************************/
extern void srv_phb_contact_filter_set_storage(srv_phb_contact_filter filter, U8 storage_mask);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_filter_set_field
 * DESCRIPTION
 *  set field filter to a contact filter
 * PARAMETERS
 *  filter:                 [IN]        contact filter
 *  field_type:             [IN]        fields mask, such as MMI_PHB_CONTACT_FIELD_NAME
 * RETURNS
 *  void 
 *****************************************************************************/
extern void srv_phb_contact_filter_set_field(srv_phb_contact_filter filter, U32 field_type);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_filter_set_query
 * DESCRIPTION
 *  set string compare filter to a contact filter
 * PARAMETERS
 *  filter:                 [IN]        contact filter
 *  pattern:                [IN]        string compare pattern
 *  query_field:            [IN]        compare fields
 *  type:                   [IN]        compare type
 * RETURNS
 *  void 
 *****************************************************************************/
extern void srv_phb_contact_filter_set_query(srv_phb_contact_filter filter, WCHAR* pattern, U32 query_field, srv_phb_query_type_enum type);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_filter_set_mem_entry
 * DESCRIPTION
 *  
 * PARAMETERS
 *  
 * RETURNS
 *  
 *****************************************************************************/
extern void srv_phb_contact_filter_set_mem_entry(srv_phb_contact_filter filter, srv_phb_query_mem_alloc_func_type alloc_func, 
                        srv_phb_query_mem_free_func_type free_func, void *user_data);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_filter_set_query_entry
 * DESCRIPTION
 *  
 * PARAMETERS
 *  
 * RETURNS
 *  
 *****************************************************************************/
extern void srv_phb_contact_filter_set_query_entry(srv_phb_contact_filter filter, srv_phb_query_async_func_type callback_func,
                        U16 start_index, U16 query_time, void *user_data);


#ifdef __MMI_PHB_CALLER_GROUP__
/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_filter_set_group
 * DESCRIPTION
 *  set group filter to a contact filter
 * PARAMETERS
 *  filter:                 [IN]        contact filter
 *  group_ids:              [IN]        group id
 *  is_equal:               [IN]        MMI_TRUE mean want to get all contact in the group,
                                        MMI_FALSE mean want to get all contact not in the group,
 * RETURNS
 *  void 
 *****************************************************************************/
extern void srv_phb_contact_filter_set_group(srv_phb_contact_filter filter, U8 group_id, MMI_BOOL is_equal);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_contact_filter_set_group_ex
 * DESCRIPTION
 *  set group filter to a contact filter
 * PARAMETERS
 *  filter:                 [IN]        contact filter
 *  group_ids:              [IN]        group info
 *  is_equal:               [IN]        MMI_TRUE mean want to get all contact in these groups,
                                        MMI_FALSE mean want to get all contact not in these groups,
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_contact_filter_set_group_ex(srv_phb_contact_filter filter, srv_phb_group_struct* group_ids, MMI_BOOL is_equal);
#endif /* __MMI_PHB_CALLER_GROUP__ */


/****************************************************/
/*                                                  */
/*               query                              */
/*                                                  */
/****************************************************/


/*****************************************************************************
 * FUNCTION
 *  srv_phb_query
 * DESCRIPTION
 *  query contact info from phb, it can be use to get contact list
 * PARAMETERS
 *  req:                 [IN]        query req
 *  handle:              [IN]        set NULL will create new handle, otherwise
                                     will reset exist handle and use it to query
 * RETURNS
 *  srv_phb_query_handle
 *****************************************************************************/
extern srv_phb_query_handle srv_phb_query(srv_phb_query_req_struct* req, srv_phb_query_handle handle);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_query_get_contact
 * DESCRIPTION
 *  get a contact's full info from query result by index
 * PARAMETERS
 *  handle:             [IN]        query handle
 *  index:              [IN]        item index
 * RETURNS
 *  srv_phb_contact
 *****************************************************************************/
extern srv_phb_contact srv_phb_query_get_contact(srv_phb_query_handle handle, U32 index);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_query_get_count
 * DESCRIPTION
 *  get total item count from query result
 * PARAMETERS
 *  handle:             [IN]        query handle
 * RETURNS
 *  U32
 *****************************************************************************/
extern U32 srv_phb_query_get_count(srv_phb_query_handle handle);


#ifdef __MMI_DIALER_SEARCH__
/*****************************************************************************
 * FUNCTION
 *  srv_phb_query_get_clog_count
 * DESCRIPTION
 *  get total clog item count from query result
 * PARAMETERS
 *  handle:             [IN]        query handle
 * RETURNS
 *  U32
 *****************************************************************************/
extern U32 srv_phb_query_get_clog_count(srv_phb_query_handle handle);
#endif


/*****************************************************************************
 * FUNCTION
 *  srv_phb_query_get_contact_id
 * DESCRIPTION
 *  get a contact id from query result by index
 * PARAMETERS
 *  handle:             [IN]        query handle
 *  index:              [IN]        item index
 * RETURNS
 *  mmi_phb_contact_id
 *****************************************************************************/
extern mmi_phb_contact_id srv_phb_query_get_contact_id(srv_phb_query_handle handle, U32 index);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_query_get_align_field_type
 * DESCRIPTION
 *  get align field type from query result by index
 * PARAMETERS
 *  handle:             [IN]        query handle
 *  index:              [IN]        item index
 *  field_type:         [OUT]       align field type
 * RETURNS
 *  mmi_phb_contact_field_id_enum
 *****************************************************************************/
extern mmi_phb_contact_field_id_enum srv_phb_query_get_align_field_type(srv_phb_query_handle handle, U32 index);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_query_get_align_field
 * DESCRIPTION
 *  get align field from query result by index, the output will be srv_phb_number_struct* or srv_phb_email_struct* depedend the output field_type
 * PARAMETERS
 *  handle:             [IN]        query handle
 *  index:              [IN]        item index
 *  field_type:         [OUT]       align field type
 * RETURNS
 *  void*
 *****************************************************************************/
extern void* srv_phb_query_get_align_field(srv_phb_query_handle handle, U32 index, mmi_phb_contact_field_id_enum* field_type);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_query_get_matched_info
 * DESCRIPTION
 *  get match info from query result by index
 * PARAMETERS
 *  handle:             [IN]        query handle
 *  index:              [IN]        item index
 * RETURNS
 *  srv_phb_query_match_info_struct*
 *****************************************************************************/
extern srv_phb_query_match_info_struct* srv_phb_query_get_matched_info(srv_phb_query_handle handle, U32 index);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_query_get_alpha_count
 * DESCRIPTION
 *  get alpha count, must call srv_phb_query before
 * PARAMETERS
 *  handle                  : [IN] query handle
 *  alpha_index             : [IN] alpha index 'a' match 1 & 0 for other 
 * RETURNS
 *  alpha count
 *****************************************************************************/
extern srv_phb_alpha_info_struct* srv_phb_query_get_alpha_count(srv_phb_query_handle handle, U16 alpha_index);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_query_get_name
 * DESCRIPTION
 *  get name filed from query result by index
 * PARAMETERS
 *  handle:             [IN]        query handle
 *  index:              [IN]        item index
 * RETURNS
 *  WCHAR*
 *****************************************************************************/
extern WCHAR* srv_phb_query_get_name(srv_phb_query_handle handle, U32 index);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_query_get_imgae
 * DESCRIPTION
 *  get image filed from query result by index
 * PARAMETERS
 *  handle:             [IN]        query handle
 *  index:              [IN]        item index
 * RETURNS
 *  srv_phb_res_struct*
 *****************************************************************************/
extern srv_phb_res_struct* srv_phb_query_get_imgae(srv_phb_query_handle handle, U32 index);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_query_get_number
 * DESCRIPTION
 *  get number filed from query result by index, if align field not number it will return NULL
 * PARAMETERS
 *  handle:             [IN]        query handle
 *  index:              [IN]        item index
 * RETURNS
 *  srv_phb_number_struct*
 *****************************************************************************/
extern srv_phb_number_struct* srv_phb_query_get_number(srv_phb_query_handle handle, U32 index, WCHAR* buf);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_query_get_email
 * DESCRIPTION
 *  get email filed from query result by index, if align field not email it will return NULL
 * PARAMETERS
 *  handle:             [IN]        query handle
 *  index:              [IN]        item index
 * RETURNS
 *  srv_phb_email_struct*
 *****************************************************************************/
extern srv_phb_email_struct* srv_phb_query_get_email(srv_phb_query_handle handle, U32 index);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_free_query_handle
 * DESCRIPTION
 *  free a query handle
 * PARAMETERS
 *  handle:             [IN]        query handle
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_free_query_handle(srv_phb_query_handle handle);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_number_id_check_modify
 * DESCRIPTION
 *  This function is used to check a number id's number is modified
 * PARAMETERS
 *  number:             [IN]        old number data
 *  number_id:          [IN]        contact number's id
 *  id:                 [IN]        modified contact's store_index
 *  contact:            [IN]        modified contact's info
 * RETURN VALUES
 *  MMI_TRUE:           modified
 *  MMI_FALSE:          Not modified
 *****************************************************************************/
extern MMI_BOOL srv_phb_number_id_check_modify(WCHAR *number, SRV_PHB_ID number_id, mmi_phb_contact_id id, srv_phb_contact contact);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_convert_field_filter
 * DESCRIPTION
 *  Convert old phb srv field mask to new field mask. This's API is just for adapted old phb srv.
 * PARAMETERS
 *  field_filter           : [IN]   old field mask such as SRV_PHB_ENTRY_FIELD_NAME
 * RETURNS
 *  U32
 *****************************************************************************/
extern U32 srv_phb_convert_field_filter(U32 field_filter);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_num_count
 * DESCRIPTION
 *  get a contact's exist number count
 * PARAMETERS
 *  id           : [IN]   contact id
 * RETURNS
 *  U32
 *****************************************************************************/
extern U8 srv_phb_get_num_count(mmi_phb_contact_id id);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_email_count
 * DESCRIPTION
 *  get a contact's exist email count
 * PARAMETERS
 *  id           : [IN]   contact id
 * RETURNS
 *  U32
 *****************************************************************************/
extern U8 srv_phb_get_email_count(mmi_phb_contact_id id);


#ifdef __MMI_VCARD__
/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_vcard_support_property
 * DESCRIPTION
 * 
 * PARAMETERS
 *  storage           : [IN]   phb_storage_enum
 * RETURNS
 *  U32
 *****************************************************************************/
extern U32 srv_phb_get_vcard_support_property(phb_storage_enum storage);
#endif /* __MMI_VCARD__ */


/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_support_field
 * DESCRIPTION
 *  get all support filed's mask
 * PARAMETERS
 *  storage           : [IN]   phb_storage_enum
 * RETURNS
 *  U32
 *****************************************************************************/
extern U32 srv_phb_get_support_field(phb_storage_enum storage);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_support_field_count
 * DESCRIPTION
 *  get each contact field support count
 * PARAMETERS
 *  storage           : [IN]   storage refer phb_storage_enum
 *  field             : [IN]   contact field
 * RETURNS
 *  U32
 *****************************************************************************/
extern U32 srv_phb_get_support_field_count(U8 storage, mmi_phb_contact_field_id_enum field);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_alpha_field_length
 * DESCRIPTION
 *  get alpha filed's alpha length, such as name, number. For phone storage, the
 *  return value is char count. For sim storage, the return value is the sim 
 *  file's alpha length
 * PARAMETERS
 *  storage           : [IN]   storage refer phb_storage_enum
 *  field             : [IN]   contact field
 * RETURNS
 *  U32
 *****************************************************************************/
U32 srv_phb_get_alpha_field_length(phb_storage_enum storage, mmi_phb_contact_field_id_enum field);


#ifdef __MMI_PHB_USIM_SUPPORT__
/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_usim_field_total
 * DESCRIPTION
 *  
 * PARAMETERS
 *  
 * RETURNS
 *  
 *****************************************************************************/
extern U16 srv_phb_get_usim_field_total(phb_storage_enum storage, U8 occr, phb_type_enum type);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_usim_field_used
 * DESCRIPTION
 *  
 * PARAMETERS
 *  
 * RETURNS
 *  
 *****************************************************************************/
extern U16 srv_phb_get_usim_field_used(phb_storage_enum storage, U8 occr, phb_type_enum type);
#endif


/*****************************************************************************
 * FUNCTION
 *  srv_phb_add_field_type
 * DESCRIPTION
 *  add a new field type
 * PARAMETERS
 *  type_info          :   [IN]    type info
 * RETURNS
 *  S32
 * RETURN VALUES
 *  >=0                 :           type id
 *  -1                  :           error
 *****************************************************************************/
extern S32 srv_phb_add_field_type(WCHAR* type_label, mmi_phb_contact_field_id_enum field);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_delete_field_type
 * DESCRIPTION
 *  delete a field type
 * PARAMETERS
 *  type_id            :   [IN]    type id
 * RETURNS
 *  void
 *****************************************************************************/
extern MMI_BOOL srv_phb_delete_field_type(U8 type_id, mmi_phb_contact_field_id_enum field);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_phone_get_type_list
 * DESCRIPTION
 *  get field type id list ordered by type name
 * PARAMETERS
 *  type_array         :   [OUT]   type id array
 * RETURNS
 *  U8
 * RETURN VALUES
 *  count               :           type count
 ****************************************************************************/
extern U8 srv_phb_get_field_type_list(U8* type_array, mmi_phb_contact_field_id_enum field, phb_storage_enum storage);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_field_type_label
 * DESCRIPTION
 *  get a field type label by id
 * PARAMETERS
 *  type_id            :   [IN]    type id
 *  field              :   [IN]    field
 * RETURNS
 *  WCHAR*
 *****************************************************************************/
extern WCHAR* srv_phb_get_field_type_label(U8 type_id, mmi_phb_contact_field_id_enum field, phb_storage_enum storage);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_update_field_type
 * DESCRIPTION
 *  update a field type
 * PARAMETERS
 *  
 * RETURNS
 *  
 *****************************************************************************/
extern S32 srv_phb_update_field_type(U8 type_id, WCHAR* type_label, mmi_phb_contact_field_id_enum field);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_max_field_type
 * DESCRIPTION
 *  get max field type
 * PARAMETERS
 *  type_id            :   [IN]    type id
 * RETURNS
 *  void
 *****************************************************************************/
extern U8 srv_phb_get_max_field_type(phb_storage_enum storage, mmi_phb_contact_field_id_enum field);


/****************************************************/
/*                                                  */
/*               Group op                           */
/*                                                  */
/****************************************************/

/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_group_list
 * DESCRIPTION
 *  get group id list ordered by group name
 * PARAMETERS
 *  group_array         :   [IN/OUT]   group id array
 *  group_name         :   [IN/OUT]   group name
 *  storage               :   [IN] phb_storage_enum such as PHB_STOAGE_NVRAM
 * RETURNS
 *  U32
 * RETURN VALUES
 *  count               :           group count
 ****************************************************************************/
U32 srv_phb_get_group_list(U8* group_array, U16* group_name, phb_storage_enum storage);


#ifdef __MMI_PHB_CALLER_GROUP__
typedef struct
{
    mmi_phb_contact_id* id_array;
    U16 entry_count;
    U8 group_id;
    MMI_BOOL is_reset;
    srv_phb_group_callback_type cb;
    void *user_data;
}srv_phb_group_add_members_req;

/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_storage_by_group_id
 * DESCRIPTION
 *  get phone book storage by group id
 * PARAMETERS
 *  group_id     :  [IN]  group id
 * RETURNS
 *  phb_storage_enum
 *****************************************************************************/
phb_storage_enum srv_phb_get_storage_by_group_id(U8 group_id);

/*****************************************************************************
 * FUNCTION
 *  srv_phb_add_group_members
 * DESCRIPTION
 *  add contacts to a group
 * PARAMETERS
 *  req                   :   [IN]   srv_phb_group_add_members_req
 * RETURNS
 *  void
 *****************************************************************************/
void srv_phb_add_group_members(srv_phb_group_add_members_req *req);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_remove_group_member
 * DESCRIPTION
 *  remove a member from a group
 * PARAMETERS
 *  id                  :   [IN]    contact's store_index
 *  group_id            :   [IN]    group id
 *  cb                    :   [IN]    srv_phb_group_callback_type
 * user_data           :   [IN]    user_data
 * RETURNS
 *  void
 *****************************************************************************/
void srv_phb_remove_group_member(mmi_phb_contact_id id, U8 group_id, srv_phb_group_callback_type cb, void* user_data);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_remove_all_group_members
 * DESCRIPTION
 *  remove all members from a group
 * PARAMETERS
 *  group_id            :   [IN]    group id
 *  cb                    :   [IN]    srv_phb_group_callback_type
 *  user_data          :   [IN]    user data
 * RETURNS
 *  void
 *****************************************************************************/
void srv_phb_remove_all_group_members(U8 group_id, srv_phb_group_callback_type cb, void* user_data);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_add_group
 * DESCRIPTION
 *  add a new group
 * PARAMETERS
 *  group_info          :   [IN]    group info
 * RETURNS
 *  S32
 * RETURN VALUES
 *  >=0                 :           group id
 *  SRV_PHB_ERROR                    :          group info is NULL
 *  SRV_PHB_GROUP_NAME_EMPTY:          group name is NULL
 *  SRV_PHB_GROUP_FULL            :          reach max group numbers
 *  SRV_PHB_GROUP_NAME_DUP    :          there are two same group names in a storage
 *****************************************************************************/
void srv_phb_add_group(srv_phb_group_info_struct* group_info);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_delete_group
 * DESCRIPTION
 *  delete a group
 * PARAMETERS
 *  group_id            :   [IN]    group id
 *  cb                    :   [IN]    srv_phb_group_callback_type
 *  user_data          :   [IN]    user data
 * RETURNS
 *  result
 *****************************************************************************/
void srv_phb_delete_group(U8 group_id, srv_phb_group_callback_type cb, void* user_data);

/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_group_info
 * DESCRIPTION
 *  get a group's info
 * PARAMETERS
 *  group_id            :   [IN]    group id
 *  group_info          :   [OUT]   group info
 * RETURNS
 *  S32
 * RETURN VALUES
 *  SRV_PHB_NO_ERROR   :           get success
 *  other               :           error result
 *****************************************************************************/
S32 srv_phb_get_group_info(U8 group_id, srv_phb_group_info_struct* group_info);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_update_group_info
 * DESCRIPTION
 *  update a group
 * PARAMETERS
 *  group_id            :   [IN]    group id
 *  group_info          :   [OUT]   group info
 * RETURNS
 *  S32
 * RETURN VALUES
 *  >= 0                :           piggyback group id
 *  other               :           error result
 *****************************************************************************/
void srv_phb_update_group_info(U8 group_id, srv_phb_group_info_struct* group_info);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_pri_group_info
 * DESCRIPTION
 *  
 * PARAMETERS
 *  
 * RETURNS
 *  
 *****************************************************************************/
void srv_phb_group_cancel_operation(srv_phb_group_op_type_enum op_type);

#endif /* __MMI_PHB_CALLER_GROUP__ */

/***************************************************************************** 
 * Typedef
 *****************************************************************************/
/* phb name display */
typedef enum
{
    SRV_CONTACT_NAME_DISPLAY_TYPE_NONE,
    SRV_CONTACT_NAME_DISPLAY_TYPE_1,                    /* last name first name */
    SRV_CONTACT_NAME_DISPLAY_TYPE_2,                    /* last name,first name */
    SRV_CONTACT_NAME_DISPLAY_TYPE_3,                    /* first name last name */
    SRV_CONTACT_NAME_DISPLAY_TYPE_4,                    /* first name,last name */
    SRV_CONTACT_NAME_DISPLAY_TYPE_TOTAL
} SRV_CONTACT_NAME_DISPLAY_TYPE_ENUM;


typedef enum
{
    SRV_CONTACT_SPEAK_NAME_OFF,                         /* don't speak name */
    SRV_CONTACT_SPEAK_NAME_ON                           /* speak contact name when hilite */
} SRV_CONTACT_SPEAK_NAME_ENUM;


typedef enum
{
    SRV_CONTACT_SAVE_CONTACT_NOTIFY_OFF,                /* don't popup save to contact when meet a new number */
    SRV_CONTACT_SAVE_CONTACT_NOTIFY_ON                  /* popup to notify user a new number comes */
} SRV_CONTACT_SAVE_CONTACT_NOTIFY_ENUM;

/***************************************************************************** 
 * Function 
 *****************************************************************************/

/*****************************************************************************
* FUNCTION
*  srv_phb_get_storage_mask
* DESCRIPTION
*  
* PARAMETERS
*  
* RETURNS
*  
*****************************************************************************/
U16 srv_phb_get_storage_mask(void);


/*****************************************************************************
* FUNCTION
*  srv_phb_set_storage_mask
* DESCRIPTION
*  
* PARAMETERS
*  
* RETURNS
*  
*****************************************************************************/
void srv_phb_set_storage_mask(U16 storage);


/*****************************************************************************
* FUNCTION
*  srv_phb_check_storage_is_hide
* DESCRIPTION
*  
* PARAMETERS
*  
* RETURNS
*  
*****************************************************************************/
extern MMI_BOOL srv_phb_check_storage_is_hide(U8 storage);


/*****************************************************************************
* FUNCTION
*  srv_phb_set_storage_mask
* DESCRIPTION
*  
* PARAMETERS
*  
* RETURNS
*  
*****************************************************************************/
extern SRV_CONTACT_NAME_DISPLAY_TYPE_ENUM srv_phb_get_name_display(void);



/*****************************************************************************
* FUNCTION
*  srv_phb_set_name_display
* DESCRIPTION
*  
* PARAMETERS
*  
* RETURNS
*  
*****************************************************************************/
extern MMI_BOOL srv_phb_set_name_display(SRV_CONTACT_NAME_DISPLAY_TYPE_ENUM type, srv_phb_async_func_type cb);


/*****************************************************************************
* FUNCTION
*  srv_phb_get_save_notify
* DESCRIPTION
*  
* PARAMETERS
*  
* RETURNS
*  
*****************************************************************************/
extern SRV_CONTACT_SAVE_CONTACT_NOTIFY_ENUM srv_phb_get_save_notify(void);


/*****************************************************************************
* FUNCTION
*  srv_phb_set_save_notify
* DESCRIPTION
*  
* PARAMETERS
*  
* RETURNS
*  
*****************************************************************************/
extern void srv_phb_set_save_notify(SRV_CONTACT_SAVE_CONTACT_NOTIFY_ENUM type);


/*****************************************************************************
* FUNCTION
*  srv_phb_get_name_speak
* DESCRIPTION
*  
* PARAMETERS
*  
* RETURNS
*  
*****************************************************************************/
extern SRV_CONTACT_SPEAK_NAME_ENUM srv_phb_get_name_speak(void);


/*****************************************************************************
* FUNCTION
*  srv_phb_set_name_speak
* DESCRIPTION
*  
* PARAMETERS
*  
* RETURNS
*  
*****************************************************************************/
extern void srv_phb_set_name_speak(SRV_CONTACT_SPEAK_NAME_ENUM type);

/*****************************************************************************
 * FUNCTION
 *  srv_phb_get_preferred_sim
 * DESCRIPTION
 *  get last used sim id from a contact
 * PARAMETERS
 *  number    : [IN]    number to search
 *  id           :  [IN]    contact id, if you do not use this param, please set MMI_PHB_INVALID_CONTACT_ID
 *  op_type   : [IN]    please refer to srv_phb_number_op_type_enum
 *  sim_id     : [OUT] mmi_sim_enum
 * RETURNS
 *
 *  SRV_PHB_NO_ERROR             :                   success
 *  SRV_PHB_NOT_FOUND           :                   no number matched
 *  SRV_PHB_NUM_NOT_READY    :                   lookup table not ready
*****************************************************************************/
S32 srv_phb_get_preferred_sim (
            U16 *number,
            mmi_phb_contact_id id,
            srv_phb_number_op_type_enum op_type,
            mmi_sim_enum *sim_id);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_set_preferred_sim
 * DESCRIPTION
 *  set last used sim for a contact
 * PARAMETERS
 *  number    : [IN]  number to set
 *  id           :  [IN]  contact id, if you do not use this param, please set MMI_PHB_INVALID_CONTACT_ID
 *  sim_id     : [IN]  last used sim id
 *  op_type   : [IN]  operater type of this number, refer to srv_phb_number_op_type_enum
 * RETURNS
 *  SRV_PHB_NO_ERROR          :                      success
 *  SRV_PHB_NOT_FOUND        :                      no number matched
 *  SRV_PHB_NUM_NOT_READY    :                   lookup table not ready
*****************************************************************************/
S32 srv_phb_set_preferred_sim (
           U16 *number,
           mmi_phb_contact_id id,
           mmi_sim_enum sim_id,
           srv_phb_number_op_type_enum op_type);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_set_preferred_sim_ex
 * DESCRIPTION
 *  set last used sim for a contact
 * PARAMETERS
 * req
 * RETURNS
 *  SRV_PHB_NO_ERROR          :                      success
 *  SRV_PHB_NOT_FOUND        :                      no number matched
 *  SRV_PHB_NUM_NOT_READY    :                   lookup table not ready
*****************************************************************************/
S32 srv_phb_set_preferred_sim_ex (srv_phb_set_preferred_sim_req* req);

typedef void (*srv_phb_xdnmgr_callback_type)(U16 result, void* user_data);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_xdnmgr_toggle_dial_mode
 * DESCRIPTION
 *  This function is used to toggle FDN/BDN dial mode.
 * PARAMETERS
 *  sim_interface:      [IN]        SIM1/SIM2
 *  phb_type:           [IN]        PHB_FDN/PHB_BDN
 *  toggle_cb:          [IN]        Toggle FDN/BDN dial mode callback
 *  user_data:          [IN]        Caller user data
 * RETURN VALUES
 *  MMI_TRUE:           This request is accepted.
 *  MMI_FALSE:          This request is rejected.
 *****************************************************************************/
extern MMI_BOOL srv_phb_xdnmgr_toggle_dial_mode(
        U8 sim_type, 
        phb_type_enum phb_type, 
        srv_phb_xdnmgr_callback_type cb,
        void *user_data);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_xmgnt_get_list
 * DESCRIPTION
 *  This function is used to get extra# list.
 * PARAMETERS
 *  sim_interface:      [IN]        SIM1/SIM2
 *  phb_type:           [IN]        PHB_ECC/PHB_FDN/PHB_BDN/PHB_MSISDN/PHB_SDN
 *  list_cb:            [IN]        Get extra# list callback
 * RETURNS
 *  extra# handle
 *****************************************************************************/
extern SRV_PHB_XMGNT_HANDLE srv_phb_xdnmgr_get_list(
        U8 sim_type,
        phb_type_enum phb_type,
        srv_phb_xdnmgr_callback_type list_cb,
        void *user_data);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_fdnmgr_set_entry
 * DESCRIPTION
 *  This function is used to add/edit extra# entry.
 * PARAMETERS
 *  sim_interface:      [IN]        SIM1/SIM2
 *  phb_type:           [IN]        PHB_ECC/PHB_FDN/PHB_BDN/PHB_MSISDN/PHB_SDN
 *  index:              [IN]        PHB entry index
 *  record_index:       [IN]        PHB record index
 *  name:               [IN]        extra# name
 *  number:             [IN]        extra# number
 *  set_cb:             [IN]        Add/Edit extra# entry callback
 *  user_data:         [IN]        this pointer
 * RETURN VALUES
 *  MMI_TRUE:           This request is accepted.
 *  MMI_FALSE:          This request is rejected.
 *****************************************************************************/
extern MMI_BOOL srv_phb_fdnmgr_set_entry(
                    U8 sim_interface,
                    U8 phb_type,
                    U16 index,
                    U16 record_index,
                    U16 *name,
                    U16 *number,
                    srv_phb_xdnmgr_callback_type set_cb,
                    SRV_PHB_XMGNT_HANDLE handle,
                    MMI_BOOL is_new,
                    void *user_data);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_xdnmgr_delete_entry
 * DESCRIPTION
 *  This function is used to delete extra# entry.
 * PARAMETERS
 *  sim_interface:      [IN]        SIM1/SIM2
 *  phb_type:           [IN]        PHB_ECC/PHB_FDN/PHB_BDN/PHB_MSISDN/PHB_SDN
 *  index:              [IN]        PHB entry index
 *  record_index:       [IN]        PHB record index
 *  del_cb:             [IN]        Delete extra# entry callback
 *  user_data:           [IN]      user_data
 * RETURN VALUES
 *  MMI_TRUE:           This request is accepted.
 *  MMI_FALSE:          This request is rejected.
 *****************************************************************************/
extern MMI_BOOL srv_phb_xdnmgr_delete_entry(
                    U8 sim_interface,
                    U8 phb_type,
                    U16 index,
                    U16 record_index,
                    srv_phb_xdnmgr_callback_type del_cb,
                    void *user_data);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_read_my_number
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_read_my_number(mmi_phb_my_number_struct *my_number);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_write_my_number
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_write_my_number(mmi_phb_my_number_struct *my_number);

#if defined(__MMI_OP11_HOMESCREEN_0301__) || defined(__MMI_OP11_HOMESCREEN_0302__) || defined(__MMI_OP11_HOMESCREEN__) || defined (__MMI_VUI_WIDGET_KEY_VIP_CONTACT__)

/*****************************************************************************
 * FUNCTION
 *  srv_phb_update_vip_contact
 * DESCRIPTION
 *  
 * PARAMETERS
 *  index           [IN]        
 *  store_index     [IN]        
 *  name            [IN]        
 *  number          [IN]        
 *  num_type        [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_update_vip_contact(U16 index, U16 store_index, U16 *name, U16 *number, U32 num_type);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_clear_vip_contact
 * DESCRIPTION
 *  
 * PARAMETERS
 *  index           [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void srv_phb_clear_vip_contact(U16 index);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_clear_all_vip_contact
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void srv_phb_clear_all_vip_contact(void);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_vip_contact_is_sync
 * DESCRIPTION
 *  
 * PARAMETERS
 *  index           [IN]        
 * RETURNS
 *  MMI_TRUE if set
 *****************************************************************************/
MMI_BOOL srv_phb_vip_contact_is_sync(U16 index);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_vip_contact_get_store_index
 * DESCRIPTION
 *  
 * PARAMETERS
 *  index           [IN]        
 * RETURNS
 *  VIP contact store index
 *****************************************************************************/
U16 srv_phb_vip_contact_get_store_index(U16 index);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_vip_contact_get_name
 * DESCRIPTION
 *  
 * PARAMETERS
 *  index           [IN]        
 * RETURNS
 *  VIP contact name
 *****************************************************************************/
U16 *srv_phb_vip_contact_get_name(U16 index);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_vip_contact_get_number
 * DESCRIPTION
 *  
 * PARAMETERS
 *  index           [IN]        
 * RETURNS
 *  VIP contact number
 *****************************************************************************/
U16 *srv_phb_vip_contact_get_number(U16 index);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_vip_contact_get_entry
 * DESCRIPTION
 *  
 * PARAMETERS
 *  index           [IN]        
 * RETURNS
 *  VIP contact entry
 *****************************************************************************/
mmi_phb_vip_contact_struct *srv_phb_vip_contact_get_entry(U16 index);

/*****************************************************************************
 * FUNCTION
 *  srv_phb_vip_contact_get_count
 * DESCRIPTION
 *  
 * PARAMETERS
 *  index           [IN]        
 * RETURNS
 *  
 *****************************************************************************/
U32 srv_phb_vip_contact_get_count(void);

/*****************************************************************************
 * FUNCTION
 *  srv_phb_vip_contact_delete_entry
 * DESCRIPTION
 *  
 * PARAMETERS
 *  index           [IN]        
 * RETURNS
 *  
 *****************************************************************************/
void srv_phb_vip_contact_delete_entry(U32 index);

#endif /* defined(__MMI_OP11_HOMESCREEN_0301__) || defined(__MMI_OP11_HOMESCREEN_0302__) || defined(__MMI_OP11_HOMESCREEN__) */


/****************************************************/
/*                                                                                        */
/*               backup restore                                                   */
/*                                                                                        */
/****************************************************/
#ifdef __MMI_MULTI_VCARD__

#define SRV_PHB_BACKUP_RESTORE_FILE_FOLDER_NAME "BackUpRestore"
#define SRV_PHB_BACKUP_RESTORE_FILE_CONFIG_NAME "~vcardConfigure.txt"
#define SRV_PHB_BACKUP_RESTORE_FILE_NAME "vcard.vcf"


typedef struct
{
    WCHAR year[4 + 1];
    WCHAR month[2 + 1];
    WCHAR day[2 + 1];
}srv_phb_backup_restore_time_struct;


typedef struct
{
    WCHAR is_empty[1 + 1];
    U32   contact_num;
    WCHAR file_path[40 + 1];
    srv_phb_backup_restore_time_struct date; 
}srv_phb_backup_restore_file_config_struct;
#endif

#ifdef __MMI_VCARD__
#include "..\..\vcard\include\vcard_lib.h"

#define SRV_PHB_VCARD_PORT             0x23f4
#define SRV_PHB_VCARD_FILE_PATH        "Received"
#define SRV_PHB_VCARD_FILE_EXT         ".vcf"

/*****************************************************************************
 * FUNCTION
 *  srv_phb_convert_to_vcard_object
 * DESCRIPTION
 *  
 * PARAMETERS
 *  contact       [IN]        
 *  vcard_object    [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void srv_phb_contact_to_vcard_object(srv_phb_contact contact, vcard_object_struct *vcard_object);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_vcard_object_to_contact
 * DESCRIPTION
 *  
 * PARAMETERS
 *  contact       [IN]        
 *  vcard_object    [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
srv_phb_contact srv_phb_vcard_object_to_contact(srv_phb_contact contact, vcard_object_struct *vcard_object);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_convert_to_vcard_object
 * DESCRIPTION
 *  used for PLUTO MMI only and will phase out
 *  convert contact to vcard object
 * PARAMETERS
 *  contact_p       [IN]        
 *  vcard_object    [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_convert_to_vcard_object(srv_phb_contact_info_struct *contact_p, vcard_object_struct *vcard_object);


/*****************************************************************************
 * FUNCTION
 *  srv_phb_convert_from_vcard_object
 * DESCRIPTION
 *  used for PLUTO MMI only and will phase out
 *  convert vcard object to contact
 * PARAMETERS
 *  contact_p       [IN]        
 *  vcard_object    [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
extern void srv_phb_convert_from_vcard_object(srv_phb_contact_info_struct *contact_p, vcard_object_struct *vcard_object);

#endif /* __MMI_VCARD__ */

#if defined(SUPPORT_JSR_75_PIM) || defined(SUPPORT_CMCC)
#include "App_datetime.h"

#define MMI_PHB_JAVA_SEARCH_LENGTH (MMI_PHB_EMAIL_LENGTH+1)

typedef struct
{
    U16  sort_index; /* sort index or the no. of group member */
    U16  store_index;
    U16 name[MMI_PHB_NAME_LENGTH + 1];

#ifndef __COSMOS_MMI_PACKAGE__
    U16 number[MMI_PHB_NUMBER_LENGTH + 1 + 1];
    mmi_phb_wcs_num_struct opt_num[MMI_PHB_OPT_NUM_COUNT];
    
    /* to be remove begin */
    U16 homeNumber[MMI_PHB_NUMBER_LENGTH + 1 + 1];
    U16 officeNumber[MMI_PHB_NUMBER_LENGTH + 1 + 1];
    U16 faxNumber[MMI_PHB_NUMBER_LENGTH + 1 + 1];
    /* to be remove end */
    
    U16 emailAddress[MMI_PHB_EMAIL_LENGTH + 1];
#ifdef JSR_75_PIM_EXTRA_EMAIL2
    U16 emailAddress2[MMI_PHB_EMAIL_LENGTH + 1];
#endif
#else
    mmi_phb_wcs_num_struct opt_num[MMI_PHB_NUMBER_FIELD_COUNT];
    mmi_phb_wcs_email_struct emailAddresses[MMI_PHB_EMAIL_FIELD_COUNT];
#endif

    U16 companyName[MMI_PHB_COMPANY_LENGTH + 1];
#ifdef JSR_75_PIM_EXTRA_BIRTHDAY
    applib_time_struct bDay;
#endif

#ifdef JSR_75_PIM_EXTRA_INFO
    U16 title[MMI_PHB_TITLE_LENGTH + 1];
    U16 url[MMI_PHB_URL_LENGTH + 1];
    U16 adrPOBox[MMI_PHB_ADDRESS_LENGTH + 1];
    U16 adrExtension[MMI_PHB_ADDRESS_LENGTH + 1];
    U16 adrStreet[MMI_PHB_ADDRESS_LENGTH + 1];
    U16 adrCity[MMI_PHB_ADDRESS_LENGTH + 1];
    U16 adrState[MMI_PHB_ADDRESS_LENGTH + 1];
    U16 adrPostalCode[MMI_PHB_ADDRESS_LENGTH + 1];
    U16 adrCountry[MMI_PHB_ADDRESS_LENGTH + 1];
    U16 note[MMI_PHB_NOTE_LENGTH + 1];
#endif /* JSR_75_PIM_EXTRA_INFO */
#ifdef JSR_75_PIM_EXTRA_IMAGE
    U16 phb_image_path[SRV_FMGR_PATH_MAX_LEN + 1];
#endif /* JSR_75_PIM_EXTRA_IMAGE */

    /* Put these two U8 at the end of structure to prevent 4-bytes alignment problem */
    U32 group_id;  /* 1-based. 0 is no group. 1~MMI_PHB_CALLER_GROUPS in NVRAM; MMI_PHB_CALLER_GROUPS~ in USIM. */
#ifdef JSR_75_PIM_EXTRA_PREFERRED_NUMBER
    U8 preferred_no;
#endif

} mmi_phb_handler_entry_struct;


typedef struct 
{
    U16 group_name[MMI_PHB_GROUP_NAME_LENGTH+1];
    U8 group_id;
    U8 padding; /* reserved 2 bytes alignment*/
} mmi_phb_handler_group_struct;

typedef struct 
{
    U16 list[MMI_PHB_PHONE_ENTRIES];
	U16 count;
} mmi_phb_handler_delete_member_list_struct;


typedef struct
{
    LOCAL_PARA_HDR
//    U8 sort_type;
    U8 storage;
    U16 index; /* physical store_index (0~MAX_PB_ENTRIES-1) for update and delete command */
    mmi_phb_handler_entry_struct *entry_ptr; /* NULL for delete command */
} mmi_phb_handler_set_entry_req_struct;

typedef struct
{
    LOCAL_PARA_HDR 
    U8 result;
//    U16 index;  /* sort index, not physical store index */
    U16 store_index; /* physical store index */
} mmi_phb_handler_set_entry_rsp_struct;

typedef struct
{
    LOCAL_PARA_HDR 
    U8 sort_type;
    U8 storage;
    U8 group;
    U16 index; /* sort index */
    U16 count; /* if count is 0, return the total count */
    mmi_phb_handler_entry_struct *entry_ptr;
} mmi_phb_handler_get_entry_req_struct;

typedef struct
{
    LOCAL_PARA_HDR
    U8 result;
    U16 count;
} mmi_phb_handler_get_entry_rsp_struct;

typedef struct
{
    LOCAL_PARA_HDR
    U16 pattern[MMI_PHB_JAVA_SEARCH_LENGTH];
    U8 sort_type;
    U8 storage;
    U8 search_type;
    U8 group;
    U16 start_index;  /* 0-based, 0 means the first sorted item, 1 means 2nd sorted item */
    mmi_phb_handler_entry_struct *entry_ptr;
} mmi_phb_handler_search_entry_req_struct;

typedef struct
{
    LOCAL_PARA_HDR
    U8 result;
    U16 index; /* sort index if succeess */
} mmi_phb_handler_search_entry_rsp_struct;


typedef struct
{
    LOCAL_PARA_HDR
    U8 max_group;
    U8 storage;
    mmi_phb_handler_group_struct* group_ptr;
} mmi_phb_handler_get_group_info_req_struct;


typedef struct
{
    LOCAL_PARA_HDR
    U8 result;
    U8 count;
} mmi_phb_handler_get_group_info_rsp_struct;


typedef struct
{
    LOCAL_PARA_HDR
    U8 group_id; /* 0-based */
    mmi_phb_handler_group_struct* group_ptr;
    mmi_phb_handler_delete_member_list_struct* delete_list_ptr;
} mmi_phb_handler_set_group_info_req_struct;


typedef struct
{
    LOCAL_PARA_HDR
    U8 result;
} mmi_phb_handler_set_group_info_rsp_struct;


typedef enum
{
    MMI_PHB_NO_SORT,
    MMI_PHB_BY_NAME,
    MMI_PHB_BY_EMAIL,
    MMI_PHB_BY_NUMBER
} mmi_phb_sort_type_enum;

typedef enum
{
    MMI_PHB_JAVA_ERROR,
    MMI_PHB_JAVA_SUCCESS,
    MMI_PHB_JAVA_NOT_READY,
    MMI_PHB_JAVA_NOT_SUPPORT,
    MMI_PHB_JAVA_NOT_FOUND,
    MMI_PHB_JAVA_STORAGE_FULL,
    MMI_PHB_JAVA_NUMBER_TOO_LONG,
    MMI_PHB_JAVA_ADN_FORBID,
    MMI_PHB_JAVA_OUT_OF_INDEX,
    MMI_PHB_JAVA_EMAIL_FULL,
    MMI_PHB_JAVA_ANR_FULL,
    MMI_PHB_JAVA_BIRTHDAY_ERROR,
    MMI_PHB_JAVA_NO_SIM_CARD,
    MMI_PHB_JAVA_IMAGE_ERROR,
    MMI_PHB_JAVA_ERROR_ENUM_TOTAL
} mmi_phb_java_error_enum;
#endif /* defined(SUPPORT_JSR_75_PIM) || defined(SUPPORT_CMCC) */
#if defined(__MMI_PBAP_SUPPORT__) && defined(__MMI_VCARD__)

/* vcard field supported */
#define VCARD_FILTER_VER       0        /* Version (Bit 0) */
#define VCARD_FILTER_FN        1        /* Formatted Name (Bit 1) */
#define VCARD_FILTER_N         2        /* Structured Presentation of Name (Bit 2) */
#define VCARD_FILTER_PHOTO     3        /* Associated Image or Photo (Bit 3) */
#define VCARD_FILTER_BDAY      4        /* Birthday (Bit 4) */
#define VCARD_FILTER_ADR       5        /* Delivery Address (Bit 5) */
#define VCARD_FILTER_LABEL     6        /* Delivery (Bit 6) */
#define VCARD_FILTER_TEL       7        /* Telephone (Bit 7) */
#define VCARD_FILTER_EMAIL     8        /* Electronic Mail Address (Bit 8) */
#define VCARD_FILTER_MAILER    9        /* Electronic Mail (Bit 9) */
#define VCARD_FILTER_TZ        10       /* Time Zone (Bit 10) */
#define VCARD_FILTER_GEO       11       /* Geographic Position (Bit 11) */
#define VCARD_FILTER_TITLE     12       /* Job (Bit 12) */
#define VCARD_FILTER_ROLE      13       /* Role within the Organization (Bit 13) */
#define VCARD_FILTER_LOGO      14       /* Organization Logo (Bit 14) */
#define VCARD_FILTER_AGENT     15       /* vCard of Person Representing (Bit 15) */
#define VCARD_FILTER_ORG       16       /* Name of Organization (Bit 16) */
#define VCARD_FILTER_NOTE      17       /* Comments (Bit 17) */
#define VCARD_FILTER_REV       18       /* Revision (Bit 18) */
#define VCARD_FILTER_SOUND     19       /* Pronunciation of Name (Bit 19) */
#define VCARD_FILTER_URL       20       /* Uniform Resource Locator (Bit 20) */
#define VCARD_FILTER_UID       21       /* Unique ID (Bit 21) */
#define VCARD_FILTER_KEY       22       /* Public Encryption Key (Bit 22) */
#define VCARD_FILTER_NICK      23       /* Nickname (Bit 23) */
#define VCARD_FILTER_CAT       24       /* Categories (Bit 24) */
#define VCARD_FILTER_PRODID    25       /* Product Id (Bit 25) */
#define VCARD_FILTER_CLASS     26       /* Class Information (Bit 26) */
#define VCARD_FILTER_SORT_STR  27       /* Sort string (Bit 27) */
#define VCARD_FILTER_TIMESTAMP 28       /* Time stamp (Bit 28) */
/* Bits 29-38 Reserved for future use */
#define VCARD_FILTER_PROP      39       /* Use of a proprietary filter (Bit 39) */
/* Bits 40-63 Reserved for proprietary filter usage */

#define VCARD_FIELD_MAX        64       /* max count of vcard field */


/* vcard build error */
typedef enum
{
    PHB_VCARD_NO_ERROR,           /* no error */
    PHB_VCARD_IN_USE,             /* vcard to build is using */
    PHB_VCARD_NOT_FOUND,          /* vcard index not found */
    PHB_VCARD_FS_ERROR,           /* FS ERROR */
    PHB_VCARD_ERROR_TOTAL
} mmi_phb_vcard_error_enum;

typedef struct
{
    mmi_phb_vcard_error_enum error_code;
    S32 fs_error;
} mmi_phb_vcard_error_struct;

/* vcard storage */
typedef enum
{
    PHB_STORAGE_NO,
    PHB_STORAGE_NVRAM_PB,
    PHB_STORAGE_NVRAM_OCH,
    PHB_STORAGE_NVRAM_ICH,
    PHB_STORAGE_NVRAM_MCH,
    PHB_STORAGE_NVRAM_CCH,
    PHB_STORAGE_SIM1_PB,
    PHB_STORAGE_SIM1_OCH,
    PHB_STORAGE_SIM1_ICH,
    PHB_STORAGE_SIM1_MCH,
    PHB_STORAGE_SIM1_CCH,
    PHB_STORAGE_TOTAL
}mmi_phb_storage_enum;

/* index sort order */
typedef enum
{
    PHB_SORT_ORDER_NONE,
    PHB_SORT_ORDER_INDEX,           /* sort by vcard index */
    PHB_SORT_ORDER_NAME,            /* sort by name */
    PHB_SORT_ORDER_TOTAL
} mmi_phb_sort_order_enum;


/* vcard object */
typedef struct
{
    U16 index_hdlr;                         /* phonebook store index handler , 0 for owner number */
    U8 vcard_storage;                       /* mmi_phb_storage_enum */
    U8 vcard_filter[VCARD_FIELD_MAX / 8];   /* the bit be set 1 will be built if support */
    U8 vcard_format;                        /* vcard format */
} mmi_vcard_object_struct;

typedef struct
{
    /* Array of 8 bytes for this 64-bit filter value */
    kal_uint8 byte[VCARD_FIELD_MAX / 8];
} mmi_vcard_filter_struct;

typedef struct
{
    U16 index;
    U8 storage;
    U16 *index_array;
    U32 index_array_size;
    CHAR number[(MMI_PHB_NUMBER_LENGTH + 1 + 1) * ENCODING_LENGTH];
    CHAR name[(MMI_PHB_NAME_LENGTH + 1) * ENCODING_LENGTH];
    U16 file_path[(SRV_FMGR_PATH_MAX_LEN + 1) * ENCODING_LENGTH];
} mmi_phb_get_info_struct;

typedef void (*mmi_phb_build_vcard_funcptr_type)(mmi_phb_vcard_error_struct* error_info);
typedef void (*mmi_phb_get_index_array_funcptr_type)(mmi_phb_vcard_error_struct* error_info, U16* array, U16 array_count);
typedef void (*mmi_phb_get_info_by_index_funcptr_type)(mmi_phb_vcard_error_struct* error_info, CHAR* name, CHAR* number);
typedef void (*mmi_phb_get_storage_size_funcptr_type)(mmi_phb_vcard_error_struct* error_info, U16 size);

extern void mmi_phb_build_vcard(
                U16* path,
                mmi_vcard_object_struct* vcard_object,
                MMI_BOOL is_append,
                mmi_phb_build_vcard_funcptr_type build_done_cb);

extern void mmi_phb_get_info_by_index(
                U16 index_hdlr,
                U8 vcard_storage,
                mmi_phb_get_info_by_index_funcptr_type get_info_cb);

extern void mmi_phb_get_new_missed_calls(mmi_phb_get_storage_size_funcptr_type get_size_cb);

extern void mmi_phb_get_index_array(
                U8 vcard_storage,
                U8 sort_order,
                U16* index_array,
                U32 index_array_size,
                mmi_phb_get_index_array_funcptr_type get_index_array_cb);

extern void mmi_phb_get_storage_size(
                U8 vcard_storage,
                mmi_phb_get_storage_size_funcptr_type get_storage_size_cb);

#endif /* __MMI_PBAP_SUPPORT__ */


#ifdef __OP01_FWPBW__
extern MMI_BOOL srv_phb_get_direct_dial(U16 index, U16 *buf);
#endif
#ifdef __cplusplus
}
#endif

#endif /* PHBSRVGPROT_H */

